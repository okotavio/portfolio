{"version":3,"file":"5789291bb425b4fc38e87b9a25ec056e8de8d957-4e88b3f2b13b5b513ce9.js","mappings":"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","sources":["webpack://otavio-vidal-product-designer/./node_modules/@emotion/memoize/dist/memoize.browser.esm.js","webpack://otavio-vidal-product-designer/./node_modules/@emotion/is-prop-valid/dist/is-prop-valid.browser.esm.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/context/MotionConfigContext.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/events/use-dom-event.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/motion/features/definitions.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/context/LazyContext.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/motion/features/use-features.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/context/MotionContext/index.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/context/PresenceContext.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/components/AnimatePresence/use-presence.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/context/LayoutGroupContext.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/motion/utils/use-visual-element.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/utils/is-ref-object.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/context/MotionContext/create.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/context/MotionContext/utils.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/motion/index.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/motion/utils/use-motion-ref.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/render/dom/motion-proxy.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/render/svg/lowercase-elements.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/render/dom/utils/is-svg-component.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/render/dom/projection/scale-correction.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/render/html/utils/transform.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/motion/utils/is-forced-motion-value.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/value/utils/is-motion-value.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/render/html/utils/build-transform.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/render/dom/utils/is-css-variable.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/render/dom/value-types/get-as-type.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/render/html/utils/build-styles.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/render/html/utils/create-render-state.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/render/html/use-props.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/motion/utils/valid-prop.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/render/dom/utils/filter-props.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/render/svg/utils/transform-origin.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/render/svg/utils/path.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/render/svg/utils/build-attrs.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/render/svg/utils/create-render-state.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/render/svg/use-props.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/render/dom/use-render.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/render/dom/utils/camel-to-dash.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/render/html/utils/render.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/render/svg/utils/camel-case-attrs.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/render/svg/utils/render.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/render/html/utils/scrape-motion-values.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/render/svg/utils/scrape-motion-values.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/animation/utils/is-animation-controls.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/motion/utils/use-visual-state.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/value/utils/resolve-motion-value.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/render/svg/config-motion.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/render/html/config-motion.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/render/utils/types.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/gestures/utils/event-type.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/events/event-info.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/events/use-pointer-event.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/events/utils.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/gestures/drag/utils/lock.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/gestures/use-hover-gesture.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/gestures/utils/is-node-or-child.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/utils/use-unmount-effect.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/motion/utils/make-renderless-component.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/motion/features/gestures.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/gestures/use-tap-gesture.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/gestures/use-focus-gesture.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/utils/shallow-compare.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/render/utils/animation-state.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/motion/features/animations.js","webpack://otavio-vidal-product-designer/./node_modules/popmotion/dist/es/utils/is-point.js","webpack://otavio-vidal-product-designer/./node_modules/popmotion/dist/es/utils/is-point-3d.js","webpack://otavio-vidal-product-designer/./node_modules/popmotion/dist/es/utils/distance.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/gestures/PanSession.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/utils/noop.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/utils/geometry/index.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/utils/each-axis.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/gestures/drag/utils/constraints.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/render/dom/projection/measure.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/utils/geometry/delta-calc.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/render/utils/compare-by-depth.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/render/dom/projection/utils.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/motion/features/layout/utils.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/render/utils/is-draggable.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/utils/geometry/delta-apply.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/render/dom/utils/batch-layout.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/gestures/drag/VisualElementDragControls.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/render/dom/projection/convert-to-relative.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/motion/features/drag.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/components/AnimateSharedLayout/types.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/gestures/use-pan-gesture.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/gestures/drag/use-drag.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/render/dom/utils/css-variables-conversion.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/render/dom/projection/default-scale-correctors.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/motion/features/layout/Animate.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/components/AnimateSharedLayout/utils/batcher.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/context/SharedLayoutContext.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/motion/features/layout/Measure.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/motion/features/layout/index.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/render/utils/state.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/render/html/utils/build-projection-transform.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/render/utils/lifecycles.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/render/utils/projection.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/render/utils/flat-tree.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/render/index.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/render/utils/motion-values.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/render/dom/projection/relative-set.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/render/dom/utils/unit-conversion.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/render/dom/utils/parse-dom-variant.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/render/html/visual-element.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/render/svg/visual-element.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/render/dom/create-visual-element.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/render/dom/motion.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/render/dom/utils/create-config.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/utils/is-browser.js","webpack://otavio-vidal-product-designer/./node_modules/framer-motion/dist/es/utils/use-isomorphic-effect.js"],"sourcesContent":["function memoize(fn) {\n  var cache = {};\n  return function (arg) {\n    if (cache[arg] === undefined) cache[arg] = fn(arg);\n    return cache[arg];\n  };\n}\n\nexport default memoize;","import memoize from '@emotion/memoize';\nvar reactPropsRegex = /^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|inert|itemProp|itemScope|itemType|itemID|itemRef|on|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/; // https://esbench.com/bench/5bfee68a4cd7e6009ef61d23\n\nvar index = memoize(function (prop) {\n  return reactPropsRegex.test(prop) || prop.charCodeAt(0) === 111\n  /* o */\n  && prop.charCodeAt(1) === 110\n  /* n */\n  && prop.charCodeAt(2) < 91;\n}\n/* Z+1 */\n);\nexport default index;","import { createContext } from 'react';\n/**\n * @public\n */\n\nvar MotionConfigContext = createContext({\n  transformPagePoint: function transformPagePoint(p) {\n    return p;\n  },\n  isStatic: false\n});\nexport { MotionConfigContext };","import { useEffect } from 'react';\n\nfunction addDomEvent(target, eventName, handler, options) {\n  target.addEventListener(eventName, handler, options);\n  return function () {\n    return target.removeEventListener(eventName, handler, options);\n  };\n}\n/**\n * Attaches an event listener directly to the provided DOM element.\n *\n * Bypassing React's event system can be desirable, for instance when attaching non-passive\n * event handlers.\n *\n * ```jsx\n * const ref = useRef(null)\n *\n * useDomEvent(ref, 'wheel', onWheel, { passive: false })\n *\n * return <div ref={ref} />\n * ```\n *\n * @param ref - React.RefObject that's been provided to the element you want to bind the listener to.\n * @param eventName - Name of the event you want listen for.\n * @param handler - Function to fire when receiving the event.\n * @param options - Options to pass to `Event.addEventListener`.\n *\n * @public\n */\n\n\nfunction useDomEvent(ref, eventName, handler, options) {\n  useEffect(function () {\n    var element = ref.current;\n\n    if (handler && element) {\n      return addDomEvent(element, eventName, handler, options);\n    }\n  }, [ref, eventName, handler, options]);\n}\n\nexport { addDomEvent, useDomEvent };","var createDefinition = function createDefinition(propNames) {\n  return {\n    isEnabled: function isEnabled(props) {\n      return propNames.some(function (name) {\n        return !!props[name];\n      });\n    }\n  };\n};\n\nvar featureDefinitions = {\n  measureLayout: createDefinition([\"layout\", \"layoutId\", \"drag\", \"_layoutResetTransform\"]),\n  animation: createDefinition([\"animate\", \"exit\", \"variants\", \"whileHover\", \"whileTap\", \"whileFocus\", \"whileDrag\"]),\n  exit: createDefinition([\"exit\"]),\n  drag: createDefinition([\"drag\", \"dragControls\"]),\n  focus: createDefinition([\"whileFocus\"]),\n  hover: createDefinition([\"whileHover\", \"onHoverStart\", \"onHoverEnd\"]),\n  tap: createDefinition([\"whileTap\", \"onTap\", \"onTapStart\", \"onTapCancel\"]),\n  pan: createDefinition([\"onPan\", \"onPanStart\", \"onPanSessionStart\", \"onPanEnd\"]),\n  layoutAnimation: createDefinition([\"layout\", \"layoutId\"])\n};\n\nfunction loadFeatures(features) {\n  for (var key in features) {\n    var Component = features[key];\n    if (Component !== null) featureDefinitions[key].Component = Component;\n  }\n}\n\nexport { featureDefinitions, loadFeatures };","import { createContext } from 'react';\nvar LazyContext = createContext({\n  strict: false\n});\nexport { LazyContext };","import { __assign } from 'tslib';\nimport * as React from 'react';\nimport { useContext } from 'react';\nimport { featureDefinitions } from './definitions.js';\nimport { invariant } from 'hey-listen';\nimport { LazyContext } from '../../context/LazyContext.js';\nvar featureNames = Object.keys(featureDefinitions);\nvar numFeatures = featureNames.length;\n/**\n * Load features via renderless components based on the provided MotionProps.\n */\n\nfunction useFeatures(props, visualElement, preloadedFeatures) {\n  var features = [];\n  var lazyContext = useContext(LazyContext);\n  if (!visualElement) return null;\n  /**\n   * If we're in development mode, check to make sure we're not rendering a motion component\n   * as a child of LazyMotion, as this will break the file-size benefits of using it.\n   */\n\n  if (process.env.NODE_ENV !== \"production\" && preloadedFeatures && lazyContext.strict) {\n    invariant(false, \"You have rendered a `motion` component within a `LazyMotion` component. This will break tree shaking. Import and render a `m` component instead.\");\n  }\n\n  for (var i = 0; i < numFeatures; i++) {\n    var name_1 = featureNames[i];\n    var _a = featureDefinitions[name_1],\n        isEnabled = _a.isEnabled,\n        Component = _a.Component;\n    /**\n     * It might be possible in the future to use this moment to\n     * dynamically request functionality. In initial tests this\n     * was producing a lot of duplication amongst bundles.\n     */\n\n    if (isEnabled(props) && Component) {\n      features.push(React.createElement(Component, __assign({\n        key: name_1\n      }, props, {\n        visualElement: visualElement\n      })));\n    }\n  }\n\n  return features;\n}\n\nexport { useFeatures };","import { useContext, createContext } from 'react';\nvar MotionContext = createContext({});\n\nfunction useVisualElementContext() {\n  return useContext(MotionContext).visualElement;\n}\n\nexport { MotionContext, useVisualElementContext };","import { createContext } from 'react';\n/**\n * @public\n */\n\nvar PresenceContext = createContext(null);\nexport { PresenceContext };","import { useContext, useEffect } from 'react';\nimport { PresenceContext } from '../../context/PresenceContext.js';\nimport { useConstant } from '../../utils/use-constant.js';\n/**\n * When a component is the child of `AnimatePresence`, it can use `usePresence`\n * to access information about whether it's still present in the React tree.\n *\n * ```jsx\n * import { usePresence } from \"framer-motion\"\n *\n * export const Component = () => {\n *   const [isPresent, safeToRemove] = usePresence()\n *\n *   useEffect(() => {\n *     !isPresent && setTimeout(safeToRemove, 1000)\n *   }, [isPresent])\n *\n *   return <div />\n * }\n * ```\n *\n * If `isPresent` is `false`, it means that a component has been removed the tree, but\n * `AnimatePresence` won't really remove it until `safeToRemove` has been called.\n *\n * @public\n */\n\nfunction usePresence() {\n  var context = useContext(PresenceContext);\n  if (context === null) return [true, null];\n  var isPresent = context.isPresent,\n      onExitComplete = context.onExitComplete,\n      register = context.register; // It's safe to call the following hooks conditionally (after an early return) because the context will always\n  // either be null or non-null for the lifespan of the component.\n  // Replace with useOpaqueId when released in React\n\n  var id = useUniqueId();\n  useEffect(function () {\n    return register(id);\n  }, []);\n\n  var safeToRemove = function safeToRemove() {\n    return onExitComplete === null || onExitComplete === void 0 ? void 0 : onExitComplete(id);\n  };\n\n  return !isPresent && onExitComplete ? [false, safeToRemove] : [true];\n}\n/**\n * Similar to `usePresence`, except `useIsPresent` simply returns whether or not the component is present.\n * There is no `safeToRemove` function.\n *\n * ```jsx\n * import { useIsPresent } from \"framer-motion\"\n *\n * export const Component = () => {\n *   const isPresent = useIsPresent()\n *\n *   useEffect(() => {\n *     !isPresent && console.log(\"I've been removed!\")\n *   }, [isPresent])\n *\n *   return <div />\n * }\n * ```\n *\n * @public\n */\n\n\nfunction useIsPresent() {\n  return isPresent(useContext(PresenceContext));\n}\n\nfunction isPresent(context) {\n  return context === null ? true : context.isPresent;\n}\n\nvar counter = 0;\n\nvar incrementId = function incrementId() {\n  return counter++;\n};\n\nvar useUniqueId = function useUniqueId() {\n  return useConstant(incrementId);\n};\n\nexport { isPresent, useIsPresent, usePresence };","import { createContext } from 'react';\n/**\n * @internal\n */\n\nvar LayoutGroupContext = createContext(null);\nexport { LayoutGroupContext };","import { __assign } from 'tslib';\nimport { useContext, useRef, useEffect } from 'react';\nimport { PresenceContext } from '../../context/PresenceContext.js';\nimport { isPresent } from '../../components/AnimatePresence/use-presence.js';\nimport { LayoutGroupContext } from '../../context/LayoutGroupContext.js';\nimport { useVisualElementContext } from '../../context/MotionContext/index.js';\nimport { useIsomorphicLayoutEffect } from '../../utils/use-isomorphic-effect.js';\nimport { MotionConfigContext } from '../../context/MotionConfigContext.js';\nimport { LazyContext } from '../../context/LazyContext.js';\n\nfunction useLayoutId(_a) {\n  var layoutId = _a.layoutId;\n  var layoutGroupId = useContext(LayoutGroupContext);\n  return layoutGroupId && layoutId !== undefined ? layoutGroupId + \"-\" + layoutId : layoutId;\n}\n\nfunction useVisualElement(Component, visualState, props, createVisualElement) {\n  var config = useContext(MotionConfigContext);\n  var lazyContext = useContext(LazyContext);\n  var parent = useVisualElementContext();\n  var presenceContext = useContext(PresenceContext);\n  var layoutId = useLayoutId(props);\n  var visualElementRef = useRef(undefined);\n  /**\n   * If we haven't preloaded a renderer, check to see if we have one lazy-loaded\n   */\n\n  if (!createVisualElement) createVisualElement = lazyContext.renderer;\n\n  if (!visualElementRef.current && createVisualElement) {\n    visualElementRef.current = createVisualElement(Component, {\n      visualState: visualState,\n      parent: parent,\n      props: __assign(__assign({}, props), {\n        layoutId: layoutId\n      }),\n      presenceId: presenceContext === null || presenceContext === void 0 ? void 0 : presenceContext.id,\n      blockInitialAnimation: (presenceContext === null || presenceContext === void 0 ? void 0 : presenceContext.initial) === false\n    });\n  }\n\n  var visualElement = visualElementRef.current;\n  useIsomorphicLayoutEffect(function () {\n    if (!visualElement) return;\n    visualElement.setProps(__assign(__assign(__assign({}, config), props), {\n      layoutId: layoutId\n    }));\n    visualElement.isPresent = isPresent(presenceContext);\n    visualElement.isPresenceRoot = !parent || parent.presenceId !== (presenceContext === null || presenceContext === void 0 ? void 0 : presenceContext.id);\n    /**\n     * Fire a render to ensure the latest state is reflected on-screen.\n     */\n\n    visualElement.syncRender();\n  });\n  useEffect(function () {\n    var _a;\n\n    if (!visualElement) return;\n    /**\n     * In a future refactor we can replace the features-as-components and\n     * have this loop through them all firing \"effect\" listeners\n     */\n\n    (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.animateChanges();\n  });\n  useIsomorphicLayoutEffect(function () {\n    return function () {\n      return visualElement === null || visualElement === void 0 ? void 0 : visualElement.notifyUnmount();\n    };\n  }, []);\n  return visualElement;\n}\n\nexport { useVisualElement };","function isRefObject(ref) {\n  return typeof ref === \"object\" && Object.prototype.hasOwnProperty.call(ref, \"current\");\n}\n\nexport { isRefObject };","import { useMemo, useContext } from 'react';\nimport { MotionContext } from './index.js';\nimport { getCurrentTreeVariants } from './utils.js';\n\nfunction useCreateMotionContext(props, isStatic) {\n  var _a = getCurrentTreeVariants(props, useContext(MotionContext)),\n      initial = _a.initial,\n      animate = _a.animate;\n\n  return useMemo(function () {\n    return {\n      initial: initial,\n      animate: animate\n    };\n  },\n  /**\n   * Only break memoisation in static mode\n   */\n  isStatic ? [variantLabelsAsDependency(initial), variantLabelsAsDependency(animate)] : []);\n}\n\nfunction variantLabelsAsDependency(prop) {\n  return Array.isArray(prop) ? prop.join(\" \") : prop;\n}\n\nexport { useCreateMotionContext };","import { checkIfControllingVariants, isVariantLabel } from '../../render/utils/variants.js';\n\nfunction getCurrentTreeVariants(props, context) {\n  if (checkIfControllingVariants(props)) {\n    var initial = props.initial,\n        animate = props.animate;\n    return {\n      initial: initial === false || isVariantLabel(initial) ? initial : undefined,\n      animate: isVariantLabel(animate) ? animate : undefined\n    };\n  }\n\n  return props.inherit !== false ? context : {};\n}\n\nexport { getCurrentTreeVariants };","import * as React from 'react';\nimport { forwardRef, useContext } from 'react';\nimport { useFeatures } from './features/use-features.js';\nimport { MotionConfigContext } from '../context/MotionConfigContext.js';\nimport { MotionContext } from '../context/MotionContext/index.js';\nimport { useVisualElement } from './utils/use-visual-element.js';\nimport { useMotionRef } from './utils/use-motion-ref.js';\nimport { useCreateMotionContext } from '../context/MotionContext/create.js';\nimport { loadFeatures } from './features/definitions.js';\nimport { isBrowser } from '../utils/is-browser.js';\n/**\n * Create a `motion` component.\n *\n * This function accepts a Component argument, which can be either a string (ie \"div\"\n * for `motion.div`), or an actual React component.\n *\n * Alongside this is a config option which provides a way of rendering the provided\n * component \"offline\", or outside the React render cycle.\n *\n * @internal\n */\n\nfunction createMotionComponent(_a) {\n  var preloadedFeatures = _a.preloadedFeatures,\n      createVisualElement = _a.createVisualElement,\n      useRender = _a.useRender,\n      useVisualState = _a.useVisualState,\n      Component = _a.Component;\n  preloadedFeatures && loadFeatures(preloadedFeatures);\n\n  function MotionComponent(props, externalRef) {\n    /**\n     * If we're rendering in a static environment, we only visually update the component\n     * as a result of a React-rerender rather than interactions or animations. This\n     * means we don't need to load additional memory structures like VisualElement,\n     * or any gesture/animation features.\n     */\n    var isStatic = useContext(MotionConfigContext).isStatic;\n    var features = null;\n    /**\n     * Create the tree context. This is memoized and will only trigger renders\n     * when the current tree variant changes in static mode.\n     */\n\n    var context = useCreateMotionContext(props, isStatic);\n    /**\n     *\n     */\n\n    var visualState = useVisualState(props, isStatic);\n\n    if (!isStatic && isBrowser) {\n      /**\n       * Create a VisualElement for this component. A VisualElement provides a common\n       * interface to renderer-specific APIs (ie DOM/Three.js etc) as well as\n       * providing a way of rendering to these APIs outside of the React render loop\n       * for more performant animations and interactions\n       */\n      context.visualElement = useVisualElement(Component, visualState, props, createVisualElement);\n      /**\n       * Load Motion gesture and animation features. These are rendered as renderless\n       * components so each feature can optionally make use of React lifecycle methods.\n       *\n       * TODO: The intention is to move these away from a React-centric to a\n       * VisualElement-centric lifecycle scheme.\n       */\n\n      features = useFeatures(props, context.visualElement, preloadedFeatures);\n    }\n    /**\n     * The mount order and hierarchy is specific to ensure our element ref\n     * is hydrated by the time features fire their effects.\n     */\n\n\n    return React.createElement(React.Fragment, null, React.createElement(MotionContext.Provider, {\n      value: context\n    }, useRender(Component, props, useMotionRef(visualState, context.visualElement, externalRef), visualState, isStatic)), features);\n  }\n\n  return forwardRef(MotionComponent);\n}\n\nexport { createMotionComponent };","import { useCallback } from 'react';\nimport { isRefObject } from '../../utils/is-ref-object.js';\n/**\n * Creates a ref function that, when called, hydrates the provided\n * external ref and VisualElement.\n */\n\nfunction useMotionRef(visualState, visualElement, externalRef) {\n  return useCallback(function (instance) {\n    var _a;\n\n    instance && ((_a = visualState.mount) === null || _a === void 0 ? void 0 : _a.call(visualState, instance));\n\n    if (visualElement) {\n      instance ? visualElement.mount(instance) : visualElement.unmount();\n    }\n\n    if (externalRef) {\n      if (typeof externalRef === \"function\") {\n        externalRef(instance);\n      } else if (isRefObject(externalRef)) {\n        externalRef.current = instance;\n      }\n    }\n  },\n  /**\n   * Only pass a new ref callback to React if we've received a visual element\n   * factory. Otherwise we'll be mounting/remounting every time externalRef\n   * or other dependencies change.\n   */\n  [visualElement]);\n}\n\nexport { useMotionRef };","import { createMotionComponent } from '../../motion/index.js';\n/**\n * Convert any React component into a `motion` component. The provided component\n * **must** use `React.forwardRef` to the underlying DOM component you want to animate.\n *\n * ```jsx\n * const Component = React.forwardRef((props, ref) => {\n *   return <div ref={ref} />\n * })\n *\n * const MotionComponent = motion(Component)\n * ```\n *\n * @public\n */\n\nfunction createMotionProxy(createConfig) {\n  function custom(Component, customMotionComponentConfig) {\n    if (customMotionComponentConfig === void 0) {\n      customMotionComponentConfig = {};\n    }\n\n    return createMotionComponent(createConfig(Component, customMotionComponentConfig));\n  }\n  /**\n   * A cache of generated `motion` components, e.g `motion.div`, `motion.input` etc.\n   * Rather than generating them anew every render.\n   */\n\n\n  var componentCache = new Map();\n  return new Proxy(custom, {\n    /**\n     * Called when `motion` is referenced with a prop: `motion.div`, `motion.input` etc.\n     * The prop name is passed through as `key` and we can use that to generate a `motion`\n     * DOM component with that name.\n     */\n    get: function get(_target, key) {\n      /**\n       * If this element doesn't exist in the component cache, create it and cache.\n       */\n      if (!componentCache.has(key)) {\n        componentCache.set(key, custom(key));\n      }\n\n      return componentCache.get(key);\n    }\n  });\n}\n\nexport { createMotionProxy };","/**\n * We keep these listed seperately as we use the lowercase tag names as part\n * of the runtime bundle to detect SVG components\n */\nvar lowercaseSVGElements = [\"animate\", \"circle\", \"defs\", \"desc\", \"ellipse\", \"g\", \"image\", \"line\", \"filter\", \"marker\", \"mask\", \"metadata\", \"path\", \"pattern\", \"polygon\", \"polyline\", \"rect\", \"stop\", \"svg\", \"switch\", \"symbol\", \"text\", \"tspan\", \"use\", \"view\"];\nexport { lowercaseSVGElements };","import { lowercaseSVGElements } from '../../svg/lowercase-elements.js';\n\nfunction isSVGComponent(Component) {\n  if (\n  /**\n   * If it's not a string, it's a custom React component. Currently we only support\n   * HTML custom React components.\n   */\n  typeof Component !== \"string\" ||\n  /**\n   * If it contains a dash, the element is a custom HTML webcomponent.\n   */\n  Component.includes(\"-\")) {\n    return false;\n  } else if (\n  /**\n   * If it's in our list of lowercase SVG tags, it's an SVG component\n   */\n  lowercaseSVGElements.indexOf(Component) > -1 ||\n  /**\n   * If it contains a capital letter, it's an SVG component\n   */\n  /[A-Z]/.test(Component)) {\n    return true;\n  }\n\n  return false;\n}\n\nexport { isSVGComponent };","var valueScaleCorrection = {};\n/**\n * @internal\n */\n\nfunction addScaleCorrection(correctors) {\n  for (var key in correctors) {\n    valueScaleCorrection[key] = correctors[key];\n  }\n}\n\nexport { addScaleCorrection, valueScaleCorrection };","/**\n * A list of all transformable axes. We'll use this list to generated a version\n * of each axes for each transform.\n */\nvar transformAxes = [\"\", \"X\", \"Y\", \"Z\"];\n/**\n * An ordered array of each transformable value. By default, transform values\n * will be sorted to this order.\n */\n\nvar order = [\"translate\", \"scale\", \"rotate\", \"skew\"];\n/**\n * Generate a list of every possible transform key.\n */\n\nvar transformProps = [\"transformPerspective\", \"x\", \"y\", \"z\"];\norder.forEach(function (operationKey) {\n  return transformAxes.forEach(function (axesKey) {\n    return transformProps.push(operationKey + axesKey);\n  });\n});\n/**\n * A function to use with Array.sort to sort transform keys by their default order.\n */\n\nfunction sortTransformProps(a, b) {\n  return transformProps.indexOf(a) - transformProps.indexOf(b);\n}\n/**\n * A quick lookup for transform props.\n */\n\n\nvar transformPropSet = new Set(transformProps);\n\nfunction isTransformProp(key) {\n  return transformPropSet.has(key);\n}\n/**\n * A quick lookup for transform origin props\n */\n\n\nvar transformOriginProps = new Set([\"originX\", \"originY\", \"originZ\"]);\n\nfunction isTransformOriginProp(key) {\n  return transformOriginProps.has(key);\n}\n\nexport { isTransformOriginProp, isTransformProp, sortTransformProps, transformAxes, transformProps };","import { valueScaleCorrection } from '../../render/dom/projection/scale-correction.js';\nimport { isTransformProp, isTransformOriginProp } from '../../render/html/utils/transform.js';\n\nfunction isForcedMotionValue(key, _a) {\n  var layout = _a.layout,\n      layoutId = _a.layoutId;\n  return isTransformProp(key) || isTransformOriginProp(key) || (layout || layoutId !== undefined) && (!!valueScaleCorrection[key] || key === \"opacity\");\n}\n\nexport { isForcedMotionValue };","var isMotionValue = function isMotionValue(value) {\n  return value !== null && typeof value === \"object\" && value.getVelocity;\n};\n\nexport { isMotionValue };","import { sortTransformProps } from './transform.js';\nvar translateAlias = {\n  x: \"translateX\",\n  y: \"translateY\",\n  z: \"translateZ\",\n  transformPerspective: \"perspective\"\n};\n/**\n * Build a CSS transform style from individual x/y/scale etc properties.\n *\n * This outputs with a default order of transforms/scales/rotations, this can be customised by\n * providing a transformTemplate function.\n */\n\nfunction buildTransform(_a, _b, transformIsDefault, transformTemplate) {\n  var transform = _a.transform,\n      transformKeys = _a.transformKeys;\n  var _c = _b.enableHardwareAcceleration,\n      enableHardwareAcceleration = _c === void 0 ? true : _c,\n      _d = _b.allowTransformNone,\n      allowTransformNone = _d === void 0 ? true : _d; // The transform string we're going to build into.\n\n  var transformString = \"\"; // Transform keys into their default order - this will determine the output order.\n\n  transformKeys.sort(sortTransformProps); // Track whether the defined transform has a defined z so we don't add a\n  // second to enable hardware acceleration\n\n  var transformHasZ = false; // Loop over each transform and build them into transformString\n\n  var numTransformKeys = transformKeys.length;\n\n  for (var i = 0; i < numTransformKeys; i++) {\n    var key = transformKeys[i];\n    transformString += (translateAlias[key] || key) + \"(\" + transform[key] + \") \";\n    if (key === \"z\") transformHasZ = true;\n  }\n\n  if (!transformHasZ && enableHardwareAcceleration) {\n    transformString += \"translateZ(0)\";\n  } else {\n    transformString = transformString.trim();\n  } // If we have a custom `transform` template, pass our transform values and\n  // generated transformString to that before returning\n\n\n  if (transformTemplate) {\n    transformString = transformTemplate(transform, transformIsDefault ? \"\" : transformString);\n  } else if (allowTransformNone && transformIsDefault) {\n    transformString = \"none\";\n  }\n\n  return transformString;\n}\n/**\n * Build a transformOrigin style. Uses the same defaults as the browser for\n * undefined origins.\n */\n\n\nfunction buildTransformOrigin(_a) {\n  var _b = _a.originX,\n      originX = _b === void 0 ? \"50%\" : _b,\n      _c = _a.originY,\n      originY = _c === void 0 ? \"50%\" : _c,\n      _d = _a.originZ,\n      originZ = _d === void 0 ? 0 : _d;\n  return originX + \" \" + originY + \" \" + originZ;\n}\n\nexport { buildTransform, buildTransformOrigin };","/**\n * Returns true if the provided key is a CSS variable\n */\nfunction isCSSVariable(key) {\n  return key.startsWith(\"--\");\n}\n\nexport { isCSSVariable };","/**\n * Provided a value and a ValueType, returns the value as that value type.\n */\nvar getValueAsType = function getValueAsType(value, type) {\n  return type && typeof value === \"number\" ? type.transform(value) : value;\n};\n\nexport { getValueAsType };","import { valueScaleCorrection } from '../../dom/projection/scale-correction.js';\nimport { buildTransform, buildTransformOrigin } from './build-transform.js';\nimport { isCSSVariable } from '../../dom/utils/is-css-variable.js';\nimport { isTransformProp, isTransformOriginProp } from './transform.js';\nimport { getValueAsType } from '../../dom/value-types/get-as-type.js';\nimport { numberValueTypes } from '../../dom/value-types/number.js';\n\nfunction buildHTMLStyles(state, latestValues, projection, layoutState, options, transformTemplate, buildProjectionTransform, buildProjectionTransformOrigin) {\n  var _a;\n\n  var style = state.style,\n      vars = state.vars,\n      transform = state.transform,\n      transformKeys = state.transformKeys,\n      transformOrigin = state.transformOrigin; // Empty the transformKeys array. As we're throwing out refs to its items\n  // this might not be as cheap as suspected. Maybe using the array as a buffer\n  // with a manual incrementation would be better.\n\n  transformKeys.length = 0; // Track whether we encounter any transform or transformOrigin values.\n\n  var hasTransform = false;\n  var hasTransformOrigin = false; // Does the calculated transform essentially equal \"none\"?\n\n  var transformIsNone = true;\n  /**\n   * Loop over all our latest animated values and decide whether to handle them\n   * as a style or CSS variable.\n   *\n   * Transforms and transform origins are kept seperately for further processing.\n   */\n\n  for (var key in latestValues) {\n    var value = latestValues[key];\n    /**\n     * If this is a CSS variable we don't do any further processing.\n     */\n\n    if (isCSSVariable(key)) {\n      vars[key] = value;\n      continue;\n    } // Convert the value to its default value type, ie 0 -> \"0px\"\n\n\n    var valueType = numberValueTypes[key];\n    var valueAsType = getValueAsType(value, valueType);\n\n    if (isTransformProp(key)) {\n      // If this is a transform, flag to enable further transform processing\n      hasTransform = true;\n      transform[key] = valueAsType;\n      transformKeys.push(key); // If we already know we have a non-default transform, early return\n\n      if (!transformIsNone) continue; // Otherwise check to see if this is a default transform\n\n      if (value !== ((_a = valueType.default) !== null && _a !== void 0 ? _a : 0)) transformIsNone = false;\n    } else if (isTransformOriginProp(key)) {\n      transformOrigin[key] = valueAsType; // If this is a transform origin, flag and enable further transform-origin processing\n\n      hasTransformOrigin = true;\n    } else {\n      /**\n       * If layout projection is on, and we need to perform scale correction for this\n       * value type, perform it.\n       */\n      if ((projection === null || projection === void 0 ? void 0 : projection.isHydrated) && (layoutState === null || layoutState === void 0 ? void 0 : layoutState.isHydrated) && valueScaleCorrection[key]) {\n        var correctedValue = valueScaleCorrection[key].process(value, layoutState, projection);\n        /**\n         * Scale-correctable values can define a number of other values to break\n         * down into. For instance borderRadius needs applying to borderBottomLeftRadius etc\n         */\n\n        var applyTo = valueScaleCorrection[key].applyTo;\n\n        if (applyTo) {\n          var num = applyTo.length;\n\n          for (var i = 0; i < num; i++) {\n            style[applyTo[i]] = correctedValue;\n          }\n        } else {\n          style[key] = correctedValue;\n        }\n      } else {\n        style[key] = valueAsType;\n      }\n    }\n  }\n\n  if (layoutState && projection && buildProjectionTransform && buildProjectionTransformOrigin) {\n    style.transform = buildProjectionTransform(layoutState.deltaFinal, layoutState.treeScale, hasTransform ? transform : undefined);\n\n    if (transformTemplate) {\n      style.transform = transformTemplate(transform, style.transform);\n    }\n\n    style.transformOrigin = buildProjectionTransformOrigin(layoutState);\n  } else {\n    if (hasTransform) {\n      style.transform = buildTransform(state, options, transformIsNone, transformTemplate);\n    }\n\n    if (hasTransformOrigin) {\n      style.transformOrigin = buildTransformOrigin(transformOrigin);\n    }\n  }\n}\n\nexport { buildHTMLStyles };","var createHtmlRenderState = function createHtmlRenderState() {\n  return {\n    style: {},\n    transform: {},\n    transformKeys: [],\n    transformOrigin: {},\n    vars: {}\n  };\n};\n\nexport { createHtmlRenderState };","import { __assign } from 'tslib';\nimport { useMemo } from 'react';\nimport { isForcedMotionValue } from '../../motion/utils/is-forced-motion-value.js';\nimport { isMotionValue } from '../../value/utils/is-motion-value.js';\nimport { buildHTMLStyles } from './utils/build-styles.js';\nimport { createHtmlRenderState } from './utils/create-render-state.js';\n\nfunction copyRawValuesOnly(target, source, props) {\n  for (var key in source) {\n    if (!isMotionValue(source[key]) && !isForcedMotionValue(key, props)) {\n      target[key] = source[key];\n    }\n  }\n}\n\nfunction useInitialMotionValues(_a, visualState, isStatic) {\n  var transformTemplate = _a.transformTemplate;\n  return useMemo(function () {\n    var state = createHtmlRenderState();\n    buildHTMLStyles(state, visualState, undefined, undefined, {\n      enableHardwareAcceleration: !isStatic\n    }, transformTemplate);\n    var vars = state.vars,\n        style = state.style;\n    return __assign(__assign({}, vars), style);\n  }, [visualState]);\n}\n\nfunction useStyle(props, visualState, isStatic) {\n  var styleProp = props.style || {};\n  var style = {};\n  /**\n   * Copy non-Motion Values straight into style\n   */\n\n  copyRawValuesOnly(style, styleProp, props);\n  Object.assign(style, useInitialMotionValues(props, visualState, isStatic));\n\n  if (props.transformValues) {\n    style = props.transformValues(style);\n  }\n\n  return style;\n}\n\nfunction useHTMLProps(props, visualState, isStatic) {\n  // The `any` isn't ideal but it is the type of createElement props argument\n  var htmlProps = {};\n  var style = useStyle(props, visualState, isStatic);\n\n  if (Boolean(props.drag)) {\n    // Disable the ghost element when a user drags\n    htmlProps.draggable = false; // Disable text selection\n\n    style.userSelect = style.WebkitUserSelect = style.WebkitTouchCallout = \"none\"; // Disable scrolling on the draggable direction\n\n    style.touchAction = props.drag === true ? \"none\" : \"pan-\" + (props.drag === \"x\" ? \"y\" : \"x\");\n  }\n\n  htmlProps.style = style;\n  return htmlProps;\n}\n\nexport { copyRawValuesOnly, useHTMLProps, useStyle };","/**\n * A list of all valid MotionProps.\n *\n * @internalremarks\n * This doesn't throw if a `MotionProp` name is missing - it should.\n */\nvar validMotionProps = new Set([\"initial\", \"animate\", \"exit\", \"style\", \"variants\", \"transition\", \"transformTemplate\", \"transformValues\", \"custom\", \"inherit\", \"layout\", \"layoutId\", \"_layoutResetTransform\", \"onLayoutAnimationComplete\", \"onViewportBoxUpdate\", \"onLayoutMeasure\", \"onBeforeLayoutMeasure\", \"onAnimationStart\", \"onAnimationComplete\", \"onUpdate\", \"onDragStart\", \"onDrag\", \"onDragEnd\", \"onMeasureDragConstraints\", \"onDirectionLock\", \"onDragTransitionEnd\", \"drag\", \"dragControls\", \"dragListener\", \"dragConstraints\", \"dragDirectionLock\", \"_dragX\", \"_dragY\", \"dragElastic\", \"dragMomentum\", \"dragPropagation\", \"dragTransition\", \"whileDrag\", \"onPan\", \"onPanStart\", \"onPanEnd\", \"onPanSessionStart\", \"onTap\", \"onTapStart\", \"onTapCancel\", \"onHoverStart\", \"onHoverEnd\", \"whileFocus\", \"whileTap\", \"whileHover\"]);\n/**\n * Check whether a prop name is a valid `MotionProp` key.\n *\n * @param key - Name of the property to check\n * @returns `true` is key is a valid `MotionProp`.\n *\n * @public\n */\n\nfunction isValidMotionProp(key) {\n  return validMotionProps.has(key);\n}\n\nexport { isValidMotionProp };","import { isValidMotionProp } from '../../../motion/utils/valid-prop.js';\n\nvar shouldForward = function shouldForward(key) {\n  return !isValidMotionProp(key);\n};\n/**\n * Emotion and Styled Components both allow users to pass through arbitrary props to their components\n * to dynamically generate CSS. They both use the `@emotion/is-prop-valid` package to determine which\n * of these should be passed to the underlying DOM node.\n *\n * However, when styling a Motion component `styled(motion.div)`, both packages pass through *all* props\n * as it's seen as an arbitrary component rather than a DOM node. Motion only allows arbitrary props\n * passed through the `custom` prop so it doesn't *need* the payload or computational overhead of\n * `@emotion/is-prop-valid`, however to fix this problem we need to use it.\n *\n * By making it an optionalDependency we can offer this functionality only in the situations where it's\n * actually required.\n */\n\n\ntry {\n  var emotionIsPropValid_1 = require(\"@emotion/is-prop-valid\").default;\n\n  shouldForward = function shouldForward(key) {\n    // Handle events explicitly as Emotion validates them all as true\n    if (key.startsWith(\"on\")) {\n      return !isValidMotionProp(key);\n    } else {\n      return emotionIsPropValid_1(key);\n    }\n  };\n} catch (_a) {// We don't need to actually do anything here - the fallback is the existing `isPropValid`.\n}\n\nfunction filterProps(props, isDom, forwardMotionProps) {\n  var filteredProps = {};\n\n  for (var key in props) {\n    if (shouldForward(key) || forwardMotionProps === true && isValidMotionProp(key) || !isDom && !isValidMotionProp(key)) {\n      filteredProps[key] = props[key];\n    }\n  }\n\n  return filteredProps;\n}\n\nexport { filterProps };","import { px } from 'style-value-types';\n\nfunction calcOrigin(origin, offset, size) {\n  return typeof origin === \"string\" ? origin : px.transform(offset + size * origin);\n}\n/**\n * The SVG transform origin defaults are different to CSS and is less intuitive,\n * so we use the measured dimensions of the SVG to reconcile these.\n */\n\n\nfunction calcSVGTransformOrigin(dimensions, originX, originY) {\n  var pxOriginX = calcOrigin(originX, dimensions.x, dimensions.width);\n  var pxOriginY = calcOrigin(originY, dimensions.y, dimensions.height);\n  return pxOriginX + \" \" + pxOriginY;\n}\n\nexport { calcSVGTransformOrigin };","import { px } from 'style-value-types'; // Convert a progress 0-1 to a pixels value based on the provided length\n\nvar progressToPixels = function progressToPixels(progress, length) {\n  return px.transform(progress * length);\n};\n\nvar dashKeys = {\n  offset: \"stroke-dashoffset\",\n  array: \"stroke-dasharray\"\n};\nvar camelKeys = {\n  offset: \"strokeDashoffset\",\n  array: \"strokeDasharray\"\n};\n/**\n * Build SVG path properties. Uses the path's measured length to convert\n * our custom pathLength, pathSpacing and pathOffset into stroke-dashoffset\n * and stroke-dasharray attributes.\n *\n * This function is mutative to reduce per-frame GC.\n */\n\nfunction buildSVGPath(attrs, totalLength, length, spacing, offset, useDashCase) {\n  if (spacing === void 0) {\n    spacing = 1;\n  }\n\n  if (offset === void 0) {\n    offset = 0;\n  }\n\n  if (useDashCase === void 0) {\n    useDashCase = true;\n  } // We use dash case when setting attributes directly to the DOM node and camel case\n  // when defining props on a React component.\n\n\n  var keys = useDashCase ? dashKeys : camelKeys; // Build the dash offset\n\n  attrs[keys.offset] = progressToPixels(-offset, totalLength); // Build the dash array\n\n  var pathLength = progressToPixels(length, totalLength);\n  var pathSpacing = progressToPixels(spacing, totalLength);\n  attrs[keys.array] = pathLength + \" \" + pathSpacing;\n}\n\nexport { buildSVGPath };","import { __rest } from 'tslib';\nimport { buildHTMLStyles } from '../../html/utils/build-styles.js';\nimport { calcSVGTransformOrigin } from './transform-origin.js';\nimport { buildSVGPath } from './path.js';\n/**\n * Build SVG visual attrbutes, like cx and style.transform\n */\n\nfunction buildSVGAttrs(state, _a, projection, layoutState, options, transformTemplate, buildProjectionTransform, buildProjectionTransformOrigin) {\n  var attrX = _a.attrX,\n      attrY = _a.attrY,\n      originX = _a.originX,\n      originY = _a.originY,\n      pathLength = _a.pathLength,\n      _b = _a.pathSpacing,\n      pathSpacing = _b === void 0 ? 1 : _b,\n      _c = _a.pathOffset,\n      pathOffset = _c === void 0 ? 0 : _c,\n      // This is object creation, which we try to avoid per-frame.\n  latest = __rest(_a, [\"attrX\", \"attrY\", \"originX\", \"originY\", \"pathLength\", \"pathSpacing\", \"pathOffset\"]);\n\n  buildHTMLStyles(state, latest, projection, layoutState, options, transformTemplate, buildProjectionTransform, buildProjectionTransformOrigin);\n  state.attrs = state.style;\n  state.style = {};\n  var attrs = state.attrs,\n      style = state.style,\n      dimensions = state.dimensions,\n      totalPathLength = state.totalPathLength;\n  /**\n   * However, we apply transforms as CSS transforms. So if we detect a transform we take it from attrs\n   * and copy it into style.\n   */\n\n  if (attrs.transform) {\n    if (dimensions) style.transform = attrs.transform;\n    delete attrs.transform;\n  } // Parse transformOrigin\n\n\n  if (dimensions && (originX !== undefined || originY !== undefined || style.transform)) {\n    style.transformOrigin = calcSVGTransformOrigin(dimensions, originX !== undefined ? originX : 0.5, originY !== undefined ? originY : 0.5);\n  } // Treat x/y not as shortcuts but as actual attributes\n\n\n  if (attrX !== undefined) attrs.x = attrX;\n  if (attrY !== undefined) attrs.y = attrY; // Build SVG path if one has been measured\n\n  if (totalPathLength !== undefined && pathLength !== undefined) {\n    buildSVGPath(attrs, totalPathLength, pathLength, pathSpacing, pathOffset, false);\n  }\n}\n\nexport { buildSVGAttrs };","import { __assign } from 'tslib';\nimport { createHtmlRenderState } from '../../html/utils/create-render-state.js';\n\nvar createSvgRenderState = function createSvgRenderState() {\n  return __assign(__assign({}, createHtmlRenderState()), {\n    attrs: {}\n  });\n};\n\nexport { createSvgRenderState };","import { __assign } from 'tslib';\nimport { useMemo } from 'react';\nimport { copyRawValuesOnly } from '../html/use-props.js';\nimport { buildSVGAttrs } from './utils/build-attrs.js';\nimport { createSvgRenderState } from './utils/create-render-state.js';\n\nfunction useSVGProps(props, visualState) {\n  var visualProps = useMemo(function () {\n    var state = createSvgRenderState();\n    buildSVGAttrs(state, visualState, undefined, undefined, {\n      enableHardwareAcceleration: false\n    }, props.transformTemplate);\n    return __assign(__assign({}, state.attrs), {\n      style: __assign({}, state.style)\n    });\n  }, [visualState]);\n\n  if (props.style) {\n    var rawStyles = {};\n    copyRawValuesOnly(rawStyles, props.style, props);\n    visualProps.style = __assign(__assign({}, rawStyles), visualProps.style);\n  }\n\n  return visualProps;\n}\n\nexport { useSVGProps };","import { __assign } from 'tslib';\nimport { createElement } from 'react';\nimport { useHTMLProps } from '../html/use-props.js';\nimport { filterProps } from './utils/filter-props.js';\nimport { isSVGComponent } from './utils/is-svg-component.js';\nimport { useSVGProps } from '../svg/use-props.js';\n\nfunction createUseRender(forwardMotionProps) {\n  if (forwardMotionProps === void 0) {\n    forwardMotionProps = false;\n  }\n\n  var useRender = function useRender(Component, props, ref, _a, isStatic) {\n    var latestValues = _a.latestValues;\n    var useVisualProps = isSVGComponent(Component) ? useSVGProps : useHTMLProps;\n    var visualProps = useVisualProps(props, latestValues, isStatic);\n    var filteredProps = filterProps(props, typeof Component === \"string\", forwardMotionProps);\n\n    var elementProps = __assign(__assign(__assign({}, filteredProps), visualProps), {\n      ref: ref\n    });\n\n    return createElement(Component, elementProps);\n  };\n\n  return useRender;\n}\n\nexport { createUseRender };","var CAMEL_CASE_PATTERN = /([a-z])([A-Z])/g;\nvar REPLACE_TEMPLATE = \"$1-$2\";\n/**\n * Convert camelCase to dash-case properties.\n */\n\nvar camelToDash = function camelToDash(str) {\n  return str.replace(CAMEL_CASE_PATTERN, REPLACE_TEMPLATE).toLowerCase();\n};\n\nexport { camelToDash };","function renderHTML(element, _a) {\n  var style = _a.style,\n      vars = _a.vars; // Directly assign style into the Element's style prop. In tests Object.assign is the\n  // fastest way to assign styles.\n\n  Object.assign(element.style, style); // Loop over any CSS variables and assign those.\n\n  for (var key in vars) {\n    element.style.setProperty(key, vars[key]);\n  }\n}\n\nexport { renderHTML };","/**\n * A set of attribute names that are always read/written as camel case.\n */\nvar camelCaseAttributes = new Set([\"baseFrequency\", \"diffuseConstant\", \"kernelMatrix\", \"kernelUnitLength\", \"keySplines\", \"keyTimes\", \"limitingConeAngle\", \"markerHeight\", \"markerWidth\", \"numOctaves\", \"targetX\", \"targetY\", \"surfaceScale\", \"specularConstant\", \"specularExponent\", \"stdDeviation\", \"tableValues\", \"viewBox\", \"gradientTransform\"]);\nexport { camelCaseAttributes };","import { camelToDash } from '../../dom/utils/camel-to-dash.js';\nimport { renderHTML } from '../../html/utils/render.js';\nimport { camelCaseAttributes } from './camel-case-attrs.js';\n\nfunction renderSVG(element, renderState) {\n  renderHTML(element, renderState);\n\n  for (var key in renderState.attrs) {\n    element.setAttribute(!camelCaseAttributes.has(key) ? camelToDash(key) : key, renderState.attrs[key]);\n  }\n}\n\nexport { renderSVG };","import { isForcedMotionValue } from '../../../motion/utils/is-forced-motion-value.js';\nimport { isMotionValue } from '../../../value/utils/is-motion-value.js';\n\nfunction scrapeMotionValuesFromProps(props) {\n  var style = props.style;\n  var newValues = {};\n\n  for (var key in style) {\n    if (isMotionValue(style[key]) || isForcedMotionValue(key, props)) {\n      newValues[key] = style[key];\n    }\n  }\n\n  return newValues;\n}\n\nexport { scrapeMotionValuesFromProps };","import { isMotionValue } from '../../../value/utils/is-motion-value.js';\nimport { scrapeMotionValuesFromProps as scrapeMotionValuesFromProps$1 } from '../../html/utils/scrape-motion-values.js';\n\nfunction scrapeMotionValuesFromProps(props) {\n  var newValues = scrapeMotionValuesFromProps$1(props);\n\n  for (var key in props) {\n    if (isMotionValue(props[key])) {\n      var targetKey = key === \"x\" || key === \"y\" ? \"attr\" + key.toUpperCase() : key;\n      newValues[targetKey] = props[key];\n    }\n  }\n\n  return newValues;\n}\n\nexport { scrapeMotionValuesFromProps };","function isAnimationControls(v) {\n  return typeof v === \"object\" && typeof v.start === \"function\";\n}\n\nexport { isAnimationControls };","import { __rest } from 'tslib';\nimport { useContext } from 'react';\nimport { isAnimationControls } from '../../animation/utils/is-animation-controls.js';\nimport { PresenceContext } from '../../context/PresenceContext.js';\nimport { checkIfControllingVariants, checkIfVariantNode, resolveVariantFromProps } from '../../render/utils/variants.js';\nimport { useConstant } from '../../utils/use-constant.js';\nimport { resolveMotionValue } from '../../value/utils/resolve-motion-value.js';\nimport { MotionContext } from '../../context/MotionContext/index.js';\n\nfunction makeState(_a, props, context, presenceContext) {\n  var scrapeMotionValuesFromProps = _a.scrapeMotionValuesFromProps,\n      createRenderState = _a.createRenderState,\n      onMount = _a.onMount;\n  var state = {\n    latestValues: makeLatestValues(props, context, presenceContext, scrapeMotionValuesFromProps),\n    renderState: createRenderState()\n  };\n\n  if (onMount) {\n    state.mount = function (instance) {\n      return onMount(props, instance, state);\n    };\n  }\n\n  return state;\n}\n\nvar makeUseVisualState = function makeUseVisualState(config) {\n  return function (props, isStatic) {\n    var context = useContext(MotionContext);\n    var presenceContext = useContext(PresenceContext);\n    return isStatic ? makeState(config, props, context, presenceContext) : useConstant(function () {\n      return makeState(config, props, context, presenceContext);\n    });\n  };\n};\n\nfunction makeLatestValues(props, context, presenceContext, scrapeMotionValues) {\n  var values = {};\n  var blockInitialAnimation = (presenceContext === null || presenceContext === void 0 ? void 0 : presenceContext.initial) === false;\n  var motionValues = scrapeMotionValues(props);\n\n  for (var key in motionValues) {\n    values[key] = resolveMotionValue(motionValues[key]);\n  }\n\n  var initial = props.initial,\n      animate = props.animate;\n  var isControllingVariants = checkIfControllingVariants(props);\n  var isVariantNode = checkIfVariantNode(props);\n\n  if (context && isVariantNode && !isControllingVariants && props.inherit !== false) {\n    initial !== null && initial !== void 0 ? initial : initial = context.initial;\n    animate !== null && animate !== void 0 ? animate : animate = context.animate;\n  }\n\n  var variantToSet = blockInitialAnimation || initial === false ? animate : initial;\n\n  if (variantToSet && typeof variantToSet !== \"boolean\" && !isAnimationControls(variantToSet)) {\n    var list = Array.isArray(variantToSet) ? variantToSet : [variantToSet];\n    list.forEach(function (definition) {\n      var resolved = resolveVariantFromProps(props, definition);\n      if (!resolved) return;\n      var transitionEnd = resolved.transitionEnd;\n      resolved.transition;\n\n      var target = __rest(resolved, [\"transitionEnd\", \"transition\"]);\n\n      for (var key in target) {\n        values[key] = target[key];\n      }\n\n      for (var key in transitionEnd) {\n        values[key] = transitionEnd[key];\n      }\n    });\n  }\n\n  return values;\n}\n\nexport { makeUseVisualState };","import { isCustomValue } from '../../utils/resolve-value.js';\nimport { isMotionValue } from './is-motion-value.js';\n/**\n * If the provided value is a MotionValue, this returns the actual value, otherwise just the value itself\n *\n * TODO: Remove and move to library\n *\n * @internal\n */\n\nfunction resolveMotionValue(value) {\n  var unwrappedValue = isMotionValue(value) ? value.get() : value;\n  return isCustomValue(unwrappedValue) ? unwrappedValue.toValue() : unwrappedValue;\n}\n\nexport { resolveMotionValue };","import { renderSVG } from './utils/render.js';\nimport { scrapeMotionValuesFromProps } from './utils/scrape-motion-values.js';\nimport { makeUseVisualState } from '../../motion/utils/use-visual-state.js';\nimport { createSvgRenderState } from './utils/create-render-state.js';\nimport { buildSVGAttrs } from './utils/build-attrs.js';\nvar svgMotionConfig = {\n  useVisualState: makeUseVisualState({\n    scrapeMotionValuesFromProps: scrapeMotionValuesFromProps,\n    createRenderState: createSvgRenderState,\n    onMount: function onMount(props, instance, _a) {\n      var renderState = _a.renderState,\n          latestValues = _a.latestValues;\n\n      try {\n        renderState.dimensions = typeof instance.getBBox === \"function\" ? instance.getBBox() : instance.getBoundingClientRect();\n      } catch (e) {\n        // Most likely trying to measure an unrendered element under Firefox\n        renderState.dimensions = {\n          x: 0,\n          y: 0,\n          width: 0,\n          height: 0\n        };\n      }\n\n      if (isPath(instance)) {\n        renderState.totalPathLength = instance.getTotalLength();\n      }\n\n      buildSVGAttrs(renderState, latestValues, undefined, undefined, {\n        enableHardwareAcceleration: false\n      }, props.transformTemplate); // TODO: Replace with direct assignment\n\n      renderSVG(instance, renderState);\n    }\n  })\n};\n\nfunction isPath(element) {\n  return element.tagName === \"path\";\n}\n\nexport { svgMotionConfig };","import { makeUseVisualState } from '../../motion/utils/use-visual-state.js';\nimport { scrapeMotionValuesFromProps } from './utils/scrape-motion-values.js';\nimport { createHtmlRenderState } from './utils/create-render-state.js';\nvar htmlMotionConfig = {\n  useVisualState: makeUseVisualState({\n    scrapeMotionValuesFromProps: scrapeMotionValuesFromProps,\n    createRenderState: createHtmlRenderState\n  })\n};\nexport { htmlMotionConfig };","var AnimationType;\n\n(function (AnimationType) {\n  AnimationType[\"Animate\"] = \"animate\";\n  AnimationType[\"Hover\"] = \"whileHover\";\n  AnimationType[\"Tap\"] = \"whileTap\";\n  AnimationType[\"Drag\"] = \"whileDrag\";\n  AnimationType[\"Focus\"] = \"whileFocus\";\n  AnimationType[\"Exit\"] = \"exit\";\n})(AnimationType || (AnimationType = {}));\n\nexport { AnimationType };","function isMouseEvent(event) {\n  // PointerEvent inherits from MouseEvent so we can't use a straight instanceof check.\n  if (typeof PointerEvent !== \"undefined\" && event instanceof PointerEvent) {\n    return !!(event.pointerType === \"mouse\");\n  }\n\n  return event instanceof MouseEvent;\n}\n\nfunction isTouchEvent(event) {\n  var hasTouches = !!event.touches;\n  return hasTouches;\n}\n\nexport { isMouseEvent, isTouchEvent };","import { isTouchEvent } from '../gestures/utils/event-type.js';\n/**\n * Filters out events not attached to the primary pointer (currently left mouse button)\n * @param eventHandler\n */\n\nfunction filterPrimaryPointer(eventHandler) {\n  return function (event) {\n    var isMouseEvent = event instanceof MouseEvent;\n    var isPrimaryPointer = !isMouseEvent || isMouseEvent && event.button === 0;\n\n    if (isPrimaryPointer) {\n      eventHandler(event);\n    }\n  };\n}\n\nvar defaultPagePoint = {\n  pageX: 0,\n  pageY: 0\n};\n\nfunction pointFromTouch(e, pointType) {\n  if (pointType === void 0) {\n    pointType = \"page\";\n  }\n\n  var primaryTouch = e.touches[0] || e.changedTouches[0];\n  var point = primaryTouch || defaultPagePoint;\n  return {\n    x: point[pointType + \"X\"],\n    y: point[pointType + \"Y\"]\n  };\n}\n\nfunction pointFromMouse(point, pointType) {\n  if (pointType === void 0) {\n    pointType = \"page\";\n  }\n\n  return {\n    x: point[pointType + \"X\"],\n    y: point[pointType + \"Y\"]\n  };\n}\n\nfunction extractEventInfo(event, pointType) {\n  if (pointType === void 0) {\n    pointType = \"page\";\n  }\n\n  return {\n    point: isTouchEvent(event) ? pointFromTouch(event, pointType) : pointFromMouse(event, pointType)\n  };\n}\n\nfunction getViewportPointFromEvent(event) {\n  return extractEventInfo(event, \"client\");\n}\n\nvar wrapHandler = function wrapHandler(handler, shouldFilterPrimaryPointer) {\n  if (shouldFilterPrimaryPointer === void 0) {\n    shouldFilterPrimaryPointer = false;\n  }\n\n  var listener = function listener(event) {\n    return handler(event, extractEventInfo(event));\n  };\n\n  return shouldFilterPrimaryPointer ? filterPrimaryPointer(listener) : listener;\n};\n\nexport { extractEventInfo, getViewportPointFromEvent, wrapHandler };","import { useDomEvent, addDomEvent } from './use-dom-event.js';\nimport { wrapHandler } from './event-info.js';\nimport { supportsPointerEvents, supportsTouchEvents, supportsMouseEvents } from './utils.js';\nvar mouseEventNames = {\n  pointerdown: \"mousedown\",\n  pointermove: \"mousemove\",\n  pointerup: \"mouseup\",\n  pointercancel: \"mousecancel\",\n  pointerover: \"mouseover\",\n  pointerout: \"mouseout\",\n  pointerenter: \"mouseenter\",\n  pointerleave: \"mouseleave\"\n};\nvar touchEventNames = {\n  pointerdown: \"touchstart\",\n  pointermove: \"touchmove\",\n  pointerup: \"touchend\",\n  pointercancel: \"touchcancel\"\n};\n\nfunction getPointerEventName(name) {\n  if (supportsPointerEvents()) {\n    return name;\n  } else if (supportsTouchEvents()) {\n    return touchEventNames[name];\n  } else if (supportsMouseEvents()) {\n    return mouseEventNames[name];\n  }\n\n  return name;\n}\n\nfunction addPointerEvent(target, eventName, handler, options) {\n  return addDomEvent(target, getPointerEventName(eventName), wrapHandler(handler, eventName === \"pointerdown\"), options);\n}\n\nfunction usePointerEvent(ref, eventName, handler, options) {\n  return useDomEvent(ref, getPointerEventName(eventName), handler && wrapHandler(handler, eventName === \"pointerdown\"), options);\n}\n\nexport { addPointerEvent, usePointerEvent };","import { isBrowser } from '../utils/is-browser.js'; // We check for event support via functions in case they've been mocked by a testing suite.\n\nvar supportsPointerEvents = function supportsPointerEvents() {\n  return isBrowser && window.onpointerdown === null;\n};\n\nvar supportsTouchEvents = function supportsTouchEvents() {\n  return isBrowser && window.ontouchstart === null;\n};\n\nvar supportsMouseEvents = function supportsMouseEvents() {\n  return isBrowser && window.onmousedown === null;\n};\n\nexport { supportsMouseEvents, supportsPointerEvents, supportsTouchEvents };","function createLock(name) {\n  var lock = null;\n  return function () {\n    var openLock = function openLock() {\n      lock = null;\n    };\n\n    if (lock === null) {\n      lock = name;\n      return openLock;\n    }\n\n    return false;\n  };\n}\n\nvar globalHorizontalLock = createLock(\"dragHorizontal\");\nvar globalVerticalLock = createLock(\"dragVertical\");\n\nfunction getGlobalLock(drag) {\n  var lock = false;\n\n  if (drag === \"y\") {\n    lock = globalVerticalLock();\n  } else if (drag === \"x\") {\n    lock = globalHorizontalLock();\n  } else {\n    var openHorizontal_1 = globalHorizontalLock();\n    var openVertical_1 = globalVerticalLock();\n\n    if (openHorizontal_1 && openVertical_1) {\n      lock = function lock() {\n        openHorizontal_1();\n        openVertical_1();\n      };\n    } else {\n      // Release the locks because we don't use them\n      if (openHorizontal_1) openHorizontal_1();\n      if (openVertical_1) openVertical_1();\n    }\n  }\n\n  return lock;\n}\n\nfunction isDragActive() {\n  // Check the gesture lock - if we get it, it means no drag gesture is active\n  // and we can safely fire the tap gesture.\n  var openGestureLock = getGlobalLock(true);\n  if (!openGestureLock) return true;\n  openGestureLock();\n  return false;\n}\n\nexport { createLock, getGlobalLock, isDragActive };","import { isMouseEvent } from './utils/event-type.js';\nimport { AnimationType } from '../render/utils/types.js';\nimport { usePointerEvent } from '../events/use-pointer-event.js';\nimport { isDragActive } from './drag/utils/lock.js';\n\nfunction createHoverEvent(visualElement, isActive, callback) {\n  return function (event, info) {\n    var _a;\n\n    if (!isMouseEvent(event) || isDragActive()) return;\n    callback === null || callback === void 0 ? void 0 : callback(event, info);\n    (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Hover, isActive);\n  };\n}\n\nfunction useHoverGesture(_a) {\n  var onHoverStart = _a.onHoverStart,\n      onHoverEnd = _a.onHoverEnd,\n      whileHover = _a.whileHover,\n      visualElement = _a.visualElement;\n  usePointerEvent(visualElement, \"pointerenter\", onHoverStart || whileHover ? createHoverEvent(visualElement, true, onHoverStart) : undefined);\n  usePointerEvent(visualElement, \"pointerleave\", onHoverEnd || whileHover ? createHoverEvent(visualElement, false, onHoverEnd) : undefined);\n}\n\nexport { useHoverGesture };","/**\n * Recursively traverse up the tree to check whether the provided child node\n * is the parent or a descendant of it.\n *\n * @param parent - Element to find\n * @param child - Element to test against parent\n */\nvar isNodeOrChild = function isNodeOrChild(parent, child) {\n  if (!child) {\n    return false;\n  } else if (parent === child) {\n    return true;\n  } else {\n    return isNodeOrChild(parent, child.parentElement);\n  }\n};\n\nexport { isNodeOrChild };","import { useEffect } from 'react';\n\nfunction useUnmountEffect(callback) {\n  return useEffect(function () {\n    return function () {\n      return callback();\n    };\n  }, []);\n}\n\nexport { useUnmountEffect };","var makeRenderlessComponent = function makeRenderlessComponent(hook) {\n  return function (props) {\n    hook(props);\n    return null;\n  };\n};\n\nexport { makeRenderlessComponent };","import { useFocusGesture } from '../../gestures/use-focus-gesture.js';\nimport { useHoverGesture } from '../../gestures/use-hover-gesture.js';\nimport { useTapGesture } from '../../gestures/use-tap-gesture.js';\nimport { makeRenderlessComponent } from '../utils/make-renderless-component.js';\nvar gestureAnimations = {\n  tap: makeRenderlessComponent(useTapGesture),\n  focus: makeRenderlessComponent(useFocusGesture),\n  hover: makeRenderlessComponent(useHoverGesture)\n};\nexport { gestureAnimations };","import { useRef } from 'react';\nimport { isNodeOrChild } from './utils/is-node-or-child.js';\nimport { usePointerEvent, addPointerEvent } from '../events/use-pointer-event.js';\nimport { useUnmountEffect } from '../utils/use-unmount-effect.js';\nimport { pipe } from 'popmotion';\nimport { AnimationType } from '../render/utils/types.js';\nimport { isDragActive } from './drag/utils/lock.js';\n/**\n * @param handlers -\n * @internal\n */\n\nfunction useTapGesture(_a) {\n  var onTap = _a.onTap,\n      onTapStart = _a.onTapStart,\n      onTapCancel = _a.onTapCancel,\n      whileTap = _a.whileTap,\n      visualElement = _a.visualElement;\n  var hasPressListeners = onTap || onTapStart || onTapCancel || whileTap;\n  var isPressing = useRef(false);\n  var cancelPointerEndListeners = useRef(null);\n\n  function removePointerEndListener() {\n    var _a;\n\n    (_a = cancelPointerEndListeners.current) === null || _a === void 0 ? void 0 : _a.call(cancelPointerEndListeners);\n    cancelPointerEndListeners.current = null;\n  }\n\n  function checkPointerEnd() {\n    var _a;\n\n    removePointerEndListener();\n    isPressing.current = false;\n    (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Tap, false);\n    return !isDragActive();\n  }\n\n  function onPointerUp(event, info) {\n    if (!checkPointerEnd()) return;\n    /**\n     * We only count this as a tap gesture if the event.target is the same\n     * as, or a child of, this component's element\n     */\n\n    !isNodeOrChild(visualElement.getInstance(), event.target) ? onTapCancel === null || onTapCancel === void 0 ? void 0 : onTapCancel(event, info) : onTap === null || onTap === void 0 ? void 0 : onTap(event, info);\n  }\n\n  function onPointerCancel(event, info) {\n    if (!checkPointerEnd()) return;\n    onTapCancel === null || onTapCancel === void 0 ? void 0 : onTapCancel(event, info);\n  }\n\n  function onPointerDown(event, info) {\n    var _a;\n\n    removePointerEndListener();\n    if (isPressing.current) return;\n    isPressing.current = true;\n    cancelPointerEndListeners.current = pipe(addPointerEvent(window, \"pointerup\", onPointerUp), addPointerEvent(window, \"pointercancel\", onPointerCancel));\n    onTapStart === null || onTapStart === void 0 ? void 0 : onTapStart(event, info);\n    (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Tap, true);\n  }\n\n  usePointerEvent(visualElement, \"pointerdown\", hasPressListeners ? onPointerDown : undefined);\n  useUnmountEffect(removePointerEndListener);\n}\n\nexport { useTapGesture };","import { AnimationType } from '../render/utils/types.js';\nimport { useDomEvent } from '../events/use-dom-event.js';\n/**\n *\n * @param props\n * @param ref\n * @internal\n */\n\nfunction useFocusGesture(_a) {\n  var whileFocus = _a.whileFocus,\n      visualElement = _a.visualElement;\n\n  var onFocus = function onFocus() {\n    var _a;\n\n    (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Focus, true);\n  };\n\n  var onBlur = function onBlur() {\n    var _a;\n\n    (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Focus, false);\n  };\n\n  useDomEvent(visualElement, \"focus\", whileFocus ? onFocus : undefined);\n  useDomEvent(visualElement, \"blur\", whileFocus ? onBlur : undefined);\n}\n\nexport { useFocusGesture };","function shallowCompare(next, prev) {\n  if (!Array.isArray(prev)) return false;\n  var prevLength = prev.length;\n  if (prevLength !== next.length) return false;\n\n  for (var i = 0; i < prevLength; i++) {\n    if (prev[i] !== next[i]) return false;\n  }\n\n  return true;\n}\n\nexport { shallowCompare };","import { __spreadArray, __read, __assign, __rest } from 'tslib';\nimport { isAnimationControls } from '../../animation/utils/is-animation-controls.js';\nimport { isKeyframesTarget } from '../../animation/utils/is-keyframes-target.js';\nimport { shallowCompare } from '../../utils/shallow-compare.js';\nimport { animateVisualElement } from './animation.js';\nimport { AnimationType } from './types.js';\nimport { isVariantLabels, resolveVariant, isVariantLabel } from './variants.js';\nvar variantPriorityOrder = [AnimationType.Animate, AnimationType.Hover, AnimationType.Tap, AnimationType.Drag, AnimationType.Focus, AnimationType.Exit];\n\nvar reversePriorityOrder = __spreadArray([], __read(variantPriorityOrder)).reverse();\n\nvar numAnimationTypes = variantPriorityOrder.length;\n\nfunction animateList(visualElement) {\n  return function (animations) {\n    return Promise.all(animations.map(function (_a) {\n      var animation = _a.animation,\n          options = _a.options;\n      return animateVisualElement(visualElement, animation, options);\n    }));\n  };\n}\n\nfunction createAnimationState(visualElement) {\n  var animate = animateList(visualElement);\n  var state = createState();\n  var allAnimatedKeys = {};\n  var isInitialRender = true;\n  /**\n   * This function will be used to reduce the animation definitions for\n   * each active animation type into an object of resolved values for it.\n   */\n\n  var buildResolvedTypeValues = function buildResolvedTypeValues(acc, definition) {\n    var resolved = resolveVariant(visualElement, definition);\n\n    if (resolved) {\n      resolved.transition;\n\n      var transitionEnd = resolved.transitionEnd,\n          target = __rest(resolved, [\"transition\", \"transitionEnd\"]);\n\n      acc = __assign(__assign(__assign({}, acc), target), transitionEnd);\n    }\n\n    return acc;\n  };\n\n  function isAnimated(key) {\n    return allAnimatedKeys[key] !== undefined;\n  }\n  /**\n   * This just allows us to inject mocked animation functions\n   * @internal\n   */\n\n\n  function setAnimateFunction(makeAnimator) {\n    animate = makeAnimator(visualElement);\n  }\n  /**\n   * When we receive new props, we need to:\n   * 1. Create a list of protected keys for each type. This is a directory of\n   *    value keys that are currently being \"handled\" by types of a higher priority\n   *    so that whenever an animation is played of a given type, these values are\n   *    protected from being animated.\n   * 2. Determine if an animation type needs animating.\n   * 3. Determine if any values have been removed from a type and figure out\n   *    what to animate those to.\n   */\n\n\n  function animateChanges(options, changedActiveType) {\n    var _a;\n\n    var props = visualElement.getProps();\n    var context = visualElement.getVariantContext(true) || {};\n    /**\n     * A list of animations that we'll build into as we iterate through the animation\n     * types. This will get executed at the end of the function.\n     */\n\n    var animations = [];\n    /**\n     * Keep track of which values have been removed. Then, as we hit lower priority\n     * animation types, we can check if they contain removed values and animate to that.\n     */\n\n    var removedKeys = new Set();\n    /**\n     * A dictionary of all encountered keys. This is an object to let us build into and\n     * copy it without iteration. Each time we hit an animation type we set its protected\n     * keys - the keys its not allowed to animate - to the latest version of this object.\n     */\n\n    var encounteredKeys = {};\n    /**\n     * If a variant has been removed at a given index, and this component is controlling\n     * variant animations, we want to ensure lower-priority variants are forced to animate.\n     */\n\n    var removedVariantIndex = Infinity;\n\n    var _loop_1 = function _loop_1(i) {\n      var type = reversePriorityOrder[i];\n      var typeState = state[type];\n      var prop = (_a = props[type]) !== null && _a !== void 0 ? _a : context[type];\n      var propIsVariant = isVariantLabel(prop);\n      /**\n       * If this type has *just* changed isActive status, set activeDelta\n       * to that status. Otherwise set to null.\n       */\n\n      var activeDelta = type === changedActiveType ? typeState.isActive : null;\n      if (activeDelta === false) removedVariantIndex = i;\n      /**\n       * If this prop is an inherited variant, rather than been set directly on the\n       * component itself, we want to make sure we allow the parent to trigger animations.\n       *\n       * TODO: Can probably change this to a !isControllingVariants check\n       */\n\n      var isInherited = prop === context[type] && prop !== props[type] && propIsVariant;\n      /**\n       *\n       */\n\n      if (isInherited && isInitialRender && visualElement.manuallyAnimateOnMount) {\n        isInherited = false;\n      }\n      /**\n       * Set all encountered keys so far as the protected keys for this type. This will\n       * be any key that has been animated or otherwise handled by active, higher-priortiy types.\n       */\n\n\n      typeState.protectedKeys = __assign({}, encounteredKeys); // Check if we can skip analysing this prop early\n\n      if ( // If it isn't active and hasn't *just* been set as inactive\n      !typeState.isActive && activeDelta === null || !prop && !typeState.prevProp || // Or if the prop doesn't define an animation\n      isAnimationControls(prop) || typeof prop === \"boolean\") {\n        return \"continue\";\n      }\n      /**\n       * As we go look through the values defined on this type, if we detect\n       * a changed value or a value that was removed in a higher priority, we set\n       * this to true and add this prop to the animation list.\n       */\n\n\n      var shouldAnimateType = variantsHaveChanged(typeState.prevProp, prop) || type === changedActiveType && typeState.isActive && !isInherited && propIsVariant || i > removedVariantIndex && propIsVariant;\n      /**\n       * As animations can be set as variant lists, variants or target objects, we\n       * coerce everything to an array if it isn't one already\n       */\n\n      var definitionList = Array.isArray(prop) ? prop : [prop];\n      /**\n       * Build an object of all the resolved values. We'll use this in the subsequent\n       * animateChanges calls to determine whether a value has changed.\n       */\n\n      var resolvedValues = definitionList.reduce(buildResolvedTypeValues, {});\n      if (activeDelta === false) resolvedValues = {};\n      /**\n       * Now we need to loop through all the keys in the prev prop and this prop,\n       * and decide:\n       * 1. If the value has changed, and needs animating\n       * 2. If it has been removed, and needs adding to the removedKeys set\n       * 3. If it has been removed in a higher priority type and needs animating\n       * 4. If it hasn't been removed in a higher priority but hasn't changed, and\n       *    needs adding to the type's protectedKeys list.\n       */\n\n      var _b = typeState.prevResolvedValues,\n          prevResolvedValues = _b === void 0 ? {} : _b;\n\n      var allKeys = __assign(__assign({}, prevResolvedValues), resolvedValues);\n\n      var markToAnimate = function markToAnimate(key) {\n        shouldAnimateType = true;\n        removedKeys.delete(key);\n        typeState.needsAnimating[key] = true;\n      };\n\n      for (var key in allKeys) {\n        var next = resolvedValues[key];\n        var prev = prevResolvedValues[key]; // If we've already handled this we can just skip ahead\n\n        if (encounteredKeys.hasOwnProperty(key)) continue;\n        /**\n         * If the value has changed, we probably want to animate it.\n         */\n\n        if (next !== prev) {\n          /**\n           * If both values are keyframes, we need to shallow compare them to\n           * detect whether any value has changed. If it has, we animate it.\n           */\n          if (isKeyframesTarget(next) && isKeyframesTarget(prev)) {\n            if (!shallowCompare(next, prev)) {\n              markToAnimate(key);\n            } else {\n              /**\n               * If it hasn't changed, we want to ensure it doesn't animate by\n               * adding it to the list of protected keys.\n               */\n              typeState.protectedKeys[key] = true;\n            }\n          } else if (next !== undefined) {\n            // If next is defined and doesn't equal prev, it needs animating\n            markToAnimate(key);\n          } else {\n            // If it's undefined, it's been removed.\n            removedKeys.add(key);\n          }\n        } else if (next !== undefined && removedKeys.has(key)) {\n          /**\n           * If next hasn't changed and it isn't undefined, we want to check if it's\n           * been removed by a higher priority\n           */\n          markToAnimate(key);\n        } else {\n          /**\n           * If it hasn't changed, we add it to the list of protected values\n           * to ensure it doesn't get animated.\n           */\n          typeState.protectedKeys[key] = true;\n        }\n      }\n      /**\n       * Update the typeState so next time animateChanges is called we can compare the\n       * latest prop and resolvedValues to these.\n       */\n\n\n      typeState.prevProp = prop;\n      typeState.prevResolvedValues = resolvedValues;\n      /**\n       *\n       */\n\n      if (typeState.isActive) {\n        encounteredKeys = __assign(__assign({}, encounteredKeys), resolvedValues);\n      }\n\n      if (isInitialRender && visualElement.blockInitialAnimation) {\n        shouldAnimateType = false;\n      }\n      /**\n       * If this is an inherited prop we want to hard-block animations\n       * TODO: Test as this should probably still handle animations triggered\n       * by removed values?\n       */\n\n\n      if (shouldAnimateType && !isInherited) {\n        animations.push.apply(animations, __spreadArray([], __read(definitionList.map(function (animation) {\n          return {\n            animation: animation,\n            options: __assign({\n              type: type\n            }, options)\n          };\n        }))));\n      }\n    };\n    /**\n     * Iterate through all animation types in reverse priority order. For each, we want to\n     * detect which values it's handling and whether or not they've changed (and therefore\n     * need to be animated). If any values have been removed, we want to detect those in\n     * lower priority props and flag for animation.\n     */\n\n\n    for (var i = 0; i < numAnimationTypes; i++) {\n      _loop_1(i);\n    }\n\n    allAnimatedKeys = __assign({}, encounteredKeys);\n    /**\n     * If there are some removed value that haven't been dealt with,\n     * we need to create a new animation that falls back either to the value\n     * defined in the style prop, or the last read value.\n     */\n\n    if (removedKeys.size) {\n      var fallbackAnimation_1 = {};\n      removedKeys.forEach(function (key) {\n        var fallbackTarget = visualElement.getBaseTarget(key);\n\n        if (fallbackTarget !== undefined) {\n          fallbackAnimation_1[key] = fallbackTarget;\n        }\n      });\n      animations.push({\n        animation: fallbackAnimation_1\n      });\n    }\n\n    var shouldAnimate = Boolean(animations.length);\n\n    if (isInitialRender && props.initial === false && !visualElement.manuallyAnimateOnMount) {\n      shouldAnimate = false;\n    }\n\n    isInitialRender = false;\n    return shouldAnimate ? animate(animations) : Promise.resolve();\n  }\n  /**\n   * Change whether a certain animation type is active.\n   */\n\n\n  function setActive(type, isActive, options) {\n    var _a; // If the active state hasn't changed, we can safely do nothing here\n\n\n    if (state[type].isActive === isActive) return Promise.resolve(); // Propagate active change to children\n\n    (_a = visualElement.variantChildren) === null || _a === void 0 ? void 0 : _a.forEach(function (child) {\n      var _a;\n\n      return (_a = child.animationState) === null || _a === void 0 ? void 0 : _a.setActive(type, isActive);\n    });\n    state[type].isActive = isActive;\n    return animateChanges(options, type);\n  }\n\n  return {\n    isAnimated: isAnimated,\n    animateChanges: animateChanges,\n    setActive: setActive,\n    setAnimateFunction: setAnimateFunction,\n    getState: function getState() {\n      return state;\n    }\n  };\n}\n\nfunction variantsHaveChanged(prev, next) {\n  if (typeof next === \"string\") {\n    return next !== prev;\n  } else if (isVariantLabels(next)) {\n    return !shallowCompare(next, prev);\n  }\n\n  return false;\n}\n\nfunction createTypeState(isActive) {\n  if (isActive === void 0) {\n    isActive = false;\n  }\n\n  return {\n    isActive: isActive,\n    protectedKeys: {},\n    needsAnimating: {},\n    prevResolvedValues: {}\n  };\n}\n\nfunction createState() {\n  var _a;\n\n  return _a = {}, _a[AnimationType.Animate] = createTypeState(true), _a[AnimationType.Hover] = createTypeState(), _a[AnimationType.Tap] = createTypeState(), _a[AnimationType.Drag] = createTypeState(), _a[AnimationType.Focus] = createTypeState(), _a[AnimationType.Exit] = createTypeState(), _a;\n}\n\nexport { createAnimationState, variantPriorityOrder, variantsHaveChanged };","import { __read } from 'tslib';\nimport { useEffect, useContext } from 'react';\nimport { isAnimationControls } from '../../animation/utils/is-animation-controls.js';\nimport { usePresence } from '../../components/AnimatePresence/use-presence.js';\nimport { PresenceContext } from '../../context/PresenceContext.js';\nimport { createAnimationState } from '../../render/utils/animation-state.js';\nimport { AnimationType } from '../../render/utils/types.js';\nimport { makeRenderlessComponent } from '../utils/make-renderless-component.js';\nvar animations = {\n  animation: makeRenderlessComponent(function (_a) {\n    var visualElement = _a.visualElement,\n        animate = _a.animate;\n    /**\n     * We dynamically generate the AnimationState manager as it contains a reference\n     * to the underlying animation library. We only want to load that if we load this,\n     * so people can optionally code split it out using the `m` component.\n     */\n\n    visualElement.animationState || (visualElement.animationState = createAnimationState(visualElement));\n    /**\n     * Subscribe any provided AnimationControls to the component's VisualElement\n     */\n\n    if (isAnimationControls(animate)) {\n      useEffect(function () {\n        return animate.subscribe(visualElement);\n      }, [animate]);\n    }\n  }),\n  exit: makeRenderlessComponent(function (props) {\n    var custom = props.custom,\n        visualElement = props.visualElement;\n\n    var _a = __read(usePresence(), 2),\n        isPresent = _a[0],\n        onExitComplete = _a[1];\n\n    var presenceContext = useContext(PresenceContext);\n    useEffect(function () {\n      var _a, _b;\n\n      var animation = (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Exit, !isPresent, {\n        custom: (_b = presenceContext === null || presenceContext === void 0 ? void 0 : presenceContext.custom) !== null && _b !== void 0 ? _b : custom\n      });\n      !isPresent && (animation === null || animation === void 0 ? void 0 : animation.then(onExitComplete));\n    }, [isPresent]);\n  })\n};\nexport { animations };","var isPoint = function isPoint(point) {\n  return point.hasOwnProperty('x') && point.hasOwnProperty('y');\n};\n\nexport { isPoint };","import { isPoint } from './is-point.js';\n\nvar isPoint3D = function isPoint3D(point) {\n  return isPoint(point) && point.hasOwnProperty('z');\n};\n\nexport { isPoint3D };","import { isPoint } from './is-point.js';\nimport { isPoint3D } from './is-point-3d.js';\nimport { isNum } from './inc.js';\n\nvar distance1D = function distance1D(a, b) {\n  return Math.abs(a - b);\n};\n\nfunction distance(a, b) {\n  if (isNum(a) && isNum(b)) {\n    return distance1D(a, b);\n  } else if (isPoint(a) && isPoint(b)) {\n    var xDelta = distance1D(a.x, b.x);\n    var yDelta = distance1D(a.y, b.y);\n    var zDelta = isPoint3D(a) && isPoint3D(b) ? distance1D(a.z, b.z) : 0;\n    return Math.sqrt(Math.pow(xDelta, 2) + Math.pow(yDelta, 2) + Math.pow(zDelta, 2));\n  }\n}\n\nexport { distance };","import { __assign } from 'tslib';\nimport { isMouseEvent, isTouchEvent } from './utils/event-type.js';\nimport { extractEventInfo } from '../events/event-info.js';\nimport sync, { getFrameData, cancelSync } from 'framesync';\nimport { secondsToMilliseconds } from '../utils/time-conversion.js';\nimport { addPointerEvent } from '../events/use-pointer-event.js';\nimport { distance, pipe } from 'popmotion';\n/**\n * @internal\n */\n\nvar PanSession = function () {\n  function PanSession(event, handlers, _a) {\n    var _this = this;\n\n    var _b = _a === void 0 ? {} : _a,\n        transformPagePoint = _b.transformPagePoint;\n    /**\n     * @internal\n     */\n\n\n    this.startEvent = null;\n    /**\n     * @internal\n     */\n\n    this.lastMoveEvent = null;\n    /**\n     * @internal\n     */\n\n    this.lastMoveEventInfo = null;\n    /**\n     * @internal\n     */\n\n    this.handlers = {};\n\n    this.updatePoint = function () {\n      if (!(_this.lastMoveEvent && _this.lastMoveEventInfo)) return;\n      var info = getPanInfo(_this.lastMoveEventInfo, _this.history);\n      var isPanStarted = _this.startEvent !== null; // Only start panning if the offset is larger than 3 pixels. If we make it\n      // any larger than this we'll want to reset the pointer history\n      // on the first update to avoid visual snapping to the cursoe.\n\n      var isDistancePastThreshold = distance(info.offset, {\n        x: 0,\n        y: 0\n      }) >= 3;\n      if (!isPanStarted && !isDistancePastThreshold) return;\n      var point = info.point;\n      var timestamp = getFrameData().timestamp;\n\n      _this.history.push(__assign(__assign({}, point), {\n        timestamp: timestamp\n      }));\n\n      var _a = _this.handlers,\n          onStart = _a.onStart,\n          onMove = _a.onMove;\n\n      if (!isPanStarted) {\n        onStart && onStart(_this.lastMoveEvent, info);\n        _this.startEvent = _this.lastMoveEvent;\n      }\n\n      onMove && onMove(_this.lastMoveEvent, info);\n    };\n\n    this.handlePointerMove = function (event, info) {\n      _this.lastMoveEvent = event;\n      _this.lastMoveEventInfo = transformPoint(info, _this.transformPagePoint); // Because Safari doesn't trigger mouseup events when it's above a `<select>`\n\n      if (isMouseEvent(event) && event.buttons === 0) {\n        _this.handlePointerUp(event, info);\n\n        return;\n      } // Throttle mouse move event to once per frame\n\n\n      sync.update(_this.updatePoint, true);\n    };\n\n    this.handlePointerUp = function (event, info) {\n      _this.end();\n\n      var _a = _this.handlers,\n          onEnd = _a.onEnd,\n          onSessionEnd = _a.onSessionEnd;\n      var panInfo = getPanInfo(transformPoint(info, _this.transformPagePoint), _this.history);\n\n      if (_this.startEvent && onEnd) {\n        onEnd(event, panInfo);\n      }\n\n      onSessionEnd && onSessionEnd(event, panInfo);\n    }; // If we have more than one touch, don't start detecting this gesture\n\n\n    if (isTouchEvent(event) && event.touches.length > 1) return;\n    this.handlers = handlers;\n    this.transformPagePoint = transformPagePoint;\n    var info = extractEventInfo(event);\n    var initialInfo = transformPoint(info, this.transformPagePoint);\n    var point = initialInfo.point;\n    var timestamp = getFrameData().timestamp;\n    this.history = [__assign(__assign({}, point), {\n      timestamp: timestamp\n    })];\n    var onSessionStart = handlers.onSessionStart;\n    onSessionStart && onSessionStart(event, getPanInfo(initialInfo, this.history));\n    this.removeListeners = pipe(addPointerEvent(window, \"pointermove\", this.handlePointerMove), addPointerEvent(window, \"pointerup\", this.handlePointerUp), addPointerEvent(window, \"pointercancel\", this.handlePointerUp));\n  }\n\n  PanSession.prototype.updateHandlers = function (handlers) {\n    this.handlers = handlers;\n  };\n\n  PanSession.prototype.end = function () {\n    this.removeListeners && this.removeListeners();\n    cancelSync.update(this.updatePoint);\n  };\n\n  return PanSession;\n}();\n\nfunction transformPoint(info, transformPagePoint) {\n  return transformPagePoint ? {\n    point: transformPagePoint(info.point)\n  } : info;\n}\n\nfunction subtractPoint(a, b) {\n  return {\n    x: a.x - b.x,\n    y: a.y - b.y\n  };\n}\n\nfunction getPanInfo(_a, history) {\n  var point = _a.point;\n  return {\n    point: point,\n    delta: subtractPoint(point, lastDevicePoint(history)),\n    offset: subtractPoint(point, startDevicePoint(history)),\n    velocity: getVelocity(history, 0.1)\n  };\n}\n\nfunction startDevicePoint(history) {\n  return history[0];\n}\n\nfunction lastDevicePoint(history) {\n  return history[history.length - 1];\n}\n\nfunction getVelocity(history, timeDelta) {\n  if (history.length < 2) {\n    return {\n      x: 0,\n      y: 0\n    };\n  }\n\n  var i = history.length - 1;\n  var timestampedPoint = null;\n  var lastPoint = lastDevicePoint(history);\n\n  while (i >= 0) {\n    timestampedPoint = history[i];\n\n    if (lastPoint.timestamp - timestampedPoint.timestamp > secondsToMilliseconds(timeDelta)) {\n      break;\n    }\n\n    i--;\n  }\n\n  if (!timestampedPoint) {\n    return {\n      x: 0,\n      y: 0\n    };\n  }\n\n  var time = (lastPoint.timestamp - timestampedPoint.timestamp) / 1000;\n\n  if (time === 0) {\n    return {\n      x: 0,\n      y: 0\n    };\n  }\n\n  var currentVelocity = {\n    x: (lastPoint.x - timestampedPoint.x) / time,\n    y: (lastPoint.y - timestampedPoint.y) / time\n  };\n\n  if (currentVelocity.x === Infinity) {\n    currentVelocity.x = 0;\n  }\n\n  if (currentVelocity.y === Infinity) {\n    currentVelocity.y = 0;\n  }\n\n  return currentVelocity;\n}\n\nexport { PanSession };","function noop(any) {\n  return any;\n}\n\nexport { noop };","import { __assign } from 'tslib';\nimport { noop } from '../noop.js';\n/**\n * Bounding boxes tend to be defined as top, left, right, bottom. For various operations\n * it's easier to consider each axis individually. This function returns a bounding box\n * as a map of single-axis min/max values.\n */\n\nfunction convertBoundingBoxToAxisBox(_a) {\n  var top = _a.top,\n      left = _a.left,\n      right = _a.right,\n      bottom = _a.bottom;\n  return {\n    x: {\n      min: left,\n      max: right\n    },\n    y: {\n      min: top,\n      max: bottom\n    }\n  };\n}\n\nfunction convertAxisBoxToBoundingBox(_a) {\n  var x = _a.x,\n      y = _a.y;\n  return {\n    top: y.min,\n    bottom: y.max,\n    left: x.min,\n    right: x.max\n  };\n}\n/**\n * Applies a TransformPoint function to a bounding box. TransformPoint is usually a function\n * provided by Framer to allow measured points to be corrected for device scaling. This is used\n * when measuring DOM elements and DOM event points.\n */\n\n\nfunction transformBoundingBox(_a, transformPoint) {\n  var top = _a.top,\n      left = _a.left,\n      bottom = _a.bottom,\n      right = _a.right;\n\n  if (transformPoint === void 0) {\n    transformPoint = noop;\n  }\n\n  var topLeft = transformPoint({\n    x: left,\n    y: top\n  });\n  var bottomRight = transformPoint({\n    x: right,\n    y: bottom\n  });\n  return {\n    top: topLeft.y,\n    left: topLeft.x,\n    bottom: bottomRight.y,\n    right: bottomRight.x\n  };\n}\n/**\n * Create an empty axis box of zero size\n */\n\n\nfunction axisBox() {\n  return {\n    x: {\n      min: 0,\n      max: 1\n    },\n    y: {\n      min: 0,\n      max: 1\n    }\n  };\n}\n\nfunction copyAxisBox(box) {\n  return {\n    x: __assign({}, box.x),\n    y: __assign({}, box.y)\n  };\n}\n/**\n * Create an empty box delta\n */\n\n\nvar zeroDelta = {\n  translate: 0,\n  scale: 1,\n  origin: 0,\n  originPoint: 0\n};\n\nfunction delta() {\n  return {\n    x: __assign({}, zeroDelta),\n    y: __assign({}, zeroDelta)\n  };\n}\n\nexport { axisBox, convertAxisBoxToBoundingBox, convertBoundingBoxToAxisBox, copyAxisBox, delta, transformBoundingBox };","// Call a handler once for each axis\nfunction eachAxis(handler) {\n  return [handler(\"x\"), handler(\"y\")];\n}\n\nexport { eachAxis };","import { __read } from 'tslib';\nimport { mix } from 'popmotion';\n/**\n * Apply constraints to a point. These constraints are both physical along an\n * axis, and an elastic factor that determines how much to constrain the point\n * by if it does lie outside the defined parameters.\n */\n\nfunction applyConstraints(point, _a, elastic) {\n  var min = _a.min,\n      max = _a.max;\n\n  if (min !== undefined && point < min) {\n    // If we have a min point defined, and this is outside of that, constrain\n    point = elastic ? mix(min, point, elastic.min) : Math.max(point, min);\n  } else if (max !== undefined && point > max) {\n    // If we have a max point defined, and this is outside of that, constrain\n    point = elastic ? mix(max, point, elastic.max) : Math.min(point, max);\n  }\n\n  return point;\n}\n/**\n * Calculates a min projection point based on a pointer, pointer progress\n * within the drag target, and constraints.\n *\n * For instance if an element was 100px width, we were dragging from 0.25\n * along this axis, the pointer is at 200px, and there were no constraints,\n * we would calculate a min projection point of 175px.\n */\n\n\nfunction calcConstrainedMinPoint(point, length, progress, constraints, elastic) {\n  // Calculate a min point for this axis and apply it to the current pointer\n  var min = point - length * progress;\n  return constraints ? applyConstraints(min, constraints, elastic) : min;\n}\n/**\n * Calculate constraints in terms of the viewport when defined relatively to the\n * measured axis. This is measured from the nearest edge, so a max constraint of 200\n * on an axis with a max value of 300 would return a constraint of 500 - axis length\n */\n\n\nfunction calcRelativeAxisConstraints(axis, min, max) {\n  return {\n    min: min !== undefined ? axis.min + min : undefined,\n    max: max !== undefined ? axis.max + max - (axis.max - axis.min) : undefined\n  };\n}\n/**\n * Calculate constraints in terms of the viewport when\n * defined relatively to the measured bounding box.\n */\n\n\nfunction calcRelativeConstraints(layoutBox, _a) {\n  var top = _a.top,\n      left = _a.left,\n      bottom = _a.bottom,\n      right = _a.right;\n  return {\n    x: calcRelativeAxisConstraints(layoutBox.x, left, right),\n    y: calcRelativeAxisConstraints(layoutBox.y, top, bottom)\n  };\n}\n/**\n * Calculate viewport constraints when defined as another viewport-relative axis\n */\n\n\nfunction calcViewportAxisConstraints(layoutAxis, constraintsAxis) {\n  var _a;\n\n  var min = constraintsAxis.min - layoutAxis.min;\n  var max = constraintsAxis.max - layoutAxis.max; // If the constraints axis is actually smaller than the layout axis then we can\n  // flip the constraints\n\n  if (constraintsAxis.max - constraintsAxis.min < layoutAxis.max - layoutAxis.min) {\n    _a = __read([max, min], 2), min = _a[0], max = _a[1];\n  }\n\n  return {\n    min: layoutAxis.min + min,\n    max: layoutAxis.min + max\n  };\n}\n/**\n * Calculate viewport constraints when defined as another viewport-relative box\n */\n\n\nfunction calcViewportConstraints(layoutBox, constraintsBox) {\n  return {\n    x: calcViewportAxisConstraints(layoutBox.x, constraintsBox.x),\n    y: calcViewportAxisConstraints(layoutBox.y, constraintsBox.y)\n  };\n}\n/**\n * Calculate the an axis position based on two axes and a progress value.\n */\n\n\nfunction calcPositionFromProgress(axis, constraints, progress) {\n  var axisLength = axis.max - axis.min;\n  var min = mix(constraints.min, constraints.max - axisLength, progress);\n  return {\n    min: min,\n    max: min + axisLength\n  };\n}\n/**\n * Rebase the calculated viewport constraints relative to the layout.min point.\n */\n\n\nfunction rebaseAxisConstraints(layout, constraints) {\n  var relativeConstraints = {};\n\n  if (constraints.min !== undefined) {\n    relativeConstraints.min = constraints.min - layout.min;\n  }\n\n  if (constraints.max !== undefined) {\n    relativeConstraints.max = constraints.max - layout.min;\n  }\n\n  return relativeConstraints;\n}\n\nvar defaultElastic = 0.35;\n/**\n * Accepts a dragElastic prop and returns resolved elastic values for each axis.\n */\n\nfunction resolveDragElastic(dragElastic) {\n  if (dragElastic === false) {\n    dragElastic = 0;\n  } else if (dragElastic === true) {\n    dragElastic = defaultElastic;\n  }\n\n  return {\n    x: resolveAxisElastic(dragElastic, \"left\", \"right\"),\n    y: resolveAxisElastic(dragElastic, \"top\", \"bottom\")\n  };\n}\n\nfunction resolveAxisElastic(dragElastic, minLabel, maxLabel) {\n  return {\n    min: resolvePointElastic(dragElastic, minLabel),\n    max: resolvePointElastic(dragElastic, maxLabel)\n  };\n}\n\nfunction resolvePointElastic(dragElastic, label) {\n  var _a;\n\n  return typeof dragElastic === \"number\" ? dragElastic : (_a = dragElastic[label]) !== null && _a !== void 0 ? _a : 0;\n}\n\nexport { applyConstraints, calcConstrainedMinPoint, calcPositionFromProgress, calcRelativeAxisConstraints, calcRelativeConstraints, calcViewportAxisConstraints, calcViewportConstraints, defaultElastic, rebaseAxisConstraints, resolveAxisElastic, resolveDragElastic, resolvePointElastic };","import { convertBoundingBoxToAxisBox, transformBoundingBox } from '../../../utils/geometry/index.js';\n/**\n * Measure and return the element bounding box.\n *\n * We convert the box into an AxisBox2D to make it easier to work with each axis\n * individually and programmatically.\n *\n * This function optionally accepts a transformPagePoint function which allows us to compensate\n * for, for instance, measuring the element within a scaled plane like a Framer devivce preview component.\n */\n\nfunction getBoundingBox(element, transformPagePoint) {\n  var box = element.getBoundingClientRect();\n  return convertBoundingBoxToAxisBox(transformBoundingBox(box, transformPagePoint));\n}\n\nexport { getBoundingBox };","import { mix, distance, clamp, progress } from 'popmotion';\n\nvar clampProgress = function clampProgress(v) {\n  return clamp(0, 1, v);\n};\n/**\n * Returns true if the provided value is within maxDistance of the provided target\n */\n\n\nfunction isNear(value, target, maxDistance) {\n  if (target === void 0) {\n    target = 0;\n  }\n\n  if (maxDistance === void 0) {\n    maxDistance = 0.01;\n  }\n\n  return distance(value, target) < maxDistance;\n}\n\nfunction calcLength(axis) {\n  return axis.max - axis.min;\n}\n/**\n * Calculate a transform origin relative to the source axis, between 0-1, that results\n * in an asthetically pleasing scale/transform needed to project from source to target.\n */\n\n\nfunction calcOrigin(source, target) {\n  var origin = 0.5;\n  var sourceLength = calcLength(source);\n  var targetLength = calcLength(target);\n\n  if (targetLength > sourceLength) {\n    origin = progress(target.min, target.max - sourceLength, source.min);\n  } else if (sourceLength > targetLength) {\n    origin = progress(source.min, source.max - targetLength, target.min);\n  }\n\n  return clampProgress(origin);\n}\n/**\n * Update the AxisDelta with a transform that projects source into target.\n *\n * The transform `origin` is optional. If not provided, it'll be automatically\n * calculated based on the relative positions of the two bounding boxes.\n */\n\n\nfunction updateAxisDelta(delta, source, target, origin) {\n  if (origin === void 0) {\n    origin = 0.5;\n  }\n\n  delta.origin = origin;\n  delta.originPoint = mix(source.min, source.max, delta.origin);\n  delta.scale = calcLength(target) / calcLength(source);\n  if (isNear(delta.scale, 1, 0.0001)) delta.scale = 1;\n  delta.translate = mix(target.min, target.max, delta.origin) - delta.originPoint;\n  if (isNear(delta.translate)) delta.translate = 0;\n}\n/**\n * Update the BoxDelta with a transform that projects the source into the target.\n *\n * The transform `origin` is optional. If not provided, it'll be automatically\n * calculated based on the relative positions of the two bounding boxes.\n */\n\n\nfunction updateBoxDelta(delta, source, target, origin) {\n  updateAxisDelta(delta.x, source.x, target.x, defaultOrigin(origin.originX));\n  updateAxisDelta(delta.y, source.y, target.y, defaultOrigin(origin.originY));\n}\n/**\n * Currently this only accepts numerical origins, measured as 0-1, but could\n * accept pixel values by comparing to the target axis.\n */\n\n\nfunction defaultOrigin(origin) {\n  return typeof origin === \"number\" ? origin : 0.5;\n}\n\nfunction calcRelativeAxis(target, relative, parent) {\n  target.min = parent.min + relative.min;\n  target.max = target.min + calcLength(relative);\n}\n\nfunction calcRelativeBox(projection, parentProjection) {\n  calcRelativeAxis(projection.target.x, projection.relativeTarget.x, parentProjection.target.x);\n  calcRelativeAxis(projection.target.y, projection.relativeTarget.y, parentProjection.target.y);\n}\n\nexport { calcOrigin, calcRelativeAxis, calcRelativeBox, isNear, updateAxisDelta, updateBoxDelta };","var compareByDepth = function compareByDepth(a, b) {\n  return a.depth - b.depth;\n};\n\nexport { compareByDepth };","import sync from 'framesync';\nimport { copyAxisBox } from '../../../utils/geometry/index.js';\nimport { compareByDepth } from '../../utils/compare-by-depth.js';\n\nfunction isProjecting(visualElement) {\n  var isEnabled = visualElement.projection.isEnabled;\n  return isEnabled || visualElement.shouldResetTransform();\n}\n\nfunction collectProjectingAncestors(visualElement, ancestors) {\n  if (ancestors === void 0) {\n    ancestors = [];\n  }\n\n  var parent = visualElement.parent;\n  if (parent) collectProjectingAncestors(parent, ancestors);\n  if (isProjecting(visualElement)) ancestors.push(visualElement);\n  return ancestors;\n}\n\nfunction collectProjectingChildren(visualElement) {\n  var children = [];\n\n  var addChild = function addChild(child) {\n    if (isProjecting(child)) children.push(child);\n    child.children.forEach(addChild);\n  };\n\n  visualElement.children.forEach(addChild);\n  return children.sort(compareByDepth);\n}\n/**\n * Update the layoutState by measuring the DOM layout. This\n * should be called after resetting any layout-affecting transforms.\n */\n\n\nfunction updateLayoutMeasurement(visualElement) {\n  if (visualElement.shouldResetTransform()) return;\n  var layoutState = visualElement.getLayoutState();\n  visualElement.notifyBeforeLayoutMeasure(layoutState.layout);\n  layoutState.isHydrated = true;\n  layoutState.layout = visualElement.measureViewportBox();\n  layoutState.layoutCorrected = copyAxisBox(layoutState.layout);\n  visualElement.notifyLayoutMeasure(layoutState.layout, visualElement.prevViewportBox || layoutState.layout);\n  sync.update(function () {\n    return visualElement.rebaseProjectionTarget();\n  });\n}\n/**\n * Record the viewport box as it was before an expected mutation/re-render\n */\n\n\nfunction snapshotViewportBox(visualElement) {\n  if (visualElement.shouldResetTransform()) return;\n  visualElement.prevViewportBox = visualElement.measureViewportBox(false);\n  /**\n   * Update targetBox to match the prevViewportBox. This is just to ensure\n   * that targetBox is affected by scroll in the same way as the measured box\n   */\n\n  visualElement.rebaseProjectionTarget(false, visualElement.prevViewportBox);\n}\n\nexport { collectProjectingAncestors, collectProjectingChildren, snapshotViewportBox, updateLayoutMeasurement };","import { mix } from 'popmotion';\n\nfunction tweenAxis(target, prev, next, p) {\n  target.min = mix(prev.min, next.min, p);\n  target.max = mix(prev.max, next.max, p);\n}\n\nfunction calcRelativeOffsetAxis(parent, child) {\n  return {\n    min: child.min - parent.min,\n    max: child.max - parent.min\n  };\n}\n\nfunction calcRelativeOffset(parent, child) {\n  return {\n    x: calcRelativeOffsetAxis(parent.x, child.x),\n    y: calcRelativeOffsetAxis(parent.y, child.y)\n  };\n}\n\nfunction checkIfParentHasChanged(prev, next) {\n  var prevId = prev.getLayoutId();\n  var nextId = next.getLayoutId();\n  return prevId !== nextId || nextId === undefined && prev !== next;\n}\n\nexport { calcRelativeOffset, calcRelativeOffsetAxis, checkIfParentHasChanged, tweenAxis };","function isDraggable(visualElement) {\n  var _a = visualElement.getProps(),\n      drag = _a.drag,\n      _dragX = _a._dragX;\n\n  return drag && !_dragX;\n}\n\nexport { isDraggable };","import { __read } from 'tslib';\nimport { mix } from 'popmotion';\nimport { isDraggable } from '../../render/utils/is-draggable.js';\n/**\n * Reset an axis to the provided origin box.\n *\n * This is a mutative operation.\n */\n\nfunction resetAxis(axis, originAxis) {\n  axis.min = originAxis.min;\n  axis.max = originAxis.max;\n}\n/**\n * Reset a box to the provided origin box.\n *\n * This is a mutative operation.\n */\n\n\nfunction resetBox(box, originBox) {\n  resetAxis(box.x, originBox.x);\n  resetAxis(box.y, originBox.y);\n}\n/**\n * Scales a point based on a factor and an originPoint\n */\n\n\nfunction scalePoint(point, scale, originPoint) {\n  var distanceFromOrigin = point - originPoint;\n  var scaled = scale * distanceFromOrigin;\n  return originPoint + scaled;\n}\n/**\n * Applies a translate/scale delta to a point\n */\n\n\nfunction applyPointDelta(point, translate, scale, originPoint, boxScale) {\n  if (boxScale !== undefined) {\n    point = scalePoint(point, boxScale, originPoint);\n  }\n\n  return scalePoint(point, scale, originPoint) + translate;\n}\n/**\n * Applies a translate/scale delta to an axis\n */\n\n\nfunction applyAxisDelta(axis, translate, scale, originPoint, boxScale) {\n  if (translate === void 0) {\n    translate = 0;\n  }\n\n  if (scale === void 0) {\n    scale = 1;\n  }\n\n  axis.min = applyPointDelta(axis.min, translate, scale, originPoint, boxScale);\n  axis.max = applyPointDelta(axis.max, translate, scale, originPoint, boxScale);\n}\n/**\n * Applies a translate/scale delta to a box\n */\n\n\nfunction applyBoxDelta(box, _a) {\n  var x = _a.x,\n      y = _a.y;\n  applyAxisDelta(box.x, x.translate, x.scale, x.originPoint);\n  applyAxisDelta(box.y, y.translate, y.scale, y.originPoint);\n}\n/**\n * Apply a transform to an axis from the latest resolved motion values.\n * This function basically acts as a bridge between a flat motion value map\n * and applyAxisDelta\n */\n\n\nfunction applyAxisTransforms(final, axis, transforms, _a) {\n  var _b = __read(_a, 3),\n      key = _b[0],\n      scaleKey = _b[1],\n      originKey = _b[2]; // Copy the current axis to the final axis before mutation\n\n\n  final.min = axis.min;\n  final.max = axis.max;\n  var axisOrigin = transforms[originKey] !== undefined ? transforms[originKey] : 0.5;\n  var originPoint = mix(axis.min, axis.max, axisOrigin); // Apply the axis delta to the final axis\n\n  applyAxisDelta(final, transforms[key], transforms[scaleKey], originPoint, transforms.scale);\n}\n/**\n * The names of the motion values we want to apply as translation, scale and origin.\n */\n\n\nvar xKeys = [\"x\", \"scaleX\", \"originX\"];\nvar yKeys = [\"y\", \"scaleY\", \"originY\"];\n/**\n * Apply a transform to a box from the latest resolved motion values.\n */\n\nfunction applyBoxTransforms(finalBox, box, transforms) {\n  applyAxisTransforms(finalBox.x, box.x, transforms, xKeys);\n  applyAxisTransforms(finalBox.y, box.y, transforms, yKeys);\n}\n/**\n * Remove a delta from a point. This is essentially the steps of applyPointDelta in reverse\n */\n\n\nfunction removePointDelta(point, translate, scale, originPoint, boxScale) {\n  point -= translate;\n  point = scalePoint(point, 1 / scale, originPoint);\n\n  if (boxScale !== undefined) {\n    point = scalePoint(point, 1 / boxScale, originPoint);\n  }\n\n  return point;\n}\n/**\n * Remove a delta from an axis. This is essentially the steps of applyAxisDelta in reverse\n */\n\n\nfunction removeAxisDelta(axis, translate, scale, origin, boxScale) {\n  if (translate === void 0) {\n    translate = 0;\n  }\n\n  if (scale === void 0) {\n    scale = 1;\n  }\n\n  if (origin === void 0) {\n    origin = 0.5;\n  }\n\n  var originPoint = mix(axis.min, axis.max, origin) - translate;\n  axis.min = removePointDelta(axis.min, translate, scale, originPoint, boxScale);\n  axis.max = removePointDelta(axis.max, translate, scale, originPoint, boxScale);\n}\n/**\n * Remove a transforms from an axis. This is essentially the steps of applyAxisTransforms in reverse\n * and acts as a bridge between motion values and removeAxisDelta\n */\n\n\nfunction removeAxisTransforms(axis, transforms, _a) {\n  var _b = __read(_a, 3),\n      key = _b[0],\n      scaleKey = _b[1],\n      originKey = _b[2];\n\n  removeAxisDelta(axis, transforms[key], transforms[scaleKey], transforms[originKey], transforms.scale);\n}\n/**\n * Remove a transforms from an box. This is essentially the steps of applyAxisBox in reverse\n * and acts as a bridge between motion values and removeAxisDelta\n */\n\n\nfunction removeBoxTransforms(box, transforms) {\n  removeAxisTransforms(box.x, transforms, xKeys);\n  removeAxisTransforms(box.y, transforms, yKeys);\n}\n/**\n * Apply a tree of deltas to a box. We do this to calculate the effect of all the transforms\n * in a tree upon our box before then calculating how to project it into our desired viewport-relative box\n *\n * This is the final nested loop within updateLayoutDelta for future refactoring\n */\n\n\nfunction applyTreeDeltas(box, treeScale, treePath) {\n  var treeLength = treePath.length;\n  if (!treeLength) return; // Reset the treeScale\n\n  treeScale.x = treeScale.y = 1;\n  var node;\n  var delta;\n\n  for (var i = 0; i < treeLength; i++) {\n    node = treePath[i];\n    delta = node.getLayoutState().delta; // Incoporate each ancestor's scale into a culmulative treeScale for this component\n\n    treeScale.x *= delta.x.scale;\n    treeScale.y *= delta.y.scale; // Apply each ancestor's calculated delta into this component's recorded layout box\n\n    applyBoxDelta(box, delta); // If this is a draggable ancestor, also incorporate the node's transform to the layout box\n\n    if (isDraggable(node)) {\n      applyBoxTransforms(box, box, node.getLatestValues());\n    }\n  }\n}\n\nexport { applyAxisDelta, applyAxisTransforms, applyBoxDelta, applyBoxTransforms, applyPointDelta, applyTreeDeltas, removeAxisDelta, removeAxisTransforms, removeBoxTransforms, removePointDelta, resetAxis, resetBox, scalePoint };","var unresolvedJobs = new Set();\n\nfunction pushJob(stack, job, pointer) {\n  if (!stack[pointer]) stack[pointer] = [];\n  stack[pointer].push(job);\n}\n\nfunction batchLayout(callback) {\n  unresolvedJobs.add(callback);\n  return function () {\n    return unresolvedJobs.delete(callback);\n  };\n}\n\nfunction flushLayout() {\n  if (!unresolvedJobs.size) return;\n  var pointer = 0;\n  var reads = [[]];\n  var writes = [];\n\n  var setRead = function setRead(job) {\n    return pushJob(reads, job, pointer);\n  };\n\n  var setWrite = function setWrite(job) {\n    pushJob(writes, job, pointer);\n    pointer++;\n  };\n  /**\n   * Resolve jobs into their array stacks\n   */\n\n\n  unresolvedJobs.forEach(function (callback) {\n    callback(setRead, setWrite);\n    pointer = 0;\n  });\n  unresolvedJobs.clear();\n  /**\n   * Execute jobs\n   */\n\n  var numStacks = writes.length;\n\n  for (var i = 0; i <= numStacks; i++) {\n    reads[i] && reads[i].forEach(executeJob);\n    writes[i] && writes[i].forEach(executeJob);\n  }\n}\n\nvar executeJob = function executeJob(job) {\n  return job();\n};\n\nexport { batchLayout, flushLayout };","import { __rest, __assign, __spreadArray, __read } from 'tslib';\nimport { invariant } from 'hey-listen';\nimport { PanSession } from '../PanSession.js';\nimport { getGlobalLock } from './utils/lock.js';\nimport { isRefObject } from '../../utils/is-ref-object.js';\nimport { addPointerEvent } from '../../events/use-pointer-event.js';\nimport { addDomEvent } from '../../events/use-dom-event.js';\nimport { getViewportPointFromEvent } from '../../events/event-info.js';\nimport { axisBox, convertAxisBoxToBoundingBox, convertBoundingBoxToAxisBox } from '../../utils/geometry/index.js';\nimport { eachAxis } from '../../utils/each-axis.js';\nimport { calcRelativeConstraints, resolveDragElastic, rebaseAxisConstraints, calcViewportConstraints, applyConstraints, calcConstrainedMinPoint, calcPositionFromProgress, defaultElastic } from './utils/constraints.js';\nimport { getBoundingBox } from '../../render/dom/projection/measure.js';\nimport { calcOrigin } from '../../utils/geometry/delta-calc.js';\nimport { startAnimation } from '../../animation/utils/transitions.js';\nimport { AnimationType } from '../../render/utils/types.js';\nimport { collectProjectingAncestors, updateLayoutMeasurement, collectProjectingChildren } from '../../render/dom/projection/utils.js';\nimport { progress } from 'popmotion';\nimport { convertToRelativeProjection } from '../../render/dom/projection/convert-to-relative.js';\nimport { calcRelativeOffset } from '../../motion/features/layout/utils.js';\nimport { flushLayout, batchLayout } from '../../render/dom/utils/batch-layout.js';\nimport { flushSync } from 'framesync';\nvar elementDragControls = new WeakMap();\n/**\n *\n */\n\nvar lastPointerEvent;\n\nvar VisualElementDragControls = function () {\n  function VisualElementDragControls(_a) {\n    var visualElement = _a.visualElement;\n    /**\n     * Track whether we're currently dragging.\n     *\n     * @internal\n     */\n\n    this.isDragging = false;\n    /**\n     * The current direction of drag, or `null` if both.\n     *\n     * @internal\n     */\n\n    this.currentDirection = null;\n    /**\n     * The permitted boundaries of travel, in pixels.\n     *\n     * @internal\n     */\n\n    this.constraints = false;\n    /**\n     * The per-axis resolved elastic values.\n     *\n     * @internal\n     */\n\n    this.elastic = axisBox();\n    /**\n     * A reference to the host component's latest props.\n     *\n     * @internal\n     */\n\n    this.props = {};\n    /**\n     * @internal\n     */\n\n    this.hasMutatedConstraints = false;\n    /**\n     * Track the initial position of the cursor relative to the dragging element\n     * when dragging starts as a value of 0-1 on each axis. We then use this to calculate\n     * an ideal bounding box for the VisualElement renderer to project into every frame.\n     *\n     * @internal\n     */\n\n    this.cursorProgress = {\n      x: 0.5,\n      y: 0.5\n    }; // When updating _dragX, or _dragY instead of the VisualElement,\n    // persist their values between drag gestures.\n\n    this.originPoint = {}; // This is a reference to the global drag gesture lock, ensuring only one component\n    // can \"capture\" the drag of one or both axes.\n    // TODO: Look into moving this into pansession?\n\n    this.openGlobalLock = null;\n    /**\n     * @internal\n     */\n\n    this.panSession = null;\n    this.visualElement = visualElement;\n    this.visualElement.enableLayoutProjection();\n    elementDragControls.set(visualElement, this);\n  }\n  /**\n   * Instantiate a PanSession for the drag gesture\n   *\n   * @public\n   */\n\n\n  VisualElementDragControls.prototype.start = function (originEvent, _a) {\n    var _this = this;\n\n    var _b = _a === void 0 ? {} : _a,\n        _c = _b.snapToCursor,\n        snapToCursor = _c === void 0 ? false : _c,\n        cursorProgress = _b.cursorProgress;\n\n    var onSessionStart = function onSessionStart(event) {\n      var _a; // Stop any animations on both axis values immediately. This allows the user to throw and catch\n      // the component.\n\n\n      _this.stopMotion();\n      /**\n       * Save the initial point. We'll use this to calculate the pointer's position rather\n       * than the one we receive when the gesture actually starts. By then, the pointer will\n       * have already moved, and the perception will be of the pointer \"slipping\" across the element\n       */\n\n\n      var initialPoint = getViewportPointFromEvent(event).point;\n      (_a = _this.cancelLayout) === null || _a === void 0 ? void 0 : _a.call(_this);\n      _this.cancelLayout = batchLayout(function (read, write) {\n        var ancestors = collectProjectingAncestors(_this.visualElement);\n        var children = collectProjectingChildren(_this.visualElement);\n\n        var tree = __spreadArray(__spreadArray([], __read(ancestors)), __read(children));\n\n        var hasManuallySetCursorOrigin = false;\n        /**\n         * Apply a simple lock to the projection target. This ensures no animations\n         * can run on the projection box while this lock is active.\n         */\n\n        _this.isLayoutDrag() && _this.visualElement.lockProjectionTarget();\n        write(function () {\n          tree.forEach(function (element) {\n            return element.resetTransform();\n          });\n        });\n        read(function () {\n          updateLayoutMeasurement(_this.visualElement);\n          children.forEach(updateLayoutMeasurement);\n        });\n        write(function () {\n          tree.forEach(function (element) {\n            return element.restoreTransform();\n          });\n\n          if (snapToCursor) {\n            hasManuallySetCursorOrigin = _this.snapToCursor(initialPoint);\n          }\n        });\n        read(function () {\n          var isRelativeDrag = Boolean(_this.getAxisMotionValue(\"x\") && !_this.isExternalDrag());\n\n          if (!isRelativeDrag) {\n            _this.visualElement.rebaseProjectionTarget(true, _this.visualElement.measureViewportBox(false));\n          }\n\n          _this.visualElement.scheduleUpdateLayoutProjection();\n          /**\n           * When dragging starts, we want to find where the cursor is relative to the bounding box\n           * of the element. Every frame, we calculate a new bounding box using this relative position\n           * and let the visualElement renderer figure out how to reproject the element into this bounding\n           * box.\n           *\n           * By doing it this way, rather than applying an x/y transform directly to the element,\n           * we can ensure the component always visually sticks to the cursor as we'd expect, even\n           * if the DOM element itself changes layout as a result of React updates the user might\n           * make based on the drag position.\n           */\n\n\n          var projection = _this.visualElement.projection;\n          eachAxis(function (axis) {\n            if (!hasManuallySetCursorOrigin) {\n              var _a = projection.target[axis],\n                  min = _a.min,\n                  max = _a.max;\n              _this.cursorProgress[axis] = cursorProgress ? cursorProgress[axis] : progress(min, max, initialPoint[axis]);\n            }\n            /**\n             * If we have external drag MotionValues, record their origin point. On pointermove\n             * we'll apply the pan gesture offset directly to this value.\n             */\n\n\n            var axisValue = _this.getAxisMotionValue(axis);\n\n            if (axisValue) {\n              _this.originPoint[axis] = axisValue.get();\n            }\n          });\n        });\n        write(function () {\n          flushSync.update();\n          flushSync.preRender();\n          flushSync.render();\n          flushSync.postRender();\n        });\n        read(function () {\n          return _this.resolveDragConstraints();\n        });\n      });\n    };\n\n    var onStart = function onStart(event, info) {\n      var _a, _b, _c; // Attempt to grab the global drag gesture lock - maybe make this part of PanSession\n\n\n      var _d = _this.props,\n          drag = _d.drag,\n          dragPropagation = _d.dragPropagation;\n\n      if (drag && !dragPropagation) {\n        if (_this.openGlobalLock) _this.openGlobalLock();\n        _this.openGlobalLock = getGlobalLock(drag); // If we don 't have the lock, don't start dragging\n\n        if (!_this.openGlobalLock) return;\n      }\n\n      flushLayout(); // Set current drag status\n\n      _this.isDragging = true;\n      _this.currentDirection = null; // Fire onDragStart event\n\n      (_b = (_a = _this.props).onDragStart) === null || _b === void 0 ? void 0 : _b.call(_a, event, info);\n      (_c = _this.visualElement.animationState) === null || _c === void 0 ? void 0 : _c.setActive(AnimationType.Drag, true);\n    };\n\n    var onMove = function onMove(event, info) {\n      var _a, _b, _c, _d;\n\n      var _e = _this.props,\n          dragPropagation = _e.dragPropagation,\n          dragDirectionLock = _e.dragDirectionLock; // If we didn't successfully receive the gesture lock, early return.\n\n      if (!dragPropagation && !_this.openGlobalLock) return;\n      var offset = info.offset; // Attempt to detect drag direction if directionLock is true\n\n      if (dragDirectionLock && _this.currentDirection === null) {\n        _this.currentDirection = getCurrentDirection(offset); // If we've successfully set a direction, notify listener\n\n        if (_this.currentDirection !== null) {\n          (_b = (_a = _this.props).onDirectionLock) === null || _b === void 0 ? void 0 : _b.call(_a, _this.currentDirection);\n        }\n\n        return;\n      } // Update each point with the latest position\n\n\n      _this.updateAxis(\"x\", info.point, offset);\n\n      _this.updateAxis(\"y\", info.point, offset); // Fire onDrag event\n\n\n      (_d = (_c = _this.props).onDrag) === null || _d === void 0 ? void 0 : _d.call(_c, event, info); // Update the last pointer event\n\n      lastPointerEvent = event;\n    };\n\n    var onSessionEnd = function onSessionEnd(event, info) {\n      return _this.stop(event, info);\n    };\n\n    var transformPagePoint = this.props.transformPagePoint;\n    this.panSession = new PanSession(originEvent, {\n      onSessionStart: onSessionStart,\n      onStart: onStart,\n      onMove: onMove,\n      onSessionEnd: onSessionEnd\n    }, {\n      transformPagePoint: transformPagePoint\n    });\n  };\n\n  VisualElementDragControls.prototype.resolveDragConstraints = function () {\n    var _this = this;\n\n    var _a = this.props,\n        dragConstraints = _a.dragConstraints,\n        dragElastic = _a.dragElastic;\n    var layout = this.visualElement.getLayoutState().layoutCorrected;\n\n    if (dragConstraints) {\n      this.constraints = isRefObject(dragConstraints) ? this.resolveRefConstraints(layout, dragConstraints) : calcRelativeConstraints(layout, dragConstraints);\n    } else {\n      this.constraints = false;\n    }\n\n    this.elastic = resolveDragElastic(dragElastic);\n    /**\n     * If we're outputting to external MotionValues, we want to rebase the measured constraints\n     * from viewport-relative to component-relative.\n     */\n\n    if (this.constraints && !this.hasMutatedConstraints) {\n      eachAxis(function (axis) {\n        if (_this.getAxisMotionValue(axis)) {\n          _this.constraints[axis] = rebaseAxisConstraints(layout[axis], _this.constraints[axis]);\n        }\n      });\n    }\n  };\n\n  VisualElementDragControls.prototype.resolveRefConstraints = function (layoutBox, constraints) {\n    var _a = this.props,\n        onMeasureDragConstraints = _a.onMeasureDragConstraints,\n        transformPagePoint = _a.transformPagePoint;\n    var constraintsElement = constraints.current;\n    invariant(constraintsElement !== null, \"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.\");\n    this.constraintsBox = getBoundingBox(constraintsElement, transformPagePoint);\n    var measuredConstraints = calcViewportConstraints(layoutBox, this.constraintsBox);\n    /**\n     * If there's an onMeasureDragConstraints listener we call it and\n     * if different constraints are returned, set constraints to that\n     */\n\n    if (onMeasureDragConstraints) {\n      var userConstraints = onMeasureDragConstraints(convertAxisBoxToBoundingBox(measuredConstraints));\n      this.hasMutatedConstraints = !!userConstraints;\n\n      if (userConstraints) {\n        measuredConstraints = convertBoundingBoxToAxisBox(userConstraints);\n      }\n    }\n\n    return measuredConstraints;\n  };\n\n  VisualElementDragControls.prototype.cancelDrag = function () {\n    var _a, _b;\n\n    this.visualElement.unlockProjectionTarget();\n    (_a = this.cancelLayout) === null || _a === void 0 ? void 0 : _a.call(this);\n    this.isDragging = false;\n    this.panSession && this.panSession.end();\n    this.panSession = null;\n\n    if (!this.props.dragPropagation && this.openGlobalLock) {\n      this.openGlobalLock();\n      this.openGlobalLock = null;\n    }\n\n    (_b = this.visualElement.animationState) === null || _b === void 0 ? void 0 : _b.setActive(AnimationType.Drag, false);\n  };\n\n  VisualElementDragControls.prototype.stop = function (event, info) {\n    var _a, _b, _c;\n\n    (_a = this.panSession) === null || _a === void 0 ? void 0 : _a.end();\n    this.panSession = null;\n    var isDragging = this.isDragging;\n    this.cancelDrag();\n    if (!isDragging) return;\n    var velocity = info.velocity;\n    this.animateDragEnd(velocity);\n    (_c = (_b = this.props).onDragEnd) === null || _c === void 0 ? void 0 : _c.call(_b, event, info);\n  };\n\n  VisualElementDragControls.prototype.snapToCursor = function (point) {\n    var _this = this;\n\n    return eachAxis(function (axis) {\n      var drag = _this.props.drag; // If we're not dragging this axis, do an early return.\n\n      if (!shouldDrag(axis, drag, _this.currentDirection)) return;\n\n      var axisValue = _this.getAxisMotionValue(axis);\n\n      if (axisValue) {\n        var box = _this.visualElement.getLayoutState().layout;\n\n        var length_1 = box[axis].max - box[axis].min;\n        var center = box[axis].min + length_1 / 2;\n        var offset = point[axis] - center;\n        _this.originPoint[axis] = point[axis];\n        axisValue.set(offset);\n      } else {\n        _this.cursorProgress[axis] = 0.5;\n        return true;\n      }\n    }).includes(true);\n  };\n  /**\n   * Update the specified axis with the latest pointer information.\n   */\n\n\n  VisualElementDragControls.prototype.updateAxis = function (axis, point, offset) {\n    var drag = this.props.drag; // If we're not dragging this axis, do an early return.\n\n    if (!shouldDrag(axis, drag, this.currentDirection)) return;\n    return this.getAxisMotionValue(axis) ? this.updateAxisMotionValue(axis, offset) : this.updateVisualElementAxis(axis, point);\n  };\n\n  VisualElementDragControls.prototype.updateAxisMotionValue = function (axis, offset) {\n    var axisValue = this.getAxisMotionValue(axis);\n    if (!offset || !axisValue) return;\n    var nextValue = this.originPoint[axis] + offset[axis];\n    var update = this.constraints ? applyConstraints(nextValue, this.constraints[axis], this.elastic[axis]) : nextValue;\n    axisValue.set(update);\n  };\n\n  VisualElementDragControls.prototype.updateVisualElementAxis = function (axis, point) {\n    var _a; // Get the actual layout bounding box of the element\n\n\n    var axisLayout = this.visualElement.getLayoutState().layout[axis]; // Calculate its current length. In the future we might want to lerp this to animate\n    // between lengths if the layout changes as we change the DOM\n\n    var axisLength = axisLayout.max - axisLayout.min; // Get the initial progress that the pointer sat on this axis on gesture start.\n\n    var axisProgress = this.cursorProgress[axis]; // Calculate a new min point based on the latest pointer position, constraints and elastic\n\n    var min = calcConstrainedMinPoint(point[axis], axisLength, axisProgress, (_a = this.constraints) === null || _a === void 0 ? void 0 : _a[axis], this.elastic[axis]); // Update the axis viewport target with this new min and the length\n\n    this.visualElement.setProjectionTargetAxis(axis, min, min + axisLength);\n  };\n\n  VisualElementDragControls.prototype.setProps = function (_a) {\n    var _b = _a.drag,\n        drag = _b === void 0 ? false : _b,\n        _c = _a.dragDirectionLock,\n        dragDirectionLock = _c === void 0 ? false : _c,\n        _d = _a.dragPropagation,\n        dragPropagation = _d === void 0 ? false : _d,\n        _e = _a.dragConstraints,\n        dragConstraints = _e === void 0 ? false : _e,\n        _f = _a.dragElastic,\n        dragElastic = _f === void 0 ? defaultElastic : _f,\n        _g = _a.dragMomentum,\n        dragMomentum = _g === void 0 ? true : _g,\n        remainingProps = __rest(_a, [\"drag\", \"dragDirectionLock\", \"dragPropagation\", \"dragConstraints\", \"dragElastic\", \"dragMomentum\"]);\n\n    this.props = __assign({\n      drag: drag,\n      dragDirectionLock: dragDirectionLock,\n      dragPropagation: dragPropagation,\n      dragConstraints: dragConstraints,\n      dragElastic: dragElastic,\n      dragMomentum: dragMomentum\n    }, remainingProps);\n  };\n  /**\n   * Drag works differently depending on which props are provided.\n   *\n   * - If _dragX and _dragY are provided, we output the gesture delta directly to those motion values.\n   * - If the component will perform layout animations, we output the gesture to the component's\n   *      visual bounding box\n   * - Otherwise, we apply the delta to the x/y motion values.\n   */\n\n\n  VisualElementDragControls.prototype.getAxisMotionValue = function (axis) {\n    var _a = this.props,\n        layout = _a.layout,\n        layoutId = _a.layoutId;\n    var dragKey = \"_drag\" + axis.toUpperCase();\n\n    if (this.props[dragKey]) {\n      return this.props[dragKey];\n    } else if (!layout && layoutId === undefined) {\n      return this.visualElement.getValue(axis, 0);\n    }\n  };\n\n  VisualElementDragControls.prototype.isLayoutDrag = function () {\n    return !this.getAxisMotionValue(\"x\");\n  };\n\n  VisualElementDragControls.prototype.isExternalDrag = function () {\n    var _a = this.props,\n        _dragX = _a._dragX,\n        _dragY = _a._dragY;\n    return _dragX || _dragY;\n  };\n\n  VisualElementDragControls.prototype.animateDragEnd = function (velocity) {\n    var _this = this;\n\n    var _a = this.props,\n        drag = _a.drag,\n        dragMomentum = _a.dragMomentum,\n        dragElastic = _a.dragElastic,\n        dragTransition = _a.dragTransition;\n    /**\n     * Everything beyond the drag gesture should be performed with\n     * relative projection so children stay in sync with their parent element.\n     */\n\n    var isRelative = convertToRelativeProjection(this.visualElement, this.isLayoutDrag() && !this.isExternalDrag());\n    /**\n     * If we had previously resolved constraints relative to the viewport,\n     * we need to also convert those to a relative coordinate space for the animation\n     */\n\n    var constraints = this.constraints || {};\n\n    if (isRelative && Object.keys(constraints).length && this.isLayoutDrag()) {\n      var projectionParent = this.visualElement.getProjectionParent();\n\n      if (projectionParent) {\n        var relativeConstraints_1 = calcRelativeOffset(projectionParent.projection.targetFinal, constraints);\n        eachAxis(function (axis) {\n          var _a = relativeConstraints_1[axis],\n              min = _a.min,\n              max = _a.max;\n          constraints[axis] = {\n            min: isNaN(min) ? undefined : min,\n            max: isNaN(max) ? undefined : max\n          };\n        });\n      }\n    }\n\n    var momentumAnimations = eachAxis(function (axis) {\n      var _a;\n\n      if (!shouldDrag(axis, drag, _this.currentDirection)) {\n        return;\n      }\n\n      var transition = (_a = constraints === null || constraints === void 0 ? void 0 : constraints[axis]) !== null && _a !== void 0 ? _a : {};\n      /**\n       * Overdamp the boundary spring if `dragElastic` is disabled. There's still a frame\n       * of spring animations so we should look into adding a disable spring option to `inertia`.\n       * We could do something here where we affect the `bounceStiffness` and `bounceDamping`\n       * using the value of `dragElastic`.\n       */\n\n      var bounceStiffness = dragElastic ? 200 : 1000000;\n      var bounceDamping = dragElastic ? 40 : 10000000;\n\n      var inertia = __assign(__assign({\n        type: \"inertia\",\n        velocity: dragMomentum ? velocity[axis] : 0,\n        bounceStiffness: bounceStiffness,\n        bounceDamping: bounceDamping,\n        timeConstant: 750,\n        restDelta: 1,\n        restSpeed: 10\n      }, dragTransition), transition); // If we're not animating on an externally-provided `MotionValue` we can use the\n      // component's animation controls which will handle interactions with whileHover (etc),\n      // otherwise we just have to animate the `MotionValue` itself.\n\n\n      return _this.getAxisMotionValue(axis) ? _this.startAxisValueAnimation(axis, inertia) : _this.visualElement.startLayoutAnimation(axis, inertia, isRelative);\n    }); // Run all animations and then resolve the new drag constraints.\n\n    return Promise.all(momentumAnimations).then(function () {\n      var _a, _b;\n\n      (_b = (_a = _this.props).onDragTransitionEnd) === null || _b === void 0 ? void 0 : _b.call(_a);\n    });\n  };\n\n  VisualElementDragControls.prototype.stopMotion = function () {\n    var _this = this;\n\n    eachAxis(function (axis) {\n      var axisValue = _this.getAxisMotionValue(axis);\n\n      axisValue ? axisValue.stop() : _this.visualElement.stopLayoutAnimation();\n    });\n  };\n\n  VisualElementDragControls.prototype.startAxisValueAnimation = function (axis, transition) {\n    var axisValue = this.getAxisMotionValue(axis);\n    if (!axisValue) return;\n    var currentValue = axisValue.get();\n    axisValue.set(currentValue);\n    axisValue.set(currentValue); // Set twice to hard-reset velocity\n\n    return startAnimation(axis, axisValue, 0, transition);\n  };\n\n  VisualElementDragControls.prototype.scalePoint = function () {\n    var _this = this;\n\n    var _a = this.props,\n        drag = _a.drag,\n        dragConstraints = _a.dragConstraints;\n    if (!isRefObject(dragConstraints) || !this.constraintsBox) return; // Stop any current animations as there can be some visual glitching if we resize mid animation\n\n    this.stopMotion(); // Record the relative progress of the targetBox relative to the constraintsBox\n\n    var boxProgress = {\n      x: 0,\n      y: 0\n    };\n    eachAxis(function (axis) {\n      boxProgress[axis] = calcOrigin(_this.visualElement.projection.target[axis], _this.constraintsBox[axis]);\n    });\n    /**\n     * For each axis, calculate the current progress of the layout axis within the constraints.\n     * Then, using the latest layout and constraints measurements, reposition the new layout axis\n     * proportionally within the constraints.\n     */\n\n    this.updateConstraints(function () {\n      eachAxis(function (axis) {\n        if (!shouldDrag(axis, drag, null)) return; // Calculate the position of the targetBox relative to the constraintsBox using the\n        // previously calculated progress\n\n        var _a = calcPositionFromProgress(_this.visualElement.projection.target[axis], _this.constraintsBox[axis], boxProgress[axis]),\n            min = _a.min,\n            max = _a.max;\n\n        _this.visualElement.setProjectionTargetAxis(axis, min, max);\n      });\n    });\n    /**\n     * If any other draggable components are queuing the same tasks synchronously\n     * this will wait until they've all been scheduled before flushing.\n     */\n\n    setTimeout(flushLayout, 1);\n  };\n\n  VisualElementDragControls.prototype.updateConstraints = function (onReady) {\n    var _this = this;\n\n    this.cancelLayout = batchLayout(function (read, write) {\n      var ancestors = collectProjectingAncestors(_this.visualElement);\n      write(function () {\n        return ancestors.forEach(function (element) {\n          return element.resetTransform();\n        });\n      });\n      read(function () {\n        return updateLayoutMeasurement(_this.visualElement);\n      });\n      write(function () {\n        return ancestors.forEach(function (element) {\n          return element.restoreTransform();\n        });\n      });\n      read(function () {\n        _this.resolveDragConstraints();\n      });\n      if (onReady) write(onReady);\n    });\n  };\n\n  VisualElementDragControls.prototype.mount = function (visualElement) {\n    var _this = this;\n\n    var element = visualElement.getInstance();\n    /**\n     * Attach a pointerdown event listener on this DOM element to initiate drag tracking.\n     */\n\n    var stopPointerListener = addPointerEvent(element, \"pointerdown\", function (event) {\n      var _a = _this.props,\n          drag = _a.drag,\n          _b = _a.dragListener,\n          dragListener = _b === void 0 ? true : _b;\n      drag && dragListener && _this.start(event);\n    });\n    /**\n     * Attach a window resize listener to scale the draggable target within its defined\n     * constraints as the window resizes.\n     */\n\n    var stopResizeListener = addDomEvent(window, \"resize\", function () {\n      _this.scalePoint();\n    });\n    /**\n     * Ensure drag constraints are resolved correctly relative to the dragging element\n     * whenever its layout changes.\n     */\n\n    var stopLayoutUpdateListener = visualElement.onLayoutUpdate(function () {\n      if (_this.isDragging) {\n        _this.resolveDragConstraints();\n      }\n    });\n    /**\n     * If the previous component with this same layoutId was dragging at the time\n     * it was unmounted, we want to continue the same gesture on this component.\n     */\n\n    var prevDragCursor = visualElement.prevDragCursor;\n\n    if (prevDragCursor) {\n      this.start(lastPointerEvent, {\n        cursorProgress: prevDragCursor\n      });\n    }\n    /**\n     * Return a function that will teardown the drag gesture\n     */\n\n\n    return function () {\n      stopPointerListener === null || stopPointerListener === void 0 ? void 0 : stopPointerListener();\n      stopResizeListener === null || stopResizeListener === void 0 ? void 0 : stopResizeListener();\n      stopLayoutUpdateListener === null || stopLayoutUpdateListener === void 0 ? void 0 : stopLayoutUpdateListener();\n\n      _this.cancelDrag();\n    };\n  };\n\n  return VisualElementDragControls;\n}();\n\nfunction shouldDrag(direction, drag, currentDirection) {\n  return (drag === true || drag === direction) && (currentDirection === null || currentDirection === direction);\n}\n/**\n * Based on an x/y offset determine the current drag direction. If both axis' offsets are lower\n * than the provided threshold, return `null`.\n *\n * @param offset - The x/y offset from origin.\n * @param lockThreshold - (Optional) - the minimum absolute offset before we can determine a drag direction.\n */\n\n\nfunction getCurrentDirection(offset, lockThreshold) {\n  if (lockThreshold === void 0) {\n    lockThreshold = 10;\n  }\n\n  var direction = null;\n\n  if (Math.abs(offset.y) > lockThreshold) {\n    direction = \"y\";\n  } else if (Math.abs(offset.x) > lockThreshold) {\n    direction = \"x\";\n  }\n\n  return direction;\n}\n\nexport { VisualElementDragControls, elementDragControls };","import { calcRelativeOffset } from '../../../motion/features/layout/utils.js';\nimport { eachAxis } from '../../../utils/each-axis.js';\nimport { removeBoxTransforms } from '../../../utils/geometry/delta-apply.js';\n/**\n * Returns a boolean stating whether or not we converted the projection\n * to relative projection.\n */\n\nfunction convertToRelativeProjection(visualElement, isLayoutDrag) {\n  if (isLayoutDrag === void 0) {\n    isLayoutDrag = true;\n  }\n\n  var projectionParent = visualElement.getProjectionParent();\n  if (!projectionParent) return false;\n  var offset;\n\n  if (isLayoutDrag) {\n    offset = calcRelativeOffset(projectionParent.projection.target, visualElement.projection.target);\n    removeBoxTransforms(offset, projectionParent.getLatestValues());\n  } else {\n    offset = calcRelativeOffset(projectionParent.getLayoutState().layout, visualElement.getLayoutState().layout);\n  }\n\n  eachAxis(function (axis) {\n    return visualElement.setProjectionTargetAxis(axis, offset[axis].min, offset[axis].max, true);\n  });\n  return true;\n}\n\nexport { convertToRelativeProjection };","import { useDrag } from '../../gestures/drag/use-drag.js';\nimport { usePanGesture } from '../../gestures/use-pan-gesture.js';\nimport { makeRenderlessComponent } from '../utils/make-renderless-component.js';\nvar drag = {\n  pan: makeRenderlessComponent(usePanGesture),\n  drag: makeRenderlessComponent(useDrag)\n};\nexport { drag };","/**\n * @public\n */\nvar Presence;\n\n(function (Presence) {\n  Presence[Presence[\"Entering\"] = 0] = \"Entering\";\n  Presence[Presence[\"Present\"] = 1] = \"Present\";\n  Presence[Presence[\"Exiting\"] = 2] = \"Exiting\";\n})(Presence || (Presence = {}));\n/**\n * @public\n */\n\n\nvar VisibilityAction;\n\n(function (VisibilityAction) {\n  VisibilityAction[VisibilityAction[\"Hide\"] = 0] = \"Hide\";\n  VisibilityAction[VisibilityAction[\"Show\"] = 1] = \"Show\";\n})(VisibilityAction || (VisibilityAction = {}));\n\nexport { Presence, VisibilityAction };","import { useRef, useContext, useEffect } from 'react';\nimport { MotionConfigContext } from '../context/MotionConfigContext.js';\nimport { useUnmountEffect } from '../utils/use-unmount-effect.js';\nimport { usePointerEvent } from '../events/use-pointer-event.js';\nimport { PanSession } from './PanSession.js';\n/**\n *\n * @param handlers -\n * @param ref -\n *\n * @internalremarks\n * Currently this sets new pan gesture functions every render. The memo route has been explored\n * in the past but ultimately we're still creating new functions every render. An optimisation\n * to explore is creating the pan gestures and loading them into a `ref`.\n *\n * @internal\n */\n\nfunction usePanGesture(_a) {\n  var onPan = _a.onPan,\n      onPanStart = _a.onPanStart,\n      onPanEnd = _a.onPanEnd,\n      onPanSessionStart = _a.onPanSessionStart,\n      visualElement = _a.visualElement;\n  var hasPanEvents = onPan || onPanStart || onPanEnd || onPanSessionStart;\n  var panSession = useRef(null);\n  var transformPagePoint = useContext(MotionConfigContext).transformPagePoint;\n  var handlers = {\n    onSessionStart: onPanSessionStart,\n    onStart: onPanStart,\n    onMove: onPan,\n    onEnd: function onEnd(event, info) {\n      panSession.current = null;\n      onPanEnd && onPanEnd(event, info);\n    }\n  };\n  useEffect(function () {\n    if (panSession.current !== null) {\n      panSession.current.updateHandlers(handlers);\n    }\n  });\n\n  function onPointerDown(event) {\n    panSession.current = new PanSession(event, handlers, {\n      transformPagePoint: transformPagePoint\n    });\n  }\n\n  usePointerEvent(visualElement, \"pointerdown\", hasPanEvents && onPointerDown);\n  useUnmountEffect(function () {\n    return panSession.current && panSession.current.end();\n  });\n}\n\nexport { usePanGesture };","import { __assign } from 'tslib';\nimport { useContext, useEffect } from 'react';\nimport { MotionConfigContext } from '../../context/MotionConfigContext.js';\nimport { VisualElementDragControls } from './VisualElementDragControls.js';\nimport { useConstant } from '../../utils/use-constant.js';\n/**\n * A hook that allows an element to be dragged.\n *\n * @internal\n */\n\nfunction useDrag(props) {\n  var groupDragControls = props.dragControls,\n      visualElement = props.visualElement;\n  var transformPagePoint = useContext(MotionConfigContext).transformPagePoint;\n  var dragControls = useConstant(function () {\n    return new VisualElementDragControls({\n      visualElement: visualElement\n    });\n  });\n  dragControls.setProps(__assign(__assign({}, props), {\n    transformPagePoint: transformPagePoint\n  })); // If we've been provided a DragControls for manual control over the drag gesture,\n  // subscribe this component to it on mount.\n\n  useEffect(function () {\n    return groupDragControls && groupDragControls.subscribe(dragControls);\n  }, [dragControls]); // Mount the drag controls with the visualElement\n\n  useEffect(function () {\n    return dragControls.mount(visualElement);\n  }, []);\n}\n\nexport { useDrag };","import { __rest, __assign, __read } from 'tslib';\nimport { invariant } from 'hey-listen';\n\nfunction isCSSVariable(value) {\n  return typeof value === \"string\" && value.startsWith(\"var(--\");\n}\n/**\n * Parse Framer's special CSS variable format into a CSS token and a fallback.\n *\n * ```\n * `var(--foo, #fff)` => [`--foo`, '#fff']\n * ```\n *\n * @param current\n */\n\n\nvar cssVariableRegex = /var\\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\\)/;\n\nfunction parseCSSVariable(current) {\n  var match = cssVariableRegex.exec(current);\n  if (!match) return [,];\n\n  var _a = __read(match, 3),\n      token = _a[1],\n      fallback = _a[2];\n\n  return [token, fallback];\n}\n\nvar maxDepth = 4;\n\nfunction getVariableValue(current, element, depth) {\n  if (depth === void 0) {\n    depth = 1;\n  }\n\n  invariant(depth <= maxDepth, \"Max CSS variable fallback depth detected in property \\\"\" + current + \"\\\". This may indicate a circular fallback dependency.\");\n\n  var _a = __read(parseCSSVariable(current), 2),\n      token = _a[0],\n      fallback = _a[1]; // No CSS variable detected\n\n\n  if (!token) return; // Attempt to read this CSS variable off the element\n\n  var resolved = window.getComputedStyle(element).getPropertyValue(token);\n\n  if (resolved) {\n    return resolved.trim();\n  } else if (isCSSVariable(fallback)) {\n    // The fallback might itself be a CSS variable, in which case we attempt to resolve it too.\n    return getVariableValue(fallback, element, depth + 1);\n  } else {\n    return fallback;\n  }\n}\n/**\n * Resolve CSS variables from\n *\n * @internal\n */\n\n\nfunction resolveCSSVariables(visualElement, _a, transitionEnd) {\n  var _b;\n\n  var target = __rest(_a, []);\n\n  var element = visualElement.getInstance();\n  if (!(element instanceof HTMLElement)) return {\n    target: target,\n    transitionEnd: transitionEnd\n  }; // If `transitionEnd` isn't `undefined`, clone it. We could clone `target` and `transitionEnd`\n  // only if they change but I think this reads clearer and this isn't a performance-critical path.\n\n  if (transitionEnd) {\n    transitionEnd = __assign({}, transitionEnd);\n  } // Go through existing `MotionValue`s and ensure any existing CSS variables are resolved\n\n\n  visualElement.forEachValue(function (value) {\n    var current = value.get();\n    if (!isCSSVariable(current)) return;\n    var resolved = getVariableValue(current, element);\n    if (resolved) value.set(resolved);\n  }); // Cycle through every target property and resolve CSS variables. Currently\n  // we only read single-var properties like `var(--foo)`, not `calc(var(--foo) + 20px)`\n\n  for (var key in target) {\n    var current = target[key];\n    if (!isCSSVariable(current)) continue;\n    var resolved = getVariableValue(current, element);\n    if (!resolved) continue; // Clone target if it hasn't already been\n\n    target[key] = resolved; // If the user hasn't already set this key on `transitionEnd`, set it to the unresolved\n    // CSS variable. This will ensure that after the animation the component will reflect\n    // changes in the value of the CSS variable.\n\n    if (transitionEnd) (_b = transitionEnd[key]) !== null && _b !== void 0 ? _b : transitionEnd[key] = current;\n  }\n\n  return {\n    target: target,\n    transitionEnd: transitionEnd\n  };\n}\n\nexport { cssVariableRegex, parseCSSVariable, resolveCSSVariables };","import { __assign } from 'tslib';\nimport { complex, px } from 'style-value-types';\nimport { mix } from 'popmotion';\nimport { cssVariableRegex } from '../utils/css-variables-conversion.js';\n\nfunction pixelsToPercent(pixels, axis) {\n  return pixels / (axis.max - axis.min) * 100;\n}\n/**\n * We always correct borderRadius as a percentage rather than pixels to reduce paints.\n * For example, if you are projecting a box that is 100px wide with a 10px borderRadius\n * into a box that is 200px wide with a 20px borderRadius, that is actually a 10%\n * borderRadius in both states. If we animate between the two in pixels that will trigger\n * a paint each time. If we animate between the two in percentage we'll avoid a paint.\n */\n\n\nfunction correctBorderRadius(latest, _layoutState, _a) {\n  var target = _a.target;\n  /**\n   * If latest is a string, if it's a percentage we can return immediately as it's\n   * going to be stretched appropriately. Otherwise, if it's a pixel, convert it to a number.\n   */\n\n  if (typeof latest === \"string\") {\n    if (px.test(latest)) {\n      latest = parseFloat(latest);\n    } else {\n      return latest;\n    }\n  }\n  /**\n   * If latest is a number, it's a pixel value. We use the current viewportBox to calculate that\n   * pixel value as a percentage of each axis\n   */\n\n\n  var x = pixelsToPercent(latest, target.x);\n  var y = pixelsToPercent(latest, target.y);\n  return x + \"% \" + y + \"%\";\n}\n\nvar varToken = \"_$css\";\n\nfunction correctBoxShadow(latest, _a) {\n  var delta = _a.delta,\n      treeScale = _a.treeScale;\n  var original = latest;\n  /**\n   * We need to first strip and store CSS variables from the string.\n   */\n\n  var containsCSSVariables = latest.includes(\"var(\");\n  var cssVariables = [];\n\n  if (containsCSSVariables) {\n    latest = latest.replace(cssVariableRegex, function (match) {\n      cssVariables.push(match);\n      return varToken;\n    });\n  }\n\n  var shadow = complex.parse(latest); // TODO: Doesn't support multiple shadows\n\n  if (shadow.length > 5) return original;\n  var template = complex.createTransformer(latest);\n  var offset = typeof shadow[0] !== \"number\" ? 1 : 0; // Calculate the overall context scale\n\n  var xScale = delta.x.scale * treeScale.x;\n  var yScale = delta.y.scale * treeScale.y;\n  shadow[0 + offset] /= xScale;\n  shadow[1 + offset] /= yScale;\n  /**\n   * Ideally we'd correct x and y scales individually, but because blur and\n   * spread apply to both we have to take a scale average and apply that instead.\n   * We could potentially improve the outcome of this by incorporating the ratio between\n   * the two scales.\n   */\n\n  var averageScale = mix(xScale, yScale, 0.5); // Blur\n\n  if (typeof shadow[2 + offset] === \"number\") shadow[2 + offset] /= averageScale; // Spread\n\n  if (typeof shadow[3 + offset] === \"number\") shadow[3 + offset] /= averageScale;\n  var output = template(shadow);\n\n  if (containsCSSVariables) {\n    var i_1 = 0;\n    output = output.replace(varToken, function () {\n      var cssVariable = cssVariables[i_1];\n      i_1++;\n      return cssVariable;\n    });\n  }\n\n  return output;\n}\n\nvar borderCorrectionDefinition = {\n  process: correctBorderRadius\n};\nvar defaultScaleCorrectors = {\n  borderRadius: __assign(__assign({}, borderCorrectionDefinition), {\n    applyTo: [\"borderTopLeftRadius\", \"borderTopRightRadius\", \"borderBottomLeftRadius\", \"borderBottomRightRadius\"]\n  }),\n  borderTopLeftRadius: borderCorrectionDefinition,\n  borderTopRightRadius: borderCorrectionDefinition,\n  borderBottomLeftRadius: borderCorrectionDefinition,\n  borderBottomRightRadius: borderCorrectionDefinition,\n  boxShadow: {\n    process: correctBoxShadow\n  }\n};\nexport { correctBorderRadius, correctBoxShadow, defaultScaleCorrectors, pixelsToPercent };","import { __extends, __rest, __assign, __read } from 'tslib';\nimport * as React from 'react';\nimport { eachAxis } from '../../../utils/each-axis.js';\nimport { startAnimation, getValueTransition } from '../../../animation/utils/transitions.js';\nimport { checkIfParentHasChanged, calcRelativeOffset, tweenAxis } from './utils.js';\nimport { VisibilityAction } from '../../../components/AnimateSharedLayout/types.js';\nimport { usePresence } from '../../../components/AnimatePresence/use-presence.js';\nimport { axisBox } from '../../../utils/geometry/index.js';\nimport { addScaleCorrection } from '../../../render/dom/projection/scale-correction.js';\nimport { defaultScaleCorrectors } from '../../../render/dom/projection/default-scale-correctors.js';\nvar progressTarget = 1000;\n\nvar Animate = function (_super) {\n  __extends(Animate, _super);\n\n  function Animate() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    /**\n     * A mutable object that tracks the target viewport box\n     * for the current animation frame.\n     */\n\n\n    _this.frameTarget = axisBox();\n    /**\n     * The current animation target, we use this to check whether to start\n     * a new animation or continue the existing one.\n     */\n\n    _this.currentAnimationTarget = axisBox();\n    /**\n     * Track whether we're animating this axis.\n     */\n\n    _this.isAnimating = {\n      x: false,\n      y: false\n    };\n    _this.stopAxisAnimation = {\n      x: undefined,\n      y: undefined\n    };\n    _this.isAnimatingTree = false;\n\n    _this.animate = function (target, origin, _a) {\n      if (_a === void 0) {\n        _a = {};\n      }\n\n      var originBox = _a.originBox,\n          targetBox = _a.targetBox,\n          visibilityAction = _a.visibilityAction,\n          shouldStackAnimate = _a.shouldStackAnimate,\n          onComplete = _a.onComplete,\n          prevParent = _a.prevParent,\n          config = __rest(_a, [\"originBox\", \"targetBox\", \"visibilityAction\", \"shouldStackAnimate\", \"onComplete\", \"prevParent\"]);\n\n      var _b = _this.props,\n          visualElement = _b.visualElement,\n          layout = _b.layout;\n      /**\n       * Early return if we've been instructed not to animate this render.\n       */\n\n      if (shouldStackAnimate === false) {\n        _this.isAnimatingTree = false;\n        return _this.safeToRemove();\n      }\n      /**\n       * Prioritise tree animations\n       */\n\n\n      if (_this.isAnimatingTree && shouldStackAnimate !== true) {\n        return;\n      } else if (shouldStackAnimate) {\n        _this.isAnimatingTree = true;\n      }\n      /**\n       * Allow the measured origin (prev bounding box) and target (actual layout) to be\n       * overridden by the provided config.\n       */\n\n\n      origin = originBox || origin;\n      target = targetBox || target;\n      /**\n       * If this element has a projecting parent, there's an opportunity to animate\n       * it relatively to that parent rather than relatively to the viewport. This\n       * allows us to add orchestrated animations.\n       */\n\n      var isRelative = false;\n      var projectionParent = visualElement.getProjectionParent();\n\n      if (projectionParent) {\n        var prevParentViewportBox = projectionParent.prevViewportBox;\n        var parentLayout = projectionParent.getLayoutState().layout;\n        /**\n         * If we're being provided a previous parent VisualElement by AnimateSharedLayout\n         */\n\n        if (prevParent) {\n          /**\n           * If we've been provided an explicit target box it means we're animating back\n           * to this previous parent. So we can make a relative box by comparing to the previous\n           * parent's layout\n           */\n          if (targetBox) {\n            parentLayout = prevParent.getLayoutState().layout;\n          }\n          /**\n           * Likewise if we've been provided an explicit origin box it means we're\n           * animating out from a different element. So we should figure out where that was\n           * on screen relative to the new parent element.\n           */\n\n\n          if (originBox && !checkIfParentHasChanged(prevParent, projectionParent) && prevParent.prevViewportBox) {\n            prevParentViewportBox = prevParent.prevViewportBox;\n          }\n        }\n\n        if (prevParentViewportBox && isProvidedCorrectDataForRelativeSharedLayout(prevParent, originBox, targetBox)) {\n          isRelative = true;\n          origin = calcRelativeOffset(prevParentViewportBox, origin);\n          target = calcRelativeOffset(parentLayout, target);\n        }\n      }\n\n      var boxHasMoved = hasMoved(origin, target);\n      var animations = eachAxis(function (axis) {\n        var _a, _b;\n        /**\n         * If layout is set to \"position\", we can resize the origin box based on the target\n         * box and only animate its position.\n         */\n\n\n        if (layout === \"position\") {\n          var targetLength = target[axis].max - target[axis].min;\n          origin[axis].max = origin[axis].min + targetLength;\n        }\n\n        if (visualElement.projection.isTargetLocked) {\n          return;\n        } else if (visibilityAction !== undefined) {\n          visualElement.setVisibility(visibilityAction === VisibilityAction.Show);\n        } else if (boxHasMoved) {\n          // If the box has moved, animate between it's current visual state and its\n          // final state\n          return _this.animateAxis(axis, target[axis], origin[axis], __assign(__assign({}, config), {\n            isRelative: isRelative\n          }));\n        } else {\n          (_b = (_a = _this.stopAxisAnimation)[axis]) === null || _b === void 0 ? void 0 : _b.call(_a); // If the box has remained in the same place, immediately set the axis target\n          // to the final desired state\n\n          return visualElement.setProjectionTargetAxis(axis, target[axis].min, target[axis].max, isRelative);\n        }\n      }); // Force a render to ensure there's no flash of uncorrected bounding box.\n\n      visualElement.syncRender();\n      /**\n       * If this visualElement isn't present (ie it's been removed from the tree by the user but\n       * kept in by the tree by AnimatePresence) then call safeToRemove when all axis animations\n       * have successfully finished.\n       */\n\n      return Promise.all(animations).then(function () {\n        _this.isAnimatingTree = false;\n        onComplete && onComplete();\n        visualElement.notifyLayoutAnimationComplete();\n      });\n    };\n\n    return _this;\n  }\n\n  Animate.prototype.componentDidMount = function () {\n    var _this = this;\n\n    var visualElement = this.props.visualElement;\n    visualElement.animateMotionValue = startAnimation;\n    visualElement.enableLayoutProjection();\n    this.unsubLayoutReady = visualElement.onLayoutUpdate(this.animate);\n\n    visualElement.layoutSafeToRemove = function () {\n      return _this.safeToRemove();\n    };\n\n    addScaleCorrection(defaultScaleCorrectors);\n  };\n\n  Animate.prototype.componentWillUnmount = function () {\n    var _this = this;\n\n    this.unsubLayoutReady();\n    eachAxis(function (axis) {\n      var _a, _b;\n\n      return (_b = (_a = _this.stopAxisAnimation)[axis]) === null || _b === void 0 ? void 0 : _b.call(_a);\n    });\n  };\n  /**\n   * TODO: This manually performs animations on the visualElement's layout progress\n   * values. It'd be preferable to amend the startLayoutAxisAnimation\n   * API to accept more custom animations like this.\n   */\n\n\n  Animate.prototype.animateAxis = function (axis, target, origin, _a) {\n    var _this = this;\n\n    var _b, _c;\n\n    var _d = _a === void 0 ? {} : _a,\n        transition = _d.transition,\n        isRelative = _d.isRelative;\n    /**\n     * If we're not animating to a new target, don't run this animation\n     */\n\n\n    if (this.isAnimating[axis] && axisIsEqual(target, this.currentAnimationTarget[axis])) {\n      return;\n    }\n\n    (_c = (_b = this.stopAxisAnimation)[axis]) === null || _c === void 0 ? void 0 : _c.call(_b);\n    this.isAnimating[axis] = true;\n    var visualElement = this.props.visualElement;\n    var frameTarget = this.frameTarget[axis];\n    var layoutProgress = visualElement.getProjectionAnimationProgress()[axis];\n    /**\n     * Set layout progress back to 0. We set it twice to hard-reset any velocity that might\n     * be re-incoporated into a subsequent spring animation.\n     */\n\n    layoutProgress.clearListeners();\n    layoutProgress.set(0);\n    layoutProgress.set(0);\n    /**\n     * Create an animation function to run once per frame. This will tween the visual bounding box from\n     * origin to target using the latest progress value.\n     */\n\n    var frame = function frame() {\n      // Convert the latest layoutProgress, which is a value from 0-1000, into a 0-1 progress\n      var p = layoutProgress.get() / progressTarget; // Tween the axis and update the visualElement with the latest values\n\n      tweenAxis(frameTarget, origin, target, p);\n      visualElement.setProjectionTargetAxis(axis, frameTarget.min, frameTarget.max, isRelative);\n    }; // Synchronously run a frame to ensure there's no flash of the uncorrected bounding box.\n\n\n    frame(); // Create a function to stop animation on this specific axis\n\n    var unsubscribeProgress = layoutProgress.onChange(frame);\n\n    this.stopAxisAnimation[axis] = function () {\n      _this.isAnimating[axis] = false;\n      layoutProgress.stop();\n      unsubscribeProgress();\n    };\n\n    this.currentAnimationTarget[axis] = target;\n    var layoutTransition = transition || visualElement.getDefaultTransition() || defaultLayoutTransition; // Start the animation on this axis\n\n    var animation = startAnimation(axis === \"x\" ? \"layoutX\" : \"layoutY\", layoutProgress, progressTarget, layoutTransition && getValueTransition(layoutTransition, \"layout\")).then(this.stopAxisAnimation[axis]);\n    return animation;\n  };\n\n  Animate.prototype.safeToRemove = function () {\n    var _a, _b;\n\n    (_b = (_a = this.props).safeToRemove) === null || _b === void 0 ? void 0 : _b.call(_a);\n  };\n\n  Animate.prototype.render = function () {\n    return null;\n  };\n\n  return Animate;\n}(React.Component);\n\nfunction AnimateLayoutContextProvider(props) {\n  var _a = __read(usePresence(), 2),\n      safeToRemove = _a[1];\n\n  return React.createElement(Animate, __assign({}, props, {\n    safeToRemove: safeToRemove\n  }));\n}\n\nfunction hasMoved(a, b) {\n  return !isZeroBox(a) && !isZeroBox(b) && (!axisIsEqual(a.x, b.x) || !axisIsEqual(a.y, b.y));\n}\n\nvar zeroAxis = {\n  min: 0,\n  max: 0\n};\n\nfunction isZeroBox(a) {\n  return axisIsEqual(a.x, zeroAxis) && axisIsEqual(a.y, zeroAxis);\n}\n\nfunction axisIsEqual(a, b) {\n  return a.min === b.min && a.max === b.max;\n}\n\nvar defaultLayoutTransition = {\n  duration: 0.45,\n  ease: [0.4, 0, 0.1, 1]\n};\n\nfunction isProvidedCorrectDataForRelativeSharedLayout(prevParent, originBox, targetBox) {\n  return prevParent || !prevParent && !(originBox || targetBox);\n}\n\nexport { AnimateLayoutContextProvider };","import { __spreadArray, __read } from 'tslib';\nimport sync, { flushSync } from 'framesync';\nimport { collectProjectingAncestors, updateLayoutMeasurement } from '../../../render/dom/projection/utils.js';\nimport { batchLayout, flushLayout } from '../../../render/dom/utils/batch-layout.js';\nimport { compareByDepth } from '../../../render/utils/compare-by-depth.js';\nimport { Presence } from '../types.js';\n/**\n * Default handlers for batching VisualElements\n */\n\nvar defaultHandler = {\n  layoutReady: function layoutReady(child) {\n    return child.notifyLayoutReady();\n  }\n};\n/**\n * Create a batcher to process VisualElements\n */\n\nfunction createBatcher() {\n  var queue = new Set();\n  return {\n    add: function add(child) {\n      return queue.add(child);\n    },\n    flush: function flush(_a) {\n      var _b = _a === void 0 ? defaultHandler : _a,\n          layoutReady = _b.layoutReady,\n          parent = _b.parent;\n\n      batchLayout(function (read, write) {\n        var order = Array.from(queue).sort(compareByDepth);\n        var ancestors = parent ? collectProjectingAncestors(parent) : [];\n        write(function () {\n          var allElements = __spreadArray(__spreadArray([], __read(ancestors)), __read(order));\n\n          allElements.forEach(function (element) {\n            return element.resetTransform();\n          });\n        });\n        read(function () {\n          order.forEach(updateLayoutMeasurement);\n        });\n        write(function () {\n          ancestors.forEach(function (element) {\n            return element.restoreTransform();\n          });\n          order.forEach(layoutReady);\n        });\n        read(function () {\n          /**\n           * After all children have started animating, ensure any Entering components are set to Present.\n           * If we add deferred animations (set up all animations and then start them in two loops) this\n           * could be moved to the start loop. But it needs to happen after all the animations configs\n           * are generated in AnimateSharedLayout as this relies on presence data\n           */\n          order.forEach(function (child) {\n            if (child.isPresent) child.presence = Presence.Present;\n          });\n        });\n        write(function () {\n          /**\n           * Starting these animations will have queued jobs on the frame loop. In some situations,\n           * like when removing an element, these will be processed too late after the DOM is manipulated,\n           * leaving a flash of incorrectly-projected content. By manually flushing these jobs\n           * we ensure there's no flash.\n           */\n          flushSync.preRender();\n          flushSync.render();\n        });\n        read(function () {\n          /**\n           * Schedule a callback at the end of the following frame to assign the latest projection\n           * box to the prevViewportBox snapshot. Once global batching is in place this could be run\n           * synchronously. But for now it ensures that if any nested `AnimateSharedLayout` top-level\n           * child attempts to calculate its previous relative position against a prevViewportBox\n           * it will be against its latest projection box instead, as the snapshot is useless beyond this\n           * render.\n           */\n          sync.postRender(function () {\n            return order.forEach(assignProjectionToSnapshot);\n          });\n          queue.clear();\n        });\n      }); // TODO: Need to find a layout-synchronous way of flushing this\n\n      flushLayout();\n    }\n  };\n}\n\nfunction assignProjectionToSnapshot(child) {\n  child.prevViewportBox = child.projection.target;\n}\n\nexport { createBatcher };","import { createContext } from 'react';\nimport { createBatcher } from '../components/AnimateSharedLayout/utils/batcher.js';\nvar SharedLayoutContext = createContext(createBatcher());\n/**\n * @internal\n */\n\nvar FramerTreeLayoutContext = createContext(createBatcher());\n\nfunction isSharedLayout(context) {\n  return !!context.forceUpdate;\n}\n\nexport { FramerTreeLayoutContext, SharedLayoutContext, isSharedLayout };","import { __extends, __assign } from 'tslib';\nimport React__default, { useContext } from 'react';\nimport { isSharedLayout, SharedLayoutContext, FramerTreeLayoutContext } from '../../../context/SharedLayoutContext.js';\nimport { snapshotViewportBox } from '../../../render/dom/projection/utils.js';\n/**\n * This component is responsible for scheduling the measuring of the motion component\n */\n\nvar Measure = function (_super) {\n  __extends(Measure, _super);\n\n  function Measure() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  /**\n   * If this is a child of a SyncContext, register the VisualElement with it on mount.\n   */\n\n\n  Measure.prototype.componentDidMount = function () {\n    var _a = this.props,\n        syncLayout = _a.syncLayout,\n        framerSyncLayout = _a.framerSyncLayout,\n        visualElement = _a.visualElement;\n    isSharedLayout(syncLayout) && syncLayout.register(visualElement);\n    isSharedLayout(framerSyncLayout) && framerSyncLayout.register(visualElement);\n    visualElement.onUnmount(function () {\n      if (isSharedLayout(syncLayout)) {\n        syncLayout.remove(visualElement);\n      }\n\n      if (isSharedLayout(framerSyncLayout)) {\n        framerSyncLayout.remove(visualElement);\n      }\n    });\n  };\n  /**\n   * If this is a child of a SyncContext, notify it that it needs to re-render. It will then\n   * handle the snapshotting.\n   *\n   * If it is stand-alone component, add it to the batcher.\n   */\n\n\n  Measure.prototype.getSnapshotBeforeUpdate = function () {\n    var _a = this.props,\n        syncLayout = _a.syncLayout,\n        visualElement = _a.visualElement;\n\n    if (isSharedLayout(syncLayout)) {\n      syncLayout.syncUpdate();\n    } else {\n      snapshotViewportBox(visualElement);\n      syncLayout.add(visualElement);\n    }\n\n    return null;\n  };\n\n  Measure.prototype.componentDidUpdate = function () {\n    var syncLayout = this.props.syncLayout;\n    if (!isSharedLayout(syncLayout)) syncLayout.flush();\n  };\n\n  Measure.prototype.render = function () {\n    return null;\n  };\n\n  return Measure;\n}(React__default.Component);\n\nfunction MeasureContextProvider(props) {\n  var syncLayout = useContext(SharedLayoutContext);\n  var framerSyncLayout = useContext(FramerTreeLayoutContext);\n  return React__default.createElement(Measure, __assign({}, props, {\n    syncLayout: syncLayout,\n    framerSyncLayout: framerSyncLayout\n  }));\n}\n\nexport { MeasureContextProvider };","import { AnimateLayoutContextProvider } from './Animate.js';\nimport { MeasureContextProvider } from './Measure.js';\nvar layoutAnimations = {\n  measureLayout: MeasureContextProvider,\n  layoutAnimation: AnimateLayoutContextProvider\n};\nexport { layoutAnimations };","import { axisBox, delta } from '../../utils/geometry/index.js';\n\nvar createProjectionState = function createProjectionState() {\n  return {\n    isEnabled: false,\n    isHydrated: false,\n    isTargetLocked: false,\n    target: axisBox(),\n    targetFinal: axisBox()\n  };\n};\n\nfunction createLayoutState() {\n  return {\n    isHydrated: false,\n    layout: axisBox(),\n    layoutCorrected: axisBox(),\n    treeScale: {\n      x: 1,\n      y: 1\n    },\n    delta: delta(),\n    deltaFinal: delta(),\n    deltaTransform: \"\"\n  };\n}\n\nvar zeroLayout = createLayoutState();\nexport { createLayoutState, createProjectionState, zeroLayout };","import { zeroLayout } from '../../utils/state.js';\n/**\n * Build a transform style that takes a calculated delta between the element's current\n * space on screen and projects it into the desired space.\n */\n\nfunction buildLayoutProjectionTransform(_a, treeScale, latestTransform) {\n  var x = _a.x,\n      y = _a.y;\n  /**\n   * The translations we use to calculate are always relative to the viewport coordinate space.\n   * But when we apply scales, we also scale the coordinate space of an element and its children.\n   * For instance if we have a treeScale (the culmination of all parent scales) of 0.5 and we need\n   * to move an element 100 pixels, we actually need to move it 200 in within that scaled space.\n   */\n\n  var xTranslate = x.translate / treeScale.x;\n  var yTranslate = y.translate / treeScale.y;\n  var transform = \"translate3d(\" + xTranslate + \"px, \" + yTranslate + \"px, 0) \";\n\n  if (latestTransform) {\n    var rotate = latestTransform.rotate,\n        rotateX = latestTransform.rotateX,\n        rotateY = latestTransform.rotateY;\n    if (rotate) transform += \"rotate(\" + rotate + \") \";\n    if (rotateX) transform += \"rotateX(\" + rotateX + \") \";\n    if (rotateY) transform += \"rotateY(\" + rotateY + \") \";\n  }\n\n  transform += \"scale(\" + x.scale + \", \" + y.scale + \")\";\n  return !latestTransform && transform === identityProjection ? \"\" : transform;\n}\n/**\n * Take the calculated delta origin and apply it as a transform string.\n */\n\n\nfunction buildLayoutProjectionTransformOrigin(_a) {\n  var deltaFinal = _a.deltaFinal;\n  return deltaFinal.x.origin * 100 + \"% \" + deltaFinal.y.origin * 100 + \"% 0\";\n}\n\nvar identityProjection = buildLayoutProjectionTransform(zeroLayout.delta, zeroLayout.treeScale, {\n  x: 1,\n  y: 1\n});\nexport { buildLayoutProjectionTransform, buildLayoutProjectionTransformOrigin, identityProjection };","import { __spreadArray, __read } from 'tslib';\nimport { SubscriptionManager } from '../../utils/subscription-manager.js';\nvar names = [\"LayoutMeasure\", \"BeforeLayoutMeasure\", \"LayoutUpdate\", \"ViewportBoxUpdate\", \"Update\", \"Render\", \"AnimationComplete\", \"LayoutAnimationComplete\", \"AnimationStart\", \"SetAxisTarget\", \"Unmount\"];\n\nfunction createLifecycles() {\n  var managers = names.map(function () {\n    return new SubscriptionManager();\n  });\n  var propSubscriptions = {};\n  var lifecycles = {\n    clearAllListeners: function clearAllListeners() {\n      return managers.forEach(function (manager) {\n        return manager.clear();\n      });\n    },\n    updatePropListeners: function updatePropListeners(props) {\n      return names.forEach(function (name) {\n        var _a;\n\n        (_a = propSubscriptions[name]) === null || _a === void 0 ? void 0 : _a.call(propSubscriptions);\n        var on = \"on\" + name;\n        var propListener = props[on];\n\n        if (propListener) {\n          propSubscriptions[name] = lifecycles[on](propListener);\n        }\n      });\n    }\n  };\n  managers.forEach(function (manager, i) {\n    lifecycles[\"on\" + names[i]] = function (handler) {\n      return manager.add(handler);\n    };\n\n    lifecycles[\"notify\" + names[i]] = function () {\n      var args = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n\n      return manager.notify.apply(manager, __spreadArray([], __read(args)));\n    };\n  });\n  return lifecycles;\n}\n\nexport { createLifecycles };","import { resetBox, applyTreeDeltas } from '../../utils/geometry/delta-apply.js';\nimport { updateBoxDelta } from '../../utils/geometry/delta-calc.js';\n\nfunction updateLayoutDeltas(_a, _b, treePath, transformOrigin) {\n  var delta = _a.delta,\n      layout = _a.layout,\n      layoutCorrected = _a.layoutCorrected,\n      treeScale = _a.treeScale;\n  var target = _b.target;\n  /**\n   * Reset the corrected box with the latest values from box, as we're then going\n   * to perform mutative operations on it.\n   */\n\n  resetBox(layoutCorrected, layout);\n  /**\n   * Apply all the parent deltas to this box to produce the corrected box. This\n   * is the layout box, as it will appear on screen as a result of the transforms of its parents.\n   */\n\n  applyTreeDeltas(layoutCorrected, treeScale, treePath);\n  /**\n   * Update the delta between the corrected box and the target box before user-set transforms were applied.\n   * This will allow us to calculate the corrected borderRadius and boxShadow to compensate\n   * for our layout reprojection, but still allow them to be scaled correctly by the user.\n   * It might be that to simplify this we may want to accept that user-set scale is also corrected\n   * and we wouldn't have to keep and calc both deltas, OR we could support a user setting\n   * to allow people to choose whether these styles are corrected based on just the\n   * layout reprojection or the final bounding box.\n   */\n\n  updateBoxDelta(delta, layoutCorrected, target, transformOrigin);\n}\n\nexport { updateLayoutDeltas };","import { addUniqueItem, removeItem } from '../../utils/array.js';\nimport { compareByDepth } from './compare-by-depth.js';\n\nvar FlatTree = function () {\n  function FlatTree() {\n    this.children = [];\n    this.isDirty = false;\n  }\n\n  FlatTree.prototype.add = function (child) {\n    addUniqueItem(this.children, child);\n    this.isDirty = true;\n  };\n\n  FlatTree.prototype.remove = function (child) {\n    removeItem(this.children, child);\n    this.isDirty = true;\n  };\n\n  FlatTree.prototype.forEach = function (callback) {\n    this.isDirty && this.children.sort(compareByDepth);\n    this.isDirty = false;\n    this.children.forEach(callback);\n  };\n\n  return FlatTree;\n}();\n\nexport { FlatTree };","import { __assign, __spreadArray, __read } from 'tslib';\nimport sync, { cancelSync } from 'framesync';\nimport { pipe } from 'popmotion';\nimport { Presence } from '../components/AnimateSharedLayout/types.js';\nimport { eachAxis } from '../utils/each-axis.js';\nimport { axisBox } from '../utils/geometry/index.js';\nimport { removeBoxTransforms, applyBoxTransforms } from '../utils/geometry/delta-apply.js';\nimport { calcRelativeBox, updateBoxDelta } from '../utils/geometry/delta-calc.js';\nimport { motionValue } from '../value/index.js';\nimport { isMotionValue } from '../value/utils/is-motion-value.js';\nimport { buildLayoutProjectionTransform } from './html/utils/build-projection-transform.js';\nimport { variantPriorityOrder } from './utils/animation-state.js';\nimport { createLifecycles } from './utils/lifecycles.js';\nimport { updateMotionValuesFromProps } from './utils/motion-values.js';\nimport { updateLayoutDeltas } from './utils/projection.js';\nimport { createLayoutState, createProjectionState } from './utils/state.js';\nimport { FlatTree } from './utils/flat-tree.js';\nimport { checkIfControllingVariants, checkIfVariantNode, isVariantLabel } from './utils/variants.js';\nimport { setCurrentViewportBox } from './dom/projection/relative-set.js';\nimport { isDraggable } from './utils/is-draggable.js';\n\nvar visualElement = function visualElement(_a) {\n  var _b = _a.treeType,\n      treeType = _b === void 0 ? \"\" : _b,\n      build = _a.build,\n      _getBaseTarget = _a.getBaseTarget,\n      _makeTargetAnimatable = _a.makeTargetAnimatable,\n      _measureViewportBox = _a.measureViewportBox,\n      renderInstance = _a.render,\n      readValueFromInstance = _a.readValueFromInstance,\n      _resetTransform = _a.resetTransform,\n      _restoreTransform = _a.restoreTransform,\n      removeValueFromRenderState = _a.removeValueFromRenderState,\n      _sortNodePosition = _a.sortNodePosition,\n      scrapeMotionValuesFromProps = _a.scrapeMotionValuesFromProps;\n  return function (_a, options) {\n    var parent = _a.parent,\n        props = _a.props,\n        presenceId = _a.presenceId,\n        blockInitialAnimation = _a.blockInitialAnimation,\n        visualState = _a.visualState;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    var latestValues = visualState.latestValues,\n        renderState = visualState.renderState;\n    /**\n     * The instance of the render-specific node that will be hydrated by the\n     * exposed React ref. So for example, this visual element can host a\n     * HTMLElement, plain object, or Three.js object. The functions provided\n     * in VisualElementConfig allow us to interface with this instance.\n     */\n\n    var instance;\n    /**\n     * Manages the subscriptions for a visual element's lifecycle, for instance\n     * onRender and onViewportBoxUpdate.\n     */\n\n    var lifecycles = createLifecycles();\n    /**\n     *\n     */\n\n    var projection = createProjectionState();\n    /**\n     * A reference to the nearest projecting parent. This is either\n     * undefined if we haven't looked for the nearest projecting parent,\n     * false if there is no parent performing layout projection, or a reference\n     * to the projecting parent.\n     */\n\n    var projectionParent;\n    /**\n     * This is a reference to the visual state of the \"lead\" visual element.\n     * Usually, this will be this visual element. But if it shares a layoutId\n     * with other visual elements, only one of them will be designated lead by\n     * AnimateSharedLayout. All the other visual elements will take on the visual\n     * appearance of the lead while they crossfade to it.\n     */\n\n    var leadProjection = projection;\n    var leadLatestValues = latestValues;\n    var unsubscribeFromLeadVisualElement;\n    /**\n     * The latest layout measurements and calculated projections. This\n     * is seperate from the target projection data in visualState as\n     * many visual elements might point to the same piece of visualState as\n     * a target, whereas they might each have different layouts and thus\n     * projection calculations needed to project into the same viewport box.\n     */\n\n    var layoutState = createLayoutState();\n    /**\n     *\n     */\n\n    var crossfader;\n    /**\n     * Keep track of whether the viewport box has been updated since the\n     * last time the layout projection was re-calculated.\n     */\n\n    var hasViewportBoxUpdated = false;\n    /**\n     * A map of all motion values attached to this visual element. Motion\n     * values are source of truth for any given animated value. A motion\n     * value might be provided externally by the component via props.\n     */\n\n    var values = new Map();\n    /**\n     * A map of every subscription that binds the provided or generated\n     * motion values onChange listeners to this visual element.\n     */\n\n    var valueSubscriptions = new Map();\n    /**\n     * A reference to the previously-provided motion values as returned\n     * from scrapeMotionValuesFromProps. We use the keys in here to determine\n     * if any motion values need to be removed after props are updated.\n     */\n\n    var prevMotionValues = {};\n    /**\n     * x/y motion values that track the progress of initiated layout\n     * animations.\n     *\n     * TODO: Target for removal\n     */\n\n    var projectionTargetProgress;\n    /**\n     * When values are removed from all animation props we need to search\n     * for a fallback value to animate to. These values are tracked in baseTarget.\n     */\n\n    var baseTarget = __assign({}, latestValues); // Internal methods ========================\n\n    /**\n     * On mount, this will be hydrated with a callback to disconnect\n     * this visual element from its parent on unmount.\n     */\n\n\n    var removeFromVariantTree;\n    /**\n     *\n     */\n\n    function render() {\n      if (!instance) return;\n\n      if (element.isProjectionReady()) {\n        /**\n         * Apply the latest user-set transforms to the targetBox to produce the targetBoxFinal.\n         * This is the final box that we will then project into by calculating a transform delta and\n         * applying it to the corrected box.\n         */\n        applyBoxTransforms(leadProjection.targetFinal, leadProjection.target, leadLatestValues);\n        /**\n         * Update the delta between the corrected box and the final target box, after\n         * user-set transforms are applied to it. This will be used by the renderer to\n         * create a transform style that will reproject the element from its actual layout\n         * into the desired bounding box.\n         */\n\n        updateBoxDelta(layoutState.deltaFinal, layoutState.layoutCorrected, leadProjection.targetFinal, latestValues);\n      }\n\n      triggerBuild();\n      renderInstance(instance, renderState);\n    }\n\n    function triggerBuild() {\n      var valuesToRender = latestValues;\n\n      if (crossfader && crossfader.isActive()) {\n        var crossfadedValues = crossfader.getCrossfadeState(element);\n        if (crossfadedValues) valuesToRender = crossfadedValues;\n      }\n\n      build(element, renderState, valuesToRender, leadProjection, layoutState, options, props);\n    }\n\n    function update() {\n      lifecycles.notifyUpdate(latestValues);\n    }\n\n    function updateLayoutProjection() {\n      if (!element.isProjectionReady()) return;\n      var delta = layoutState.delta,\n          treeScale = layoutState.treeScale;\n      var prevTreeScaleX = treeScale.x;\n      var prevTreeScaleY = treeScale.y;\n      var prevDeltaTransform = layoutState.deltaTransform;\n      updateLayoutDeltas(layoutState, leadProjection, element.path, latestValues);\n      hasViewportBoxUpdated && element.notifyViewportBoxUpdate(leadProjection.target, delta);\n      hasViewportBoxUpdated = false;\n      var deltaTransform = buildLayoutProjectionTransform(delta, treeScale);\n\n      if (deltaTransform !== prevDeltaTransform || // Also compare calculated treeScale, for values that rely on this only for scale correction\n      prevTreeScaleX !== treeScale.x || prevTreeScaleY !== treeScale.y) {\n        element.scheduleRender();\n      }\n\n      layoutState.deltaTransform = deltaTransform;\n    }\n\n    function _updateTreeLayoutProjection() {\n      element.layoutTree.forEach(fireUpdateLayoutProjection);\n    }\n    /**\n     *\n     */\n\n\n    function bindToMotionValue(key, value) {\n      var removeOnChange = value.onChange(function (latestValue) {\n        latestValues[key] = latestValue;\n        props.onUpdate && sync.update(update, false, true);\n      });\n      var removeOnRenderRequest = value.onRenderRequest(element.scheduleRender);\n      valueSubscriptions.set(key, function () {\n        removeOnChange();\n        removeOnRenderRequest();\n      });\n    }\n    /**\n     * Any motion values that are provided to the element when created\n     * aren't yet bound to the element, as this would technically be impure.\n     * However, we iterate through the motion values and set them to the\n     * initial values for this component.\n     *\n     * TODO: This is impure and we should look at changing this to run on mount.\n     * Doing so will break some tests but this isn't neccessarily a breaking change,\n     * more a reflection of the test.\n     */\n\n\n    var initialMotionValues = scrapeMotionValuesFromProps(props);\n\n    for (var key in initialMotionValues) {\n      var value = initialMotionValues[key];\n\n      if (latestValues[key] !== undefined && isMotionValue(value)) {\n        value.set(latestValues[key], false);\n      }\n    }\n    /**\n     * Determine what role this visual element should take in the variant tree.\n     */\n\n\n    var isControllingVariants = checkIfControllingVariants(props);\n    var isVariantNode = checkIfVariantNode(props);\n\n    var element = __assign(__assign({\n      treeType: treeType,\n\n      /**\n       * This is a mirror of the internal instance prop, which keeps\n       * VisualElement type-compatible with React's RefObject.\n       */\n      current: null,\n\n      /**\n       * The depth of this visual element within the visual element tree.\n       */\n      depth: parent ? parent.depth + 1 : 0,\n      parent: parent,\n      children: new Set(),\n\n      /**\n       * An ancestor path back to the root visual element. This is used\n       * by layout projection to quickly recurse back up the tree.\n       */\n      path: parent ? __spreadArray(__spreadArray([], __read(parent.path)), [parent]) : [],\n      layoutTree: parent ? parent.layoutTree : new FlatTree(),\n\n      /**\n       *\n       */\n      presenceId: presenceId,\n      projection: projection,\n\n      /**\n       * If this component is part of the variant tree, it should track\n       * any children that are also part of the tree. This is essentially\n       * a shadow tree to simplify logic around how to stagger over children.\n       */\n      variantChildren: isVariantNode ? new Set() : undefined,\n\n      /**\n       * Whether this instance is visible. This can be changed imperatively\n       * by AnimateSharedLayout, is analogous to CSS's visibility in that\n       * hidden elements should take up layout, and needs enacting by the configured\n       * render function.\n       */\n      isVisible: undefined,\n\n      /**\n       * Normally, if a component is controlled by a parent's variants, it can\n       * rely on that ancestor to trigger animations further down the tree.\n       * However, if a component is created after its parent is mounted, the parent\n       * won't trigger that mount animation so the child needs to.\n       *\n       * TODO: This might be better replaced with a method isParentMounted\n       */\n      manuallyAnimateOnMount: Boolean(parent === null || parent === void 0 ? void 0 : parent.isMounted()),\n\n      /**\n       * This can be set by AnimatePresence to force components that mount\n       * at the same time as it to mount as if they have initial={false} set.\n       */\n      blockInitialAnimation: blockInitialAnimation,\n\n      /**\n       * Determine whether this component has mounted yet. This is mostly used\n       * by variant children to determine whether they need to trigger their\n       * own animations on mount.\n       */\n      isMounted: function isMounted() {\n        return Boolean(instance);\n      },\n      mount: function mount(newInstance) {\n        instance = element.current = newInstance;\n        element.pointTo(element);\n\n        if (isVariantNode && parent && !isControllingVariants) {\n          removeFromVariantTree = parent === null || parent === void 0 ? void 0 : parent.addVariantChild(element);\n        }\n\n        parent === null || parent === void 0 ? void 0 : parent.children.add(element);\n      },\n\n      /**\n       *\n       */\n      unmount: function unmount() {\n        cancelSync.update(update);\n        cancelSync.render(render);\n        cancelSync.preRender(element.updateLayoutProjection);\n        valueSubscriptions.forEach(function (remove) {\n          return remove();\n        });\n        element.stopLayoutAnimation();\n        element.layoutTree.remove(element);\n        removeFromVariantTree === null || removeFromVariantTree === void 0 ? void 0 : removeFromVariantTree();\n        parent === null || parent === void 0 ? void 0 : parent.children.delete(element);\n        unsubscribeFromLeadVisualElement === null || unsubscribeFromLeadVisualElement === void 0 ? void 0 : unsubscribeFromLeadVisualElement();\n        lifecycles.clearAllListeners();\n      },\n\n      /**\n       * Add a child visual element to our set of children.\n       */\n      addVariantChild: function addVariantChild(child) {\n        var _a;\n\n        var closestVariantNode = element.getClosestVariantNode();\n\n        if (closestVariantNode) {\n          (_a = closestVariantNode.variantChildren) === null || _a === void 0 ? void 0 : _a.add(child);\n          return function () {\n            return closestVariantNode.variantChildren.delete(child);\n          };\n        }\n      },\n      sortNodePosition: function sortNodePosition(other) {\n        /**\n         * If these nodes aren't even of the same type we can't compare their depth.\n         */\n        if (!_sortNodePosition || treeType !== other.treeType) return 0;\n        return _sortNodePosition(element.getInstance(), other.getInstance());\n      },\n\n      /**\n       * Returns the closest variant node in the tree starting from\n       * this visual element.\n       */\n      getClosestVariantNode: function getClosestVariantNode() {\n        return isVariantNode ? element : parent === null || parent === void 0 ? void 0 : parent.getClosestVariantNode();\n      },\n\n      /**\n       * A method that schedules an update to layout projections throughout\n       * the tree. We inherit from the parent so there's only ever one\n       * job scheduled on the next frame - that of the root visual element.\n       */\n      scheduleUpdateLayoutProjection: parent ? parent.scheduleUpdateLayoutProjection : function () {\n        return sync.preRender(element.updateTreeLayoutProjection, false, true);\n      },\n\n      /**\n       * Expose the latest layoutId prop.\n       */\n      getLayoutId: function getLayoutId() {\n        return props.layoutId;\n      },\n\n      /**\n       * Returns the current instance.\n       */\n      getInstance: function getInstance() {\n        return instance;\n      },\n\n      /**\n       * Get/set the latest static values.\n       */\n      getStaticValue: function getStaticValue(key) {\n        return latestValues[key];\n      },\n      setStaticValue: function setStaticValue(key, value) {\n        return latestValues[key] = value;\n      },\n\n      /**\n       * Returns the latest motion value state. Currently only used to take\n       * a snapshot of the visual element - perhaps this can return the whole\n       * visual state\n       */\n      getLatestValues: function getLatestValues() {\n        return latestValues;\n      },\n\n      /**\n       * Set the visiblity of the visual element. If it's changed, schedule\n       * a render to reflect these changes.\n       */\n      setVisibility: function setVisibility(visibility) {\n        if (element.isVisible === visibility) return;\n        element.isVisible = visibility;\n        element.scheduleRender();\n      },\n\n      /**\n       * Make a target animatable by Popmotion. For instance, if we're\n       * trying to animate width from 100px to 100vw we need to measure 100vw\n       * in pixels to determine what we really need to animate to. This is also\n       * pluggable to support Framer's custom value types like Color,\n       * and CSS variables.\n       */\n      makeTargetAnimatable: function makeTargetAnimatable(target, canMutate) {\n        if (canMutate === void 0) {\n          canMutate = true;\n        }\n\n        return _makeTargetAnimatable(element, target, props, canMutate);\n      },\n      // Motion values ========================\n\n      /**\n       * Add a motion value and bind it to this visual element.\n       */\n      addValue: function addValue(key, value) {\n        // Remove existing value if it exists\n        if (element.hasValue(key)) element.removeValue(key);\n        values.set(key, value);\n        latestValues[key] = value.get();\n        bindToMotionValue(key, value);\n      },\n\n      /**\n       * Remove a motion value and unbind any active subscriptions.\n       */\n      removeValue: function removeValue(key) {\n        var _a;\n\n        values.delete(key);\n        (_a = valueSubscriptions.get(key)) === null || _a === void 0 ? void 0 : _a();\n        valueSubscriptions.delete(key);\n        delete latestValues[key];\n        removeValueFromRenderState(key, renderState);\n      },\n\n      /**\n       * Check whether we have a motion value for this key\n       */\n      hasValue: function hasValue(key) {\n        return values.has(key);\n      },\n\n      /**\n       * Get a motion value for this key. If called with a default\n       * value, we'll create one if none exists.\n       */\n      getValue: function getValue(key, defaultValue) {\n        var value = values.get(key);\n\n        if (value === undefined && defaultValue !== undefined) {\n          value = motionValue(defaultValue);\n          element.addValue(key, value);\n        }\n\n        return value;\n      },\n\n      /**\n       * Iterate over our motion values.\n       */\n      forEachValue: function forEachValue(callback) {\n        return values.forEach(callback);\n      },\n\n      /**\n       * If we're trying to animate to a previously unencountered value,\n       * we need to check for it in our state and as a last resort read it\n       * directly from the instance (which might have performance implications).\n       */\n      readValue: function readValue(key) {\n        var _a;\n\n        return (_a = latestValues[key]) !== null && _a !== void 0 ? _a : readValueFromInstance(instance, key, options);\n      },\n\n      /**\n       * Set the base target to later animate back to. This is currently\n       * only hydrated on creation and when we first read a value.\n       */\n      setBaseTarget: function setBaseTarget(key, value) {\n        baseTarget[key] = value;\n      },\n\n      /**\n       * Find the base target for a value thats been removed from all animation\n       * props.\n       */\n      getBaseTarget: function getBaseTarget(key) {\n        if (_getBaseTarget) {\n          var target = _getBaseTarget(props, key);\n\n          if (target !== undefined && !isMotionValue(target)) return target;\n        }\n\n        return baseTarget[key];\n      }\n    }, lifecycles), {\n      /**\n       * Build the renderer state based on the latest visual state.\n       */\n      build: function build() {\n        triggerBuild();\n        return renderState;\n      },\n\n      /**\n       * Schedule a render on the next animation frame.\n       */\n      scheduleRender: function scheduleRender() {\n        sync.render(render, false, true);\n      },\n\n      /**\n       * Synchronously fire render. It's prefered that we batch renders but\n       * in many circumstances, like layout measurement, we need to run this\n       * synchronously. However in those instances other measures should be taken\n       * to batch reads/writes.\n       */\n      syncRender: render,\n\n      /**\n       * Update the provided props. Ensure any newly-added motion values are\n       * added to our map, old ones removed, and listeners updated.\n       */\n      setProps: function setProps(newProps) {\n        props = newProps;\n        lifecycles.updatePropListeners(newProps);\n        prevMotionValues = updateMotionValuesFromProps(element, scrapeMotionValuesFromProps(props), prevMotionValues);\n      },\n      getProps: function getProps() {\n        return props;\n      },\n      // Variants ==============================\n\n      /**\n       * Returns the variant definition with a given name.\n       */\n      getVariant: function getVariant(name) {\n        var _a;\n\n        return (_a = props.variants) === null || _a === void 0 ? void 0 : _a[name];\n      },\n\n      /**\n       * Returns the defined default transition on this component.\n       */\n      getDefaultTransition: function getDefaultTransition() {\n        return props.transition;\n      },\n\n      /**\n       * Used by child variant nodes to get the closest ancestor variant props.\n       */\n      getVariantContext: function getVariantContext(startAtParent) {\n        if (startAtParent === void 0) {\n          startAtParent = false;\n        }\n\n        if (startAtParent) return parent === null || parent === void 0 ? void 0 : parent.getVariantContext();\n\n        if (!isControllingVariants) {\n          var context_1 = (parent === null || parent === void 0 ? void 0 : parent.getVariantContext()) || {};\n\n          if (props.initial !== undefined) {\n            context_1.initial = props.initial;\n          }\n\n          return context_1;\n        }\n\n        var context = {};\n\n        for (var i = 0; i < numVariantProps; i++) {\n          var name_1 = variantProps[i];\n          var prop = props[name_1];\n\n          if (isVariantLabel(prop) || prop === false) {\n            context[name_1] = prop;\n          }\n        }\n\n        return context;\n      },\n      // Layout projection ==============================\n\n      /**\n       * Enable layout projection for this visual element. Won't actually\n       * occur until we also have hydrated layout measurements.\n       */\n      enableLayoutProjection: function enableLayoutProjection() {\n        projection.isEnabled = true;\n        element.layoutTree.add(element);\n      },\n\n      /**\n       * Lock the projection target, for instance when dragging, so\n       * nothing else can try and animate it.\n       */\n      lockProjectionTarget: function lockProjectionTarget() {\n        projection.isTargetLocked = true;\n      },\n      unlockProjectionTarget: function unlockProjectionTarget() {\n        element.stopLayoutAnimation();\n        projection.isTargetLocked = false;\n      },\n      getLayoutState: function getLayoutState() {\n        return layoutState;\n      },\n      setCrossfader: function setCrossfader(newCrossfader) {\n        crossfader = newCrossfader;\n      },\n      isProjectionReady: function isProjectionReady() {\n        return projection.isEnabled && projection.isHydrated && layoutState.isHydrated;\n      },\n\n      /**\n       * Start a layout animation on a given axis.\n       */\n      startLayoutAnimation: function startLayoutAnimation(axis, transition, isRelative) {\n        if (isRelative === void 0) {\n          isRelative = false;\n        }\n\n        var progress = element.getProjectionAnimationProgress()[axis];\n\n        var _a = isRelative ? projection.relativeTarget[axis] : projection.target[axis],\n            min = _a.min,\n            max = _a.max;\n\n        var length = max - min;\n        progress.clearListeners();\n        progress.set(min);\n        progress.set(min); // Set twice to hard-reset velocity\n\n        progress.onChange(function (v) {\n          element.setProjectionTargetAxis(axis, v, v + length, isRelative);\n        });\n        return element.animateMotionValue(axis, progress, 0, transition);\n      },\n\n      /**\n       * Stop layout animations.\n       */\n      stopLayoutAnimation: function stopLayoutAnimation() {\n        eachAxis(function (axis) {\n          return element.getProjectionAnimationProgress()[axis].stop();\n        });\n      },\n\n      /**\n       * Measure the current viewport box with or without transforms.\n       * Only measures axis-aligned boxes, rotate and skew must be manually\n       * removed with a re-render to work.\n       */\n      measureViewportBox: function measureViewportBox(withTransform) {\n        if (withTransform === void 0) {\n          withTransform = true;\n        }\n\n        var viewportBox = _measureViewportBox(instance, options);\n\n        if (!withTransform) removeBoxTransforms(viewportBox, latestValues);\n        return viewportBox;\n      },\n\n      /**\n       * Get the motion values tracking the layout animations on each\n       * axis. Lazy init if not already created.\n       */\n      getProjectionAnimationProgress: function getProjectionAnimationProgress() {\n        projectionTargetProgress || (projectionTargetProgress = {\n          x: motionValue(0),\n          y: motionValue(0)\n        });\n        return projectionTargetProgress;\n      },\n\n      /**\n       * Update the projection of a single axis. Schedule an update to\n       * the tree layout projection.\n       */\n      setProjectionTargetAxis: function setProjectionTargetAxis(axis, min, max, isRelative) {\n        if (isRelative === void 0) {\n          isRelative = false;\n        }\n\n        var target;\n\n        if (isRelative) {\n          if (!projection.relativeTarget) {\n            projection.relativeTarget = axisBox();\n          }\n\n          target = projection.relativeTarget[axis];\n        } else {\n          projection.relativeTarget = undefined;\n          target = projection.target[axis];\n        }\n\n        projection.isHydrated = true;\n        target.min = min;\n        target.max = max; // Flag that we want to fire the onViewportBoxUpdate event handler\n\n        hasViewportBoxUpdated = true;\n        lifecycles.notifySetAxisTarget();\n      },\n\n      /**\n       * Rebase the projection target on top of the provided viewport box\n       * or the measured layout. This ensures that non-animating elements\n       * don't fall out of sync differences in measurements vs projections\n       * after a page scroll or other relayout.\n       */\n      rebaseProjectionTarget: function rebaseProjectionTarget(force, box) {\n        if (box === void 0) {\n          box = layoutState.layout;\n        }\n\n        var _a = element.getProjectionAnimationProgress(),\n            x = _a.x,\n            y = _a.y;\n\n        var shouldRebase = !projection.relativeTarget && !projection.isTargetLocked && !x.isAnimating() && !y.isAnimating();\n\n        if (force || shouldRebase) {\n          eachAxis(function (axis) {\n            var _a = box[axis],\n                min = _a.min,\n                max = _a.max;\n            element.setProjectionTargetAxis(axis, min, max);\n          });\n        }\n      },\n\n      /**\n       * Notify the visual element that its layout is up-to-date.\n       * Currently Animate.tsx uses this to check whether a layout animation\n       * needs to be performed.\n       */\n      notifyLayoutReady: function notifyLayoutReady(config) {\n        setCurrentViewportBox(element);\n        element.notifyLayoutUpdate(layoutState.layout, element.prevViewportBox || layoutState.layout, config);\n      },\n\n      /**\n       * Temporarily reset the transform of the instance.\n       */\n      resetTransform: function resetTransform() {\n        return _resetTransform(element, instance, props);\n      },\n      restoreTransform: function restoreTransform() {\n        return _restoreTransform(instance, renderState);\n      },\n      updateLayoutProjection: updateLayoutProjection,\n      updateTreeLayoutProjection: function updateTreeLayoutProjection() {\n        element.layoutTree.forEach(fireResolveRelativeTargetBox);\n        /**\n         * Schedule the projection updates at the end of the current preRender\n         * step. This will ensure that all layout trees will first resolve\n         * relative projection boxes into viewport boxes, and *then*\n         * update projections.\n         */\n\n        sync.preRender(_updateTreeLayoutProjection, false, true); // sync.postRender(() => element.scheduleUpdateLayoutProjection())\n      },\n      getProjectionParent: function getProjectionParent() {\n        if (projectionParent === undefined) {\n          var foundParent = false; // Search backwards through the tree path\n\n          for (var i = element.path.length - 1; i >= 0; i--) {\n            var ancestor = element.path[i];\n\n            if (ancestor.projection.isEnabled) {\n              foundParent = ancestor;\n              break;\n            }\n          }\n\n          projectionParent = foundParent;\n        }\n\n        return projectionParent;\n      },\n      resolveRelativeTargetBox: function resolveRelativeTargetBox() {\n        var relativeParent = element.getProjectionParent();\n        if (!projection.relativeTarget || !relativeParent) return;\n        calcRelativeBox(projection, relativeParent.projection);\n\n        if (isDraggable(relativeParent)) {\n          var target = projection.target;\n          applyBoxTransforms(target, target, relativeParent.getLatestValues());\n        }\n      },\n      shouldResetTransform: function shouldResetTransform() {\n        return Boolean(props._layoutResetTransform);\n      },\n\n      /**\n       *\n       */\n      pointTo: function pointTo(newLead) {\n        leadProjection = newLead.projection;\n        leadLatestValues = newLead.getLatestValues();\n        /**\n         * Subscribe to lead component's layout animations\n         */\n\n        unsubscribeFromLeadVisualElement === null || unsubscribeFromLeadVisualElement === void 0 ? void 0 : unsubscribeFromLeadVisualElement();\n        unsubscribeFromLeadVisualElement = pipe(newLead.onSetAxisTarget(element.scheduleUpdateLayoutProjection), newLead.onLayoutAnimationComplete(function () {\n          var _a;\n\n          if (element.isPresent) {\n            element.presence = Presence.Present;\n          } else {\n            (_a = element.layoutSafeToRemove) === null || _a === void 0 ? void 0 : _a.call(element);\n          }\n        }));\n      },\n      // TODO: Clean this up\n      isPresent: true,\n      presence: Presence.Entering\n    });\n\n    return element;\n  };\n};\n\nfunction fireResolveRelativeTargetBox(child) {\n  child.resolveRelativeTargetBox();\n}\n\nfunction fireUpdateLayoutProjection(child) {\n  child.updateLayoutProjection();\n}\n\nvar variantProps = __spreadArray([\"initial\"], __read(variantPriorityOrder));\n\nvar numVariantProps = variantProps.length;\nexport { visualElement };","import { motionValue } from '../../value/index.js';\nimport { isMotionValue } from '../../value/utils/is-motion-value.js';\n\nfunction updateMotionValuesFromProps(element, next, prev) {\n  var _a;\n\n  for (var key in next) {\n    var nextValue = next[key];\n    var prevValue = prev[key];\n\n    if (isMotionValue(nextValue)) {\n      /**\n       * If this is a motion value found in props or style, we want to add it\n       * to our visual element's motion value map.\n       */\n      element.addValue(key, nextValue);\n    } else if (isMotionValue(prevValue)) {\n      /**\n       * If we're swapping to a new motion value, create a new motion value\n       * from that\n       */\n      element.addValue(key, motionValue(nextValue));\n    } else if (prevValue !== nextValue) {\n      /**\n       * If this is a flat value that has changed, update the motion value\n       * or create one if it doesn't exist. We only want to do this if we're\n       * not handling the value with our animation state.\n       */\n      if (element.hasValue(key)) {\n        var existingValue = element.getValue(key); // TODO: Only update values that aren't being animated or even looked at\n\n        !existingValue.hasAnimated && existingValue.set(nextValue);\n      } else {\n        element.addValue(key, motionValue((_a = element.getStaticValue(key)) !== null && _a !== void 0 ? _a : nextValue));\n      }\n    }\n  } // Handle removed values\n\n\n  for (var key in prev) {\n    if (next[key] === undefined) element.removeValue(key);\n  }\n\n  return next;\n}\n\nexport { updateMotionValuesFromProps };","import { calcRelativeOffset } from '../../../motion/features/layout/utils.js';\nimport { eachAxis } from '../../../utils/each-axis.js';\n\nfunction setCurrentViewportBox(visualElement) {\n  var projectionParent = visualElement.getProjectionParent();\n\n  if (!projectionParent) {\n    visualElement.rebaseProjectionTarget();\n    return;\n  }\n\n  var relativeOffset = calcRelativeOffset(projectionParent.getLayoutState().layout, visualElement.getLayoutState().layout);\n  eachAxis(function (axis) {\n    visualElement.setProjectionTargetAxis(axis, relativeOffset[axis].min, relativeOffset[axis].max, true);\n  });\n}\n\nexport { setCurrentViewportBox };","import { __assign, __read } from 'tslib';\nimport { number, px } from 'style-value-types';\nimport { isKeyframesTarget } from '../../../animation/utils/is-keyframes-target.js';\nimport { invariant } from 'hey-listen';\nimport { transformProps } from '../../html/utils/transform.js';\nimport { findDimensionValueType } from '../value-types/dimensions.js';\nvar positionalKeys = new Set([\"width\", \"height\", \"top\", \"left\", \"right\", \"bottom\", \"x\", \"y\"]);\n\nvar isPositionalKey = function isPositionalKey(key) {\n  return positionalKeys.has(key);\n};\n\nvar hasPositionalKey = function hasPositionalKey(target) {\n  return Object.keys(target).some(isPositionalKey);\n};\n\nvar setAndResetVelocity = function setAndResetVelocity(value, to) {\n  // Looks odd but setting it twice doesn't render, it'll just\n  // set both prev and current to the latest value\n  value.set(to, false);\n  value.set(to);\n};\n\nvar isNumOrPxType = function isNumOrPxType(v) {\n  return v === number || v === px;\n};\n\nvar BoundingBoxDimension;\n\n(function (BoundingBoxDimension) {\n  BoundingBoxDimension[\"width\"] = \"width\";\n  BoundingBoxDimension[\"height\"] = \"height\";\n  BoundingBoxDimension[\"left\"] = \"left\";\n  BoundingBoxDimension[\"right\"] = \"right\";\n  BoundingBoxDimension[\"top\"] = \"top\";\n  BoundingBoxDimension[\"bottom\"] = \"bottom\";\n})(BoundingBoxDimension || (BoundingBoxDimension = {}));\n\nvar getPosFromMatrix = function getPosFromMatrix(matrix, pos) {\n  return parseFloat(matrix.split(\", \")[pos]);\n};\n\nvar getTranslateFromMatrix = function getTranslateFromMatrix(pos2, pos3) {\n  return function (_bbox, _a) {\n    var transform = _a.transform;\n    if (transform === \"none\" || !transform) return 0;\n    var matrix3d = transform.match(/^matrix3d\\((.+)\\)$/);\n\n    if (matrix3d) {\n      return getPosFromMatrix(matrix3d[1], pos3);\n    } else {\n      var matrix = transform.match(/^matrix\\((.+)\\)$/);\n\n      if (matrix) {\n        return getPosFromMatrix(matrix[1], pos2);\n      } else {\n        return 0;\n      }\n    }\n  };\n};\n\nvar transformKeys = new Set([\"x\", \"y\", \"z\"]);\nvar nonTranslationalTransformKeys = transformProps.filter(function (key) {\n  return !transformKeys.has(key);\n});\n\nfunction removeNonTranslationalTransform(visualElement) {\n  var removedTransforms = [];\n  nonTranslationalTransformKeys.forEach(function (key) {\n    var value = visualElement.getValue(key);\n\n    if (value !== undefined) {\n      removedTransforms.push([key, value.get()]);\n      value.set(key.startsWith(\"scale\") ? 1 : 0);\n    }\n  }); // Apply changes to element before measurement\n\n  if (removedTransforms.length) visualElement.syncRender();\n  return removedTransforms;\n}\n\nvar positionalValues = {\n  // Dimensions\n  width: function width(_a) {\n    var x = _a.x;\n    return x.max - x.min;\n  },\n  height: function height(_a) {\n    var y = _a.y;\n    return y.max - y.min;\n  },\n  top: function top(_bbox, _a) {\n    var top = _a.top;\n    return parseFloat(top);\n  },\n  left: function left(_bbox, _a) {\n    var left = _a.left;\n    return parseFloat(left);\n  },\n  bottom: function bottom(_a, _b) {\n    var y = _a.y;\n    var top = _b.top;\n    return parseFloat(top) + (y.max - y.min);\n  },\n  right: function right(_a, _b) {\n    var x = _a.x;\n    var left = _b.left;\n    return parseFloat(left) + (x.max - x.min);\n  },\n  // Transform\n  x: getTranslateFromMatrix(4, 13),\n  y: getTranslateFromMatrix(5, 14)\n};\n\nvar convertChangedValueTypes = function convertChangedValueTypes(target, visualElement, changedKeys) {\n  var originBbox = visualElement.measureViewportBox();\n  var element = visualElement.getInstance();\n  var elementComputedStyle = getComputedStyle(element);\n  var display = elementComputedStyle.display,\n      top = elementComputedStyle.top,\n      left = elementComputedStyle.left,\n      bottom = elementComputedStyle.bottom,\n      right = elementComputedStyle.right,\n      transform = elementComputedStyle.transform;\n  var originComputedStyle = {\n    top: top,\n    left: left,\n    bottom: bottom,\n    right: right,\n    transform: transform\n  }; // If the element is currently set to display: \"none\", make it visible before\n  // measuring the target bounding box\n\n  if (display === \"none\") {\n    visualElement.setStaticValue(\"display\", target.display || \"block\");\n  } // Apply the latest values (as set in checkAndConvertChangedValueTypes)\n\n\n  visualElement.syncRender();\n  var targetBbox = visualElement.measureViewportBox();\n  changedKeys.forEach(function (key) {\n    // Restore styles to their **calculated computed style**, not their actual\n    // originally set style. This allows us to animate between equivalent pixel units.\n    var value = visualElement.getValue(key);\n    setAndResetVelocity(value, positionalValues[key](originBbox, originComputedStyle));\n    target[key] = positionalValues[key](targetBbox, elementComputedStyle);\n  });\n  return target;\n};\n\nvar checkAndConvertChangedValueTypes = function checkAndConvertChangedValueTypes(visualElement, target, origin, transitionEnd) {\n  if (origin === void 0) {\n    origin = {};\n  }\n\n  if (transitionEnd === void 0) {\n    transitionEnd = {};\n  }\n\n  target = __assign({}, target);\n  transitionEnd = __assign({}, transitionEnd);\n  var targetPositionalKeys = Object.keys(target).filter(isPositionalKey); // We want to remove any transform values that could affect the element's bounding box before\n  // it's measured. We'll reapply these later.\n\n  var removedTransformValues = [];\n  var hasAttemptedToRemoveTransformValues = false;\n  var changedValueTypeKeys = [];\n  targetPositionalKeys.forEach(function (key) {\n    var value = visualElement.getValue(key);\n    if (!visualElement.hasValue(key)) return;\n    var from = origin[key];\n    var to = target[key];\n    var fromType = findDimensionValueType(from);\n    var toType; // TODO: The current implementation of this basically throws an error\n    // if you try and do value conversion via keyframes. There's probably\n    // a way of doing this but the performance implications would need greater scrutiny,\n    // as it'd be doing multiple resize-remeasure operations.\n\n    if (isKeyframesTarget(to)) {\n      var numKeyframes = to.length;\n\n      for (var i = to[0] === null ? 1 : 0; i < numKeyframes; i++) {\n        if (!toType) {\n          toType = findDimensionValueType(to[i]);\n          invariant(toType === fromType || isNumOrPxType(fromType) && isNumOrPxType(toType), \"Keyframes must be of the same dimension as the current value\");\n        } else {\n          invariant(findDimensionValueType(to[i]) === toType, \"All keyframes must be of the same type\");\n        }\n      }\n    } else {\n      toType = findDimensionValueType(to);\n    }\n\n    if (fromType !== toType) {\n      // If they're both just number or px, convert them both to numbers rather than\n      // relying on resize/remeasure to convert (which is wasteful in this situation)\n      if (isNumOrPxType(fromType) && isNumOrPxType(toType)) {\n        var current = value.get();\n\n        if (typeof current === \"string\") {\n          value.set(parseFloat(current));\n        }\n\n        if (typeof to === \"string\") {\n          target[key] = parseFloat(to);\n        } else if (Array.isArray(to) && toType === px) {\n          target[key] = to.map(parseFloat);\n        }\n      } else if ((fromType === null || fromType === void 0 ? void 0 : fromType.transform) && (toType === null || toType === void 0 ? void 0 : toType.transform) && (from === 0 || to === 0)) {\n        // If one or the other value is 0, it's safe to coerce it to the\n        // type of the other without measurement\n        if (from === 0) {\n          value.set(toType.transform(from));\n        } else {\n          target[key] = fromType.transform(to);\n        }\n      } else {\n        // If we're going to do value conversion via DOM measurements, we first\n        // need to remove non-positional transform values that could affect the bbox measurements.\n        if (!hasAttemptedToRemoveTransformValues) {\n          removedTransformValues = removeNonTranslationalTransform(visualElement);\n          hasAttemptedToRemoveTransformValues = true;\n        }\n\n        changedValueTypeKeys.push(key);\n        transitionEnd[key] = transitionEnd[key] !== undefined ? transitionEnd[key] : target[key];\n        setAndResetVelocity(value, to);\n      }\n    }\n  });\n\n  if (changedValueTypeKeys.length) {\n    var convertedTarget = convertChangedValueTypes(target, visualElement, changedValueTypeKeys); // If we removed transform values, reapply them before the next render\n\n    if (removedTransformValues.length) {\n      removedTransformValues.forEach(function (_a) {\n        var _b = __read(_a, 2),\n            key = _b[0],\n            value = _b[1];\n\n        visualElement.getValue(key).set(value);\n      });\n    } // Reapply original values\n\n\n    visualElement.syncRender();\n    return {\n      target: convertedTarget,\n      transitionEnd: transitionEnd\n    };\n  } else {\n    return {\n      target: target,\n      transitionEnd: transitionEnd\n    };\n  }\n};\n/**\n * Convert value types for x/y/width/height/top/left/bottom/right\n *\n * Allows animation between `'auto'` -> `'100%'` or `0` -> `'calc(50% - 10vw)'`\n *\n * @internal\n */\n\n\nfunction unitConversion(visualElement, target, origin, transitionEnd) {\n  return hasPositionalKey(target) ? checkAndConvertChangedValueTypes(visualElement, target, origin, transitionEnd) : {\n    target: target,\n    transitionEnd: transitionEnd\n  };\n}\n\nexport { BoundingBoxDimension, unitConversion };","import { resolveCSSVariables } from './css-variables-conversion.js';\nimport { unitConversion } from './unit-conversion.js';\n/**\n * Parse a DOM variant to make it animatable. This involves resolving CSS variables\n * and ensuring animations like \"20%\" => \"calc(50vw)\" are performed in pixels.\n */\n\nvar parseDomVariant = function parseDomVariant(visualElement, target, origin, transitionEnd) {\n  var resolved = resolveCSSVariables(visualElement, target, transitionEnd);\n  target = resolved.target;\n  transitionEnd = resolved.transitionEnd;\n  return unitConversion(visualElement, target, origin, transitionEnd);\n};\n\nexport { parseDomVariant };","import { __rest, __assign } from 'tslib';\nimport { visualElement } from '../index.js';\nimport { getOrigin, checkTargetForNewValues } from '../utils/setters.js';\nimport { getBoundingBox } from '../dom/projection/measure.js';\nimport { buildHTMLStyles } from './utils/build-styles.js';\nimport { isCSSVariable } from '../dom/utils/is-css-variable.js';\nimport { parseDomVariant } from '../dom/utils/parse-dom-variant.js';\nimport { isTransformProp } from './utils/transform.js';\nimport { scrapeMotionValuesFromProps } from './utils/scrape-motion-values.js';\nimport { renderHTML } from './utils/render.js';\nimport { getDefaultValueType } from '../dom/value-types/defaults.js';\nimport { buildLayoutProjectionTransformOrigin, buildLayoutProjectionTransform } from './utils/build-projection-transform.js';\n\nfunction getComputedStyle(element) {\n  return window.getComputedStyle(element);\n}\n\nvar htmlConfig = {\n  treeType: \"dom\",\n  readValueFromInstance: function readValueFromInstance(domElement, key) {\n    if (isTransformProp(key)) {\n      var defaultType = getDefaultValueType(key);\n      return defaultType ? defaultType.default || 0 : 0;\n    } else {\n      var computedStyle = getComputedStyle(domElement);\n      return (isCSSVariable(key) ? computedStyle.getPropertyValue(key) : computedStyle[key]) || 0;\n    }\n  },\n  sortNodePosition: function sortNodePosition(a, b) {\n    /**\n     * compareDocumentPosition returns a bitmask, by using the bitwise &\n     * we're returning true if 2 in that bitmask is set to true. 2 is set\n     * to true if b preceeds a.\n     */\n    return a.compareDocumentPosition(b) & 2 ? 1 : -1;\n  },\n  getBaseTarget: function getBaseTarget(props, key) {\n    var _a;\n\n    return (_a = props.style) === null || _a === void 0 ? void 0 : _a[key];\n  },\n  measureViewportBox: function measureViewportBox(element, _a) {\n    var transformPagePoint = _a.transformPagePoint;\n    return getBoundingBox(element, transformPagePoint);\n  },\n\n  /**\n   * Reset the transform on the current Element. This is called as part\n   * of a batched process across the entire layout tree. To remove this write\n   * cycle it'd be interesting to see if it's possible to \"undo\" all the current\n   * layout transforms up the tree in the same way this.getBoundingBoxWithoutTransforms\n   * works\n   */\n  resetTransform: function resetTransform(element, domElement, props) {\n    var transformTemplate = props.transformTemplate;\n    domElement.style.transform = transformTemplate ? transformTemplate({}, \"\") : \"none\"; // Ensure that whatever happens next, we restore our transform on the next frame\n\n    element.scheduleRender();\n  },\n  restoreTransform: function restoreTransform(instance, mutableState) {\n    instance.style.transform = mutableState.style.transform;\n  },\n  removeValueFromRenderState: function removeValueFromRenderState(key, _a) {\n    var vars = _a.vars,\n        style = _a.style;\n    delete vars[key];\n    delete style[key];\n  },\n\n  /**\n   * Ensure that HTML and Framer-specific value types like `px`->`%` and `Color`\n   * can be animated by Motion.\n   */\n  makeTargetAnimatable: function makeTargetAnimatable(element, _a, _b, isMounted) {\n    var transformValues = _b.transformValues;\n\n    if (isMounted === void 0) {\n      isMounted = true;\n    }\n\n    var transition = _a.transition,\n        transitionEnd = _a.transitionEnd,\n        target = __rest(_a, [\"transition\", \"transitionEnd\"]);\n\n    var origin = getOrigin(target, transition || {}, element);\n    /**\n     * If Framer has provided a function to convert `Color` etc value types, convert them\n     */\n\n    if (transformValues) {\n      if (transitionEnd) transitionEnd = transformValues(transitionEnd);\n      if (target) target = transformValues(target);\n      if (origin) origin = transformValues(origin);\n    }\n\n    if (isMounted) {\n      checkTargetForNewValues(element, target, origin);\n      var parsed = parseDomVariant(element, target, origin, transitionEnd);\n      transitionEnd = parsed.transitionEnd;\n      target = parsed.target;\n    }\n\n    return __assign({\n      transition: transition,\n      transitionEnd: transitionEnd\n    }, target);\n  },\n  scrapeMotionValuesFromProps: scrapeMotionValuesFromProps,\n  build: function build(element, renderState, latestValues, projection, layoutState, options, props) {\n    if (element.isVisible !== undefined) {\n      renderState.style.visibility = element.isVisible ? \"visible\" : \"hidden\";\n    }\n\n    var isProjectionTranform = projection.isEnabled && layoutState.isHydrated;\n    buildHTMLStyles(renderState, latestValues, projection, layoutState, options, props.transformTemplate, isProjectionTranform ? buildLayoutProjectionTransform : undefined, isProjectionTranform ? buildLayoutProjectionTransformOrigin : undefined);\n  },\n  render: renderHTML\n};\nvar htmlVisualElement = visualElement(htmlConfig);\nexport { getComputedStyle, htmlConfig, htmlVisualElement };","import { __assign } from 'tslib';\nimport { visualElement } from '../index.js';\nimport { scrapeMotionValuesFromProps } from './utils/scrape-motion-values.js';\nimport { htmlConfig } from '../html/visual-element.js';\nimport { buildSVGAttrs } from './utils/build-attrs.js';\nimport { camelToDash } from '../dom/utils/camel-to-dash.js';\nimport { camelCaseAttributes } from './utils/camel-case-attrs.js';\nimport { isTransformProp } from '../html/utils/transform.js';\nimport { renderSVG } from './utils/render.js';\nimport { getDefaultValueType } from '../dom/value-types/defaults.js';\nimport { buildLayoutProjectionTransformOrigin, buildLayoutProjectionTransform } from '../html/utils/build-projection-transform.js';\nvar svgVisualElement = visualElement(__assign(__assign({}, htmlConfig), {\n  getBaseTarget: function getBaseTarget(props, key) {\n    return props[key];\n  },\n  readValueFromInstance: function readValueFromInstance(domElement, key) {\n    var _a;\n\n    if (isTransformProp(key)) {\n      return ((_a = getDefaultValueType(key)) === null || _a === void 0 ? void 0 : _a.default) || 0;\n    }\n\n    key = !camelCaseAttributes.has(key) ? camelToDash(key) : key;\n    return domElement.getAttribute(key);\n  },\n  scrapeMotionValuesFromProps: scrapeMotionValuesFromProps,\n  build: function build(_element, renderState, latestValues, projection, layoutState, options, props) {\n    var isProjectionTranform = projection.isEnabled && layoutState.isHydrated;\n    buildSVGAttrs(renderState, latestValues, projection, layoutState, options, props.transformTemplate, isProjectionTranform ? buildLayoutProjectionTransform : undefined, isProjectionTranform ? buildLayoutProjectionTransformOrigin : undefined);\n  },\n  render: renderSVG\n}));\nexport { svgVisualElement };","import { htmlVisualElement } from '../html/visual-element.js';\nimport { svgVisualElement } from '../svg/visual-element.js';\nimport { isSVGComponent } from './utils/is-svg-component.js';\n\nvar createDomVisualElement = function createDomVisualElement(Component, options) {\n  return isSVGComponent(Component) ? svgVisualElement(options, {\n    enableHardwareAcceleration: false\n  }) : htmlVisualElement(options, {\n    enableHardwareAcceleration: true\n  });\n};\n\nexport { createDomVisualElement };","import { __assign } from 'tslib';\nimport { createMotionComponent } from '../../motion/index.js';\nimport { createMotionProxy } from './motion-proxy.js';\nimport { createDomMotionConfig } from './utils/create-config.js';\nimport { gestureAnimations } from '../../motion/features/gestures.js';\nimport { animations } from '../../motion/features/animations.js';\nimport { drag } from '../../motion/features/drag.js';\nimport { layoutAnimations } from '../../motion/features/layout/index.js';\nimport { createDomVisualElement } from './create-visual-element.js';\n\nvar featureBundle = __assign(__assign(__assign(__assign({}, animations), gestureAnimations), drag), layoutAnimations);\n/**\n * HTML & SVG components, optimised for use with gestures and animation. These can be used as\n * drop-in replacements for any HTML & SVG component, all CSS & SVG properties are supported.\n *\n * @public\n */\n\n\nvar motion = /*@__PURE__*/createMotionProxy(function (Component, config) {\n  return createDomMotionConfig(Component, config, featureBundle, createDomVisualElement);\n});\n/**\n * Create a DOM `motion` component with the provided string. This is primarily intended\n * as a full alternative to `motion` for consumers who have to support environments that don't\n * support `Proxy`.\n *\n * ```javascript\n * import { createDomMotionComponent } from \"framer-motion\"\n *\n * const motion = {\n *   div: createDomMotionComponent('div')\n * }\n * ```\n *\n * @public\n */\n\nfunction createDomMotionComponent(key) {\n  return createMotionComponent(createDomMotionConfig(key, {\n    forwardMotionProps: false\n  }, featureBundle, createDomVisualElement));\n}\n\nexport { createDomMotionComponent, motion };","import { __assign } from 'tslib';\nimport { isSVGComponent } from './is-svg-component.js';\nimport { createUseRender } from '../use-render.js';\nimport { svgMotionConfig } from '../../svg/config-motion.js';\nimport { htmlMotionConfig } from '../../html/config-motion.js';\n\nfunction createDomMotionConfig(Component, _a, preloadedFeatures, createVisualElement) {\n  var _b = _a.forwardMotionProps,\n      forwardMotionProps = _b === void 0 ? false : _b;\n  var baseConfig = isSVGComponent(Component) ? svgMotionConfig : htmlMotionConfig;\n  return __assign(__assign({}, baseConfig), {\n    preloadedFeatures: preloadedFeatures,\n    useRender: createUseRender(forwardMotionProps),\n    createVisualElement: createVisualElement,\n    Component: Component\n  });\n}\n\nexport { createDomMotionConfig };","var isBrowser = typeof window !== \"undefined\";\nexport { isBrowser };","import { useLayoutEffect, useEffect } from 'react';\nimport { isBrowser } from './is-browser.js';\nvar useIsomorphicLayoutEffect = isBrowser ? useLayoutEffect : useEffect;\nexport { useIsomorphicLayoutEffect };"],"names":["reactPropsRegex","fn","cache","arg","undefined","prop","test","charCodeAt","MotionConfigContext","createContext","transformPagePoint","p","isStatic","addDomEvent","target","eventName","handler","options","addEventListener","removeEventListener","useDomEvent","ref","useEffect","element","current","createDefinition","propNames","isEnabled","props","some","name","featureDefinitions","measureLayout","animation","exit","drag","focus","hover","tap","pan","layoutAnimation","LazyContext","strict","featureNames","Object","keys","numFeatures","length","MotionContext","usePresence","context","useContext","isPresent","onExitComplete","register","id","useUniqueId","counter","incrementId","LayoutGroupContext","useVisualElement","Component","visualState","createVisualElement","config","lazyContext","parent","visualElement","presenceContext","layoutId","_a","layoutGroupId","useLayoutId","visualElementRef","useRef","renderer","presenceId","blockInitialAnimation","initial","setProps","isPresenceRoot","syncRender","animationState","animateChanges","notifyUnmount","isRefObject","prototype","hasOwnProperty","call","useCreateMotionContext","animate","inherit","getCurrentTreeVariants","useMemo","variantLabelsAsDependency","Array","isArray","join","preloadedFeatures","useRender","useVisualState","features","key","loadFeatures","forwardRef","externalRef","i","name_1","push","useFeatures","Provider","value","useCallback","instance","mount","unmount","useMotionRef","createMotionProxy","createConfig","custom","customMotionComponentConfig","componentCache","Map","Proxy","get","_target","has","set","lowercaseSVGElements","isSVGComponent","includes","indexOf","valueScaleCorrection","transformAxes","transformProps","sortTransformProps","a","b","forEach","operationKey","axesKey","transformPropSet","Set","isTransformProp","transformOriginProps","isTransformOriginProp","isForcedMotionValue","layout","isMotionValue","getVelocity","translateAlias","x","y","z","transformPerspective","isCSSVariable","startsWith","getValueAsType","type","transform","buildHTMLStyles","state","latestValues","projection","layoutState","transformTemplate","buildProjectionTransform","buildProjectionTransformOrigin","style","vars","transformKeys","transformOrigin","hasTransform","hasTransformOrigin","transformIsNone","valueType","number","valueAsType","default","isHydrated","correctedValue","process","applyTo","num","deltaFinal","treeScale","_b","transformIsDefault","_c","enableHardwareAcceleration","_d","allowTransformNone","transformString","sort","transformHasZ","numTransformKeys","trim","buildTransform","originX","originY","originZ","buildTransformOrigin","createHtmlRenderState","copyRawValuesOnly","source","useStyle","assign","useInitialMotionValues","transformValues","useHTMLProps","htmlProps","Boolean","draggable","userSelect","WebkitUserSelect","WebkitTouchCallout","touchAction","validMotionProps","isValidMotionProp","shouldForward","emotionIsPropValid_1","calcOrigin","origin","offset","size","px","progressToPixels","progress","dashKeys","array","camelKeys","buildSVGAttrs","attrX","attrY","pathLength","pathSpacing","pathOffset","attrs","dimensions","totalPathLength","width","height","calcSVGTransformOrigin","totalLength","spacing","useDashCase","buildSVGPath","createSvgRenderState","useSVGProps","visualProps","rawStyles","createUseRender","forwardMotionProps","filteredProps","isDom","filterProps","elementProps","createElement","CAMEL_CASE_PATTERN","camelToDash","str","replace","toLowerCase","renderHTML","setProperty","camelCaseAttributes","renderSVG","renderState","setAttribute","scrapeMotionValuesFromProps","newValues","toUpperCase","isAnimationControls","v","start","makeState","createRenderState","onMount","makeLatestValues","makeUseVisualState","scrapeMotionValues","unwrappedValue","values","motionValues","toValue","isControllingVariants","isVariantNode","variantToSet","definition","resolved","transitionEnd","transition","svgMotionConfig","getBBox","getBoundingClientRect","e","tagName","getTotalLength","AnimationType","htmlMotionConfig","isMouseEvent","event","PointerEvent","pointerType","MouseEvent","isTouchEvent","touches","defaultPagePoint","pageX","pageY","pointFromTouch","pointType","point","changedTouches","pointFromMouse","extractEventInfo","wrapHandler","shouldFilterPrimaryPointer","eventHandler","listener","button","mouseEventNames","pointerdown","pointermove","pointerup","pointercancel","pointerover","pointerout","pointerenter","pointerleave","touchEventNames","getPointerEventName","window","onpointerdown","ontouchstart","onmousedown","addPointerEvent","usePointerEvent","createLock","lock","globalHorizontalLock","globalVerticalLock","getGlobalLock","openHorizontal_1","openVertical_1","isDragActive","openGestureLock","createHoverEvent","isActive","callback","info","setActive","Hover","isNodeOrChild","child","parentElement","useUnmountEffect","makeRenderlessComponent","hook","gestureAnimations","onTap","onTapStart","onTapCancel","whileTap","hasPressListeners","isPressing","cancelPointerEndListeners","removePointerEndListener","checkPointerEnd","Tap","onPointerUp","getInstance","onPointerCancel","pipe","whileFocus","Focus","onHoverStart","onHoverEnd","whileHover","shallowCompare","next","prev","prevLength","variantPriorityOrder","Animate","Drag","Exit","reversePriorityOrder","reverse","numAnimationTypes","createAnimationState","animations","Promise","all","map","animateList","createTypeState","allAnimatedKeys","isInitialRender","buildResolvedTypeValues","acc","changedActiveType","getProps","getVariantContext","removedKeys","encounteredKeys","removedVariantIndex","Infinity","_loop_1","typeState","propIsVariant","activeDelta","isInherited","manuallyAnimateOnMount","protectedKeys","prevProp","shouldAnimateType","variantsHaveChanged","definitionList","resolvedValues","reduce","prevResolvedValues","allKeys","markToAnimate","delete","needsAnimating","add","apply","fallbackAnimation_1","fallbackTarget","getBaseTarget","shouldAnimate","resolve","isAnimated","variantChildren","setAnimateFunction","makeAnimator","getState","subscribe","then","isPoint","isPoint3D","distance1D","Math","abs","distance","xDelta","yDelta","zDelta","sqrt","pow","PanSession","handlers","_this","this","startEvent","lastMoveEvent","lastMoveEventInfo","updatePoint","getPanInfo","history","isPanStarted","isDistancePastThreshold","timestamp","onStart","onMove","handlePointerMove","transformPoint","buttons","handlePointerUp","end","onEnd","onSessionEnd","panInfo","initialInfo","onSessionStart","removeListeners","updateHandlers","subtractPoint","delta","lastDevicePoint","startDevicePoint","velocity","timeDelta","timestampedPoint","lastPoint","time","currentVelocity","noop","any","convertBoundingBoxToAxisBox","top","min","left","max","right","bottom","zeroDelta","translate","scale","originPoint","eachAxis","applyConstraints","elastic","mix","calcRelativeAxisConstraints","axis","calcViewportAxisConstraints","layoutAxis","constraintsAxis","resolveAxisElastic","dragElastic","minLabel","maxLabel","resolvePointElastic","label","getBoundingBox","topLeft","bottomRight","transformBoundingBox","isNear","maxDistance","calcLength","sourceLength","targetLength","clamp","updateAxisDelta","updateBoxDelta","defaultOrigin","calcRelativeAxis","relative","compareByDepth","depth","isProjecting","shouldResetTransform","collectProjectingAncestors","ancestors","updateLayoutMeasurement","box","getLayoutState","notifyBeforeLayoutMeasure","measureViewportBox","layoutCorrected","notifyLayoutMeasure","prevViewportBox","rebaseProjectionTarget","calcRelativeOffsetAxis","calcRelativeOffset","checkIfParentHasChanged","prevId","getLayoutId","nextId","isDraggable","_dragX","resetAxis","originAxis","scalePoint","applyPointDelta","boxScale","applyAxisDelta","applyBoxDelta","applyAxisTransforms","final","transforms","scaleKey","originKey","axisOrigin","xKeys","yKeys","applyBoxTransforms","finalBox","removePointDelta","removeAxisTransforms","removeAxisDelta","removeBoxTransforms","unresolvedJobs","pushJob","stack","job","pointer","batchLayout","flushLayout","reads","writes","setRead","setWrite","clear","numStacks","executeJob","lastPointerEvent","elementDragControls","WeakMap","VisualElementDragControls","isDragging","currentDirection","constraints","hasMutatedConstraints","cursorProgress","openGlobalLock","panSession","enableLayoutProjection","originEvent","snapToCursor","stopMotion","initialPoint","getViewportPointFromEvent","cancelLayout","read","write","children","addChild","collectProjectingChildren","tree","hasManuallySetCursorOrigin","isLayoutDrag","lockProjectionTarget","resetTransform","restoreTransform","getAxisMotionValue","isExternalDrag","scheduleUpdateLayoutProjection","axisValue","resolveDragConstraints","dragPropagation","onDragStart","_e","dragDirectionLock","lockThreshold","direction","getCurrentDirection","onDirectionLock","updateAxis","onDrag","stop","dragConstraints","resolveRefConstraints","layoutBox","calcRelativeConstraints","resolveDragElastic","relativeConstraints","rebaseAxisConstraints","onMeasureDragConstraints","constraintsElement","constraintsBox","measuredConstraints","calcViewportConstraints","userConstraints","convertAxisBoxToBoundingBox","cancelDrag","unlockProjectionTarget","animateDragEnd","onDragEnd","shouldDrag","length_1","center","updateAxisMotionValue","updateVisualElementAxis","nextValue","update","axisLayout","axisLength","axisProgress","calcConstrainedMinPoint","setProjectionTargetAxis","_f","_g","dragMomentum","remainingProps","dragKey","getValue","_dragY","dragTransition","isRelative","projectionParent","getProjectionParent","getLatestValues","convertToRelativeProjection","relativeConstraints_1","targetFinal","isNaN","momentumAnimations","bounceStiffness","bounceDamping","inertia","timeConstant","restDelta","restSpeed","startAxisValueAnimation","startLayoutAnimation","onDragTransitionEnd","stopLayoutAnimation","currentValue","boxProgress","updateConstraints","calcPositionFromProgress","setTimeout","onReady","stopPointerListener","dragListener","stopResizeListener","stopLayoutUpdateListener","onLayoutUpdate","prevDragCursor","Presence","VisibilityAction","onPan","onPanStart","onPanEnd","onPanSessionStart","hasPanEvents","groupDragControls","dragControls","cssVariableRegex","getVariableValue","match","exec","parseCSSVariable","token","fallback","getComputedStyle","getPropertyValue","pixelsToPercent","pixels","varToken","borderCorrectionDefinition","latest","_layoutState","parseFloat","defaultScaleCorrectors","borderRadius","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius","boxShadow","original","containsCSSVariables","cssVariables","shadow","complex","template","xScale","yScale","averageScale","output","i_1","cssVariable","_super","arguments","frameTarget","currentAnimationTarget","isAnimating","stopAxisAnimation","isAnimatingTree","originBox","targetBox","visibilityAction","shouldStackAnimate","onComplete","prevParent","safeToRemove","prevParentViewportBox","parentLayout","isProvidedCorrectDataForRelativeSharedLayout","boxHasMoved","hasMoved","isTargetLocked","animateAxis","setVisibility","Show","notifyLayoutAnimationComplete","componentDidMount","animateMotionValue","unsubLayoutReady","layoutSafeToRemove","correctors","addScaleCorrection","componentWillUnmount","axisIsEqual","layoutProgress","getProjectionAnimationProgress","clearListeners","frame","tweenAxis","unsubscribeProgress","onChange","layoutTransition","getDefaultTransition","defaultLayoutTransition","render","isZeroBox","zeroAxis","duration","ease","defaultHandler","layoutReady","notifyLayoutReady","createBatcher","queue","flush","order","from","presence","Present","assignProjectionToSnapshot","SharedLayoutContext","FramerTreeLayoutContext","isSharedLayout","forceUpdate","Measure","syncLayout","framerSyncLayout","onUnmount","remove","getSnapshotBeforeUpdate","syncUpdate","snapshotViewportBox","componentDidUpdate","layoutAnimations","createLayoutState","deltaTransform","zeroLayout","buildLayoutProjectionTransform","latestTransform","rotate","rotateX","rotateY","identityProjection","buildLayoutProjectionTransformOrigin","names","updateLayoutDeltas","treePath","treeLength","node","applyTreeDeltas","FlatTree","isDirty","treeType","build","_getBaseTarget","_makeTargetAnimatable","makeTargetAnimatable","_measureViewportBox","renderInstance","readValueFromInstance","_resetTransform","_restoreTransform","removeValueFromRenderState","_sortNodePosition","sortNodePosition","unsubscribeFromLeadVisualElement","crossfader","projectionTargetProgress","removeFromVariantTree","lifecycles","managers","propSubscriptions","clearAllListeners","manager","updatePropListeners","on","propListener","args","_i","notify","createLifecycles","leadProjection","leadLatestValues","hasViewportBoxUpdated","valueSubscriptions","prevMotionValues","baseTarget","isProjectionReady","triggerBuild","valuesToRender","crossfadedValues","getCrossfadeState","notifyUpdate","_updateTreeLayoutProjection","layoutTree","fireUpdateLayoutProjection","initialMotionValues","path","isVisible","isMounted","newInstance","pointTo","addVariantChild","updateLayoutProjection","closestVariantNode","getClosestVariantNode","other","updateTreeLayoutProjection","getStaticValue","setStaticValue","visibility","scheduleRender","canMutate","addValue","hasValue","removeValue","removeOnChange","latestValue","onUpdate","removeOnRenderRequest","onRenderRequest","bindToMotionValue","defaultValue","forEachValue","readValue","setBaseTarget","newProps","prevValue","existingValue","hasAnimated","updateMotionValuesFromProps","getVariant","variants","startAtParent","context_1","numVariantProps","variantProps","setCrossfader","newCrossfader","relativeTarget","withTransform","viewportBox","notifySetAxisTarget","force","shouldRebase","relativeOffset","setCurrentViewportBox","notifyLayoutUpdate","prevTreeScaleX","prevTreeScaleY","prevDeltaTransform","notifyViewportBoxUpdate","fireResolveRelativeTargetBox","foundParent","ancestor","resolveRelativeTargetBox","relativeParent","parentProjection","calcRelativeBox","_layoutResetTransform","newLead","onSetAxisTarget","onLayoutAnimationComplete","Entering","BoundingBoxDimension","positionalKeys","isPositionalKey","setAndResetVelocity","to","isNumOrPxType","getPosFromMatrix","matrix","pos","split","getTranslateFromMatrix","pos2","pos3","_bbox","matrix3d","nonTranslationalTransformKeys","filter","positionalValues","checkAndConvertChangedValueTypes","targetPositionalKeys","removedTransformValues","hasAttemptedToRemoveTransformValues","changedValueTypeKeys","toType","fromType","numKeyframes","removedTransforms","removeNonTranslationalTransform","convertedTarget","changedKeys","originBbox","elementComputedStyle","display","originComputedStyle","targetBbox","convertChangedValueTypes","unitConversion","hasPositionalKey","parseDomVariant","HTMLElement","resolveCSSVariables","htmlConfig","domElement","defaultType","computedStyle","compareDocumentPosition","mutableState","parsed","isProjectionTranform","htmlVisualElement","svgVisualElement","getAttribute","_element","featureBundle","motion","baseConfig","isBrowser","useIsomorphicLayoutEffect","useLayoutEffect"],"sourceRoot":""}